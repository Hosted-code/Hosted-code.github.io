<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>LeetCode - 满足条件的子序列数目</title>
    <url>/posts/1607020646.html</url>
    <content><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>链接：<a href="https://leetcode-cn.com/problems/coin-change" target="_blank" rel="noopener">https://leetcode-cn.com/problems/coin-change</a></p>
<p>给定不同面额的硬币 coins 和一个总金额 amount。编写一个函数来计算可以凑成总金额所需的最少的硬币个数。如果没有任何一种硬币组合能组成总金额，返回 -1。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">示例 1:</span><br><span class="line"></span><br><span class="line">输入: coins &#x3D; [1, 2, 5], amount &#x3D; 11</span><br><span class="line">输出: 3 </span><br><span class="line">解释: 11 &#x3D; 5 + 5 + 1</span><br><span class="line">示例 2:</span><br><span class="line"></span><br><span class="line">输入: coins &#x3D; [2], amount &#x3D; 3</span><br><span class="line">输出: -1</span><br></pre></td></tr></table></figure>



<p>说明:<br>你可以认为每种硬币的数量是无限的。</p>
<h1 id="思路一"><a href="#思路一" class="headerlink" title="思路一"></a>思路一</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *p1, <span class="keyword">const</span> <span class="keyword">void</span> *p2)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> *(<span class="keyword">int</span> *)p1 - *(<span class="keyword">int</span> *)p2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>* coins, <span class="keyword">int</span> coinsSize, <span class="keyword">int</span> amount)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((coins == <span class="literal">NULL</span>) || (coinsSize &lt; <span class="number">1</span>) || (amount &lt; <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (amount == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">-1</span>;</span><br><span class="line">    </span><br><span class="line">    qsort(coins, coinsSize, <span class="keyword">sizeof</span>(<span class="keyword">int</span>), compare);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> *dp = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (amount + <span class="number">1</span>));</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">//base</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; amount + <span class="number">1</span>; i++) &#123;</span><br><span class="line">        dp[i] = amount + <span class="number">1</span>;    <span class="comment">//数组赋值为amount+1, 是无法取到的值</span></span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; coinsSize; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; coins[j]) &#123; <span class="comment">//问题无解, amount小于该面值</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (dp[i - coins[j]] + <span class="number">1</span> &lt; dp[i]) &#123;</span><br><span class="line">                dp[i] = dp[i - coins[j]] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dp[amount] != amount + <span class="number">1</span>) &#123;</span><br><span class="line">        res = dp[amount];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(dp);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="耗时最短的思路"><a href="#耗时最短的思路" class="headerlink" title="耗时最短的思路"></a>耗时最短的思路</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *a, <span class="keyword">const</span> <span class="keyword">void</span> *b)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> *(<span class="keyword">int</span> *)b - *(<span class="keyword">int</span> *)a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">searchCoin</span><span class="params">(<span class="keyword">int</span> *coins, <span class="keyword">int</span> coinsSize, <span class="keyword">int</span> i_coin, <span class="keyword">int</span> sum, <span class="keyword">int</span> amount, <span class="keyword">int</span> *result)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num = amount / coins[i_coin];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((sum + num) &gt;= *result ) &#123;	</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (amount % coins[i_coin] == <span class="number">0</span>) &#123;	<span class="comment">//目标金额能整除最大面值的, 最小硬币数必为此种情况</span></span><br><span class="line">        *result = sum + num;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (i_coin + <span class="number">1</span> &lt; coinsSize) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = num; i &gt;= <span class="number">0</span>; i--) &#123; <span class="comment">//减少了循环次数</span></span><br><span class="line">            <span class="keyword">if</span> (sum + i &gt;= *result - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            searchCoin(coins, coinsSize, i_coin+<span class="number">1</span>, sum + i, amount - i*coins[i_coin], result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>* coins, <span class="keyword">int</span> coinsSize, <span class="keyword">int</span> amount)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (coins == <span class="literal">NULL</span> || coinsSize &lt;  <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    qsort(coins, coinsSize, <span class="keyword">sizeof</span>(<span class="keyword">int</span>), cmp);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> result = amount + <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    searchCoin(coins, coinsSize, <span class="number">0</span>, <span class="number">0</span>, amount, &amp;result);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (result == amount + <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><table>
<thead>
<tr>
<th align="left">提交时间</th>
<th align="left">运行时间</th>
<th align="left">内存消耗</th>
<th align="left">语言</th>
</tr>
</thead>
<tbody><tr>
<td align="left">思路一</td>
<td align="left">40 ms</td>
<td align="left">9.4 MB</td>
<td align="left">C</td>
</tr>
<tr>
<td align="left">思路二</td>
<td align="left">0 ms</td>
<td align="left"></td>
<td align="left">C</td>
</tr>
</tbody></table>
<ul>
<li><p>思路一, 思路二核心思路都是动规</p>
</li>
<li><p>思路二的拦截条件极其 nice</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>动态规划</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 满足条件的子序列数目</title>
    <url>/posts/1607020647.html</url>
    <content><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>链接：<a href="https://leetcode-cn.com/problems/number-of-subsequences-that-satisfy-the-given-sum-condition" target="_blank" rel="noopener">https://leetcode-cn.com/problems/number-of-subsequences-that-satisfy-the-given-sum-condition</a></p>
<p>给你一个整数数组 nums 和一个整数 target 。</p>
<p>请你统计并返回 nums 中能满足其最小元素与最大元素的 和 小于或等于 target 的 非空 子序列的数目。</p>
<p>由于答案可能很大，请将结果对 <code>10^9 + 7</code> 取余后返回。</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">示例 1：</span><br><span class="line"></span><br><span class="line">输入：nums &#x3D; [3,5,6,7], target &#x3D; 9</span><br><span class="line">输出：4</span><br><span class="line">解释：有 4 个子序列满足该条件。</span><br><span class="line">[3] -&gt; 最小元素 + 最大元素 &lt;&#x3D; target (3 + 3 &lt;&#x3D; 9)</span><br><span class="line">[3,5] -&gt; (3 + 5 &lt;&#x3D; 9)</span><br><span class="line">[3,5,6] -&gt; (3 + 6 &lt;&#x3D; 9)</span><br><span class="line">[3,6] -&gt; (3 + 6 &lt;&#x3D; 9)</span><br><span class="line">示例 2：</span><br><span class="line"></span><br><span class="line">输入：nums &#x3D; [3,3,6,8], target &#x3D; 10</span><br><span class="line">输出：6</span><br><span class="line">解释：有 6 个子序列满足该条件。（nums 中可以有重复数字）</span><br><span class="line">[3] , [3] , [3,3], [3,6] , [3,6] , [3,3,6]</span><br><span class="line">示例 3：</span><br><span class="line"></span><br><span class="line">输入：nums &#x3D; [2,3,3,4,6,7], target &#x3D; 12</span><br><span class="line">输出：61</span><br><span class="line">解释：共有 63 个非空子序列，其中 2 个不满足条件（[6,7], [7]）</span><br><span class="line">有效序列总数为（63 - 2 &#x3D; 61）</span><br><span class="line">示例 4：</span><br><span class="line"></span><br><span class="line">输入：nums &#x3D; [5,2,4,1,7,6,8], target &#x3D; 16</span><br><span class="line">输出：127</span><br><span class="line">解释：所有非空子序列都满足条件 (2^7 - 1) &#x3D; 127</span><br></pre></td></tr></table></figure>


<p>提示：</p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 10^5</code></li>
<li><code>1 &lt;= nums[i] &lt;= 10^6</code></li>
<li><code>1 &lt;= target &lt;= 10^6</code></li>
</ul>
<h1 id="思路一"><a href="#思路一" class="headerlink" title="思路一"></a>思路一</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//排序</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *p1, <span class="keyword">const</span> <span class="keyword">void</span> *p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (*(<span class="keyword">int</span>*)p1 - *(<span class="keyword">int</span>*)p2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">power</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">unsigned</span> times)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">long</span> base = num;</span><br><span class="line">    <span class="keyword">while</span> (times != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (times % <span class="number">2</span>) &#123;</span><br><span class="line">            res = (res * base) % (<span class="number">1000000000</span> + <span class="number">7</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        base = (base * base) % (<span class="number">1000000000</span> + <span class="number">7</span>);</span><br><span class="line">        times /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res % (<span class="number">1000000000</span> + <span class="number">7</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">numSubseq</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> right = numsSize - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mod = power(<span class="number">10</span>, <span class="number">9</span>) + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">    qsort(nums, numsSize, <span class="keyword">sizeof</span>(<span class="keyword">int</span>), compare);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[left] + nums[right] &gt; target) &#123;</span><br><span class="line">            right--;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res = (<span class="keyword">int</span>)((res + power(<span class="number">2</span>, (right-left))) % mod);</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="思路二"><a href="#思路二" class="headerlink" title="思路二"></a>思路二</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//排序</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *p1, <span class="keyword">const</span> <span class="keyword">void</span> *p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (*(<span class="keyword">int</span>*)p1 - *(<span class="keyword">int</span>*)p2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">numSubseq</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mod = <span class="number">1000000000</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">int</span> *<span class="built_in">pow</span> = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*numsSize);</span><br><span class="line">    <span class="built_in">pow</span>[<span class="number">0</span>] = <span class="number">1</span>;  <span class="comment">// 2^0 = 1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; numsSize; i++) &#123;</span><br><span class="line">        <span class="built_in">pow</span>[i] = (<span class="built_in">pow</span>[i<span class="number">-1</span>] &lt;&lt; <span class="number">1</span>) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    qsort(nums, numsSize, <span class="keyword">sizeof</span>(<span class="keyword">int</span>), compare);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> right = numsSize - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[left] + nums[right] &gt; target) &#123;</span><br><span class="line">            right--;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res = (<span class="keyword">int</span>)((res + <span class="built_in">pow</span>[right-left]) % mod);</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(<span class="built_in">pow</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="目前耗时最短的思路"><a href="#目前耗时最短的思路" class="headerlink" title="目前耗时最短的思路"></a>目前耗时最短的思路</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_VALUE  1000000007</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> *p1, <span class="keyword">int</span> *p2)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> *p1 - *p2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">numSubseq</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> start, <span class="built_in">end</span>;</span><br><span class="line">    <span class="keyword">int</span> loop;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> retCnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mod[numsSize];</span><br><span class="line">    qsort(nums, numsSize, <span class="keyword">sizeof</span>(<span class="keyword">int</span>), cmp);</span><br><span class="line">    <span class="built_in">memset</span>(mod, <span class="number">0</span>, <span class="keyword">sizeof</span>(mod));</span><br><span class="line">    mod[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (loop = <span class="number">1</span>; loop &lt; numsSize; loop++) &#123;</span><br><span class="line">        mod[loop] = mod[loop - <span class="number">1</span>] * <span class="number">2</span>;</span><br><span class="line">        mod[loop] %= MAX_VALUE;</span><br><span class="line">    &#125;</span><br><span class="line">    start = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">end</span> = numsSize - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(start &lt;= <span class="built_in">end</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[start] + nums[<span class="built_in">end</span>] &gt; target) &#123;</span><br><span class="line">            <span class="built_in">end</span>--;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        retCnt += mod[<span class="built_in">end</span> - start];</span><br><span class="line">        retCnt %= MAX_VALUE;</span><br><span class="line">        start++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)retCnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">运行时间</th>
<th align="left">内存消耗</th>
<th align="left">语言</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="left">思路一</td>
<td align="left">通过</td>
<td align="left">176 ms</td>
<td align="left">13.5 MB</td>
<td>C</td>
</tr>
<tr>
<td align="left">思路二</td>
<td align="left">通过</td>
<td align="left">168 ms</td>
<td align="left">15.4 MB</td>
<td>C</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>快速幂</tag>
        <tag>双指针</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 水域大小</title>
    <url>/posts/688830996.html</url>
    <content><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>来源：<a href="https://leetcode-cn.com/problems/pond-sizes-lcci" target="_blank" rel="noopener">https://leetcode-cn.com/problems/pond-sizes-lcci</a></p>
<p>你有一个用于表示一片土地的整数矩阵land，该矩阵中每个点的值代表对应地点的海拔高度。若值为0则表示水域。由垂直、水平或对角连接的水域为池塘。池塘的大小是指相连接的水域的个数。编写一个方法来计算矩阵中所有池塘的大小，返回值需要从小到大排序。</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">输入：</span><br><span class="line">[</span><br><span class="line">  [0,2,1,0],</span><br><span class="line">  [0,1,0,1],</span><br><span class="line">  [1,1,0,1],</span><br><span class="line">  [0,1,0,1]</span><br><span class="line">]</span><br><span class="line">输出： [1,2,4]</span><br></pre></td></tr></table></figure>



<p>提示：</p>
<ul>
<li><code>0 &lt; len(land) &lt;= 1000</code></li>
<li><code>0 &lt; len(land[i]) &lt;= 1000</code></li>
</ul>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXSIZE  1000</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>** land, <span class="keyword">int</span> landSize, <span class="keyword">int</span>* landColSize, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//八个方向</span></span><br><span class="line">    <span class="keyword">int</span> path[][<span class="number">2</span>] = &#123;&#123;<span class="number">-1</span>,<span class="number">-1</span>&#125;, &#123;<span class="number">0</span>,<span class="number">-1</span>&#125;, &#123;<span class="number">1</span>,<span class="number">-1</span>&#125;, &#123;<span class="number">-1</span>,<span class="number">0</span>&#125;, &#123;<span class="number">1</span>,<span class="number">0</span>&#125;, &#123;<span class="number">-1</span>,<span class="number">1</span>&#125;, &#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">int</span> dx, dy;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt; landSize - <span class="number">1</span> || y &lt; <span class="number">0</span> || y &gt; landColSize[x] - <span class="number">1</span> || land[x][y] != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    land[x][y] = <span class="number">-1</span>;	<span class="comment">//标记访问</span></span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">1</span>;  <span class="comment">//初始大小为1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; <span class="number">8</span>; n++) &#123;</span><br><span class="line">        dx = x + path[n][<span class="number">0</span>];</span><br><span class="line">        dy = y + path[n][<span class="number">1</span>];</span><br><span class="line">        res += dfs(land, landSize, landColSize, dx, dy);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *p1, <span class="keyword">const</span> <span class="keyword">void</span> *p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (*(<span class="keyword">int</span>*)p1 - *(<span class="keyword">int</span>*)p2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">pondSizes</span><span class="params">(<span class="keyword">int</span>** land, <span class="keyword">int</span> landSize, <span class="keyword">int</span>* landColSize, <span class="keyword">int</span>* returnSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *pool = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * MAXSIZE * MAXSIZE);</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">size</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; landSize; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; landColSize[i]; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (land[i][j] != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">size</span> = dfs(land, landSize, landColSize, i, j);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">size</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                pool[cnt] = <span class="built_in">size</span>;</span><br><span class="line">		        cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    qsort(pool, cnt, <span class="keyword">sizeof</span>(<span class="keyword">int</span>), compare);</span><br><span class="line">    *returnSize = cnt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pool;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="耗时最短的解法"><a href="#耗时最短的解法" class="headerlink" title="耗时最短的解法"></a>耗时最短的解法</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_NUM 10000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_X 1001</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_Y 1001</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_RST_NUM 50000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125; Info;</span><br><span class="line"></span><br><span class="line">Info g_queue[MAX_NUM];</span><br><span class="line"><span class="keyword">int</span> g_head;</span><br><span class="line"><span class="keyword">int</span> g_tail;</span><br><span class="line"><span class="keyword">int</span> g_rst[MAX_RST_NUM];</span><br><span class="line"><span class="keyword">int</span> g_rstNum;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    g_head = <span class="number">0</span>;</span><br><span class="line">    g_tail = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(g_rst, <span class="number">0</span>, <span class="keyword">sizeof</span>(g_rst));</span><br><span class="line">    g_rstNum = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ReInit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    g_head = <span class="number">0</span>;</span><br><span class="line">    g_tail = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PARA_VALID(value, min, max) ((value &gt;= min) &amp;&amp; (value &lt; max))</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(<span class="keyword">int</span>** land, <span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> iMax, <span class="keyword">int</span> jMax)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!PARA_VALID(i, <span class="number">0</span>, iMax)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!PARA_VALID(j, <span class="number">0</span>, jMax)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (land[i][j] != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    g_queue[g_tail].x = i;</span><br><span class="line">    g_queue[g_tail].y = j;</span><br><span class="line">    g_tail++;</span><br><span class="line">    land[i][j] = <span class="number">1</span>;</span><br><span class="line">    g_rst[g_rstNum]++;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Pop</span><span class="params">(<span class="keyword">int</span> *i, <span class="keyword">int</span> *j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (g_head == g_tail) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    *i = g_queue[g_head].x;</span><br><span class="line">    *j = g_queue[g_head].y;</span><br><span class="line">    g_head++;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CalcRst</span><span class="params">(<span class="keyword">int</span>** land, <span class="keyword">int</span> iStart, <span class="keyword">int</span> jStart, <span class="keyword">int</span> iMax, <span class="keyword">int</span> jMax)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line">    Push(land, iStart, jStart, iMax, jMax);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (Pop(&amp;i, &amp;j) != <span class="number">-1</span>) &#123;</span><br><span class="line">        Push(land, i - <span class="number">1</span>, j - <span class="number">1</span>, iMax, jMax);</span><br><span class="line">        Push(land, i - <span class="number">1</span>, j, iMax, jMax);</span><br><span class="line">        Push(land, i - <span class="number">1</span>, j + <span class="number">1</span>, iMax, jMax);</span><br><span class="line">        Push(land, i + <span class="number">1</span>, j - <span class="number">1</span>, iMax, jMax);</span><br><span class="line">        Push(land, i + <span class="number">1</span>, j, iMax, jMax);</span><br><span class="line">        Push(land, i + <span class="number">1</span>, j + <span class="number">1</span>, iMax, jMax);</span><br><span class="line">        Push(land, i, j - <span class="number">1</span>, iMax, jMax);        </span><br><span class="line">        Push(land, i, j + <span class="number">1</span>, iMax, jMax);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    g_rstNum++;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmpare</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *x, <span class="keyword">const</span> <span class="keyword">void</span> *y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ((*(<span class="keyword">int</span>*)x) - (*(<span class="keyword">int</span>*)y));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">pondSizes</span><span class="params">(<span class="keyword">int</span>** land, <span class="keyword">int</span> landSize, <span class="keyword">int</span>* landColSize, <span class="keyword">int</span>* returnSize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line">    Init();</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; landSize; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; landColSize[<span class="number">0</span>]; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (land[i][j] != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            ReInit();</span><br><span class="line">            CalcRst(land, i, j, landSize, landColSize[<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    qsort(g_rst, g_rstNum, <span class="keyword">sizeof</span>(<span class="keyword">int</span>), cmpare);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> *rst;</span><br><span class="line"></span><br><span class="line">    rst = <span class="built_in">malloc</span>(g_rstNum * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="built_in">memcpy</span>(rst, g_rst, g_rstNum * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    *returnSize = g_rstNum;</span><br><span class="line">    <span class="keyword">return</span> rst;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><table>
<thead>
<tr>
<th>方法</th>
<th align="left">运行时间</th>
<th align="left">内存消耗</th>
<th>语言</th>
</tr>
</thead>
<tbody><tr>
<td>思路一</td>
<td align="left">252 ms</td>
<td align="left">20.8 MB</td>
<td>C</td>
</tr>
<tr>
<td>耗时最短</td>
<td align="left">200ms</td>
<td align="left"></td>
<td>C</td>
</tr>
</tbody></table>
<p><strong>朝8个方向探索, 访问过的进行标记</strong></p>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>编码</tag>
        <tag>树</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 不相交的线</title>
    <url>/posts/1089410580.html</url>
    <content><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>来源: <a href="https://leetcode-cn.com/problems/uncrossed-lines/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/uncrossed-lines/</a><br>我们在两条独立的水平线上按给定的顺序写下 <code>A</code> 和 <code>B</code> 中的整数。</p>
<p>现在，我们可以绘制一些连接两个数字 <code>A[i]</code> 和 <code>B[j]</code> 的直线，只要 <code>A[i] == B[j]</code>，且我们绘制的直线不与任何其他连线（非水平线）相交。</p>
<p>以这种方法绘制线条，并返回我们可以绘制的最大连线数。</p>
<p><strong>示例 1：</strong></p>
<p><strong><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/04/28/142.png" alt="img" style="zoom: 25%;" /></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">输入：A &#x3D; [1,4,2], B &#x3D; [1,2,4]</span><br><span class="line">输出：2</span><br><span class="line">解释：</span><br><span class="line">我们可以画出两条不交叉的线，如上图所示。</span><br><span class="line">我们无法画出第三条不相交的直线，因为从 A[1]&#x3D;4 到 B[2]&#x3D;4 的直线将与从 A[2]&#x3D;2 到 B[1]&#x3D;2 的直线相交。</span><br></pre></td></tr></table></figure>

<p><strong>示例 2：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">输入：A &#x3D; [2,5,1,2,5], B &#x3D; [10,5,2,1,5,2]</span><br><span class="line">输出：3</span><br></pre></td></tr></table></figure>

<p><strong>示例 3：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">输入：A &#x3D; [1,3,7,1,7,5], B &#x3D; [1,9,2,5,1]</span><br><span class="line">输出：2</span><br></pre></td></tr></table></figure>



<p><strong>提示：</strong></p>
<ol>
<li><code>1 &lt;= A.length &lt;= 500</code></li>
<li><code>1 &lt;= B.length &lt;= 500</code></li>
<li><code>1 &lt;= A[i], B[i] &lt;= 2000</code></li>
</ol>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX(a,b) ((a)&gt;(b)?(a):(b))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxUncrossedLines</span><span class="params">(<span class="keyword">int</span>* A, <span class="keyword">int</span> ASize, <span class="keyword">int</span>* B, <span class="keyword">int</span> BSize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">int</span> **dp = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((A == <span class="literal">NULL</span>) || (B == <span class="literal">NULL</span>) || (ASize &lt; <span class="number">1</span>) ||(ASize &gt; <span class="number">500</span>) || (BSize &lt; <span class="number">1</span>) || (BSize &gt; <span class="number">500</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dp = (<span class="keyword">int</span> **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>*) * (ASize+<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; ASize + <span class="number">1</span>; i++) &#123;</span><br><span class="line">        dp[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (BSize+<span class="number">1</span>));</span><br><span class="line">        <span class="built_in">memset</span>(dp[i], <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (BSize+<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; ASize + <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; BSize + <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (A[i<span class="number">-1</span>] == B[j - <span class="number">1</span>]) &#123;</span><br><span class="line">                dp[i][j] = dp[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[i][j] = MAX(dp[i<span class="number">-1</span>][j], dp[i][j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; ASize+<span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">free</span>(dp[i]);</span><br><span class="line">        dp[i] = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(dp);</span><br><span class="line">    dp = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[i][j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="耗时最短的思路"><a href="#耗时最短的思路" class="headerlink" title="耗时最短的思路"></a>耗时最短的思路</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 本质上就是求最长公共子序列 动态规划</span></span><br><span class="line"><span class="comment"> * dp[i][j]表示A的前i个数到B的前j个数的最大连线数，最后要求的是dp[ASize][BSize]</span></span><br><span class="line"><span class="comment"> * dp[0][j]与dp[i][0]则分别表示空集与另一个数集的最大连线数，应都赋0</span></span><br><span class="line"><span class="comment"> * 状态转移方程为 A[i] == B[j]时 dp[i + 1][j + 1] = dp[i][j] + 1</span></span><br><span class="line"><span class="comment"> * 不相等时dp[i + 1][j + 1] = max(dp[i][j + 1], dp[i + 1][j])</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxUncrossedLines</span><span class="params">(<span class="keyword">int</span>* A, <span class="keyword">int</span> ASize, <span class="keyword">int</span>* B, <span class="keyword">int</span> BSize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> **dp = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>*) * (ASize + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; ASize + <span class="number">1</span>; i++)</span><br><span class="line">        dp[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (BSize + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; ASize + <span class="number">1</span>; i++)</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt; BSize + <span class="number">1</span>; j++)</span><br><span class="line">        dp[<span class="number">0</span>][j] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; ASize; i++)</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; BSize; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(A[i] == B[j])</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = dp[i][j] + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = <span class="built_in">max</span>(dp[i][j + <span class="number">1</span>], dp[i + <span class="number">1</span>][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[ASize][BSize];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><table>
<thead>
<tr>
<th align="left">提交结果</th>
<th align="left">运行时间</th>
<th align="left">内存消耗</th>
<th align="left">语言</th>
</tr>
</thead>
<tbody><tr>
<td align="left">通过</td>
<td align="left">8 ms</td>
<td align="left">8.6 MB</td>
<td align="left">C</td>
</tr>
</tbody></table>
<p>思路总结</p>
<ul>
<li>设函数 <code>f(x,y)</code> 标识 <code>A</code> 的前 <code>x</code>个数字和 <code>B</code> 的前 <code>y</code>个数字，能绘制出的<strong>最大连接数</strong>。假设 <code>A、B</code> 都是从下标1开始。</li>
<li><code>f(0,0) = 0, f(0,y) = 0, f(x,0) = 0</code></li>
<li>线不想交<strong>, 顺序相对一致</strong><ul>
<li>两条不想交的线, $A[x_1], B[y_1]$ 和 $A[x_2], B[y_2]$</li>
<li>$x_1 &lt; x_2 且 y_1 &lt; y_2$ 或 $x_1 &gt; x_2 且 y_1 &gt; y_2$</li>
</ul>
</li>
<li><code>A[x], B[y]</code>, 状态转移方程<ul>
<li><code>A[x] == B[y]</code>,  <code>f(x, y) = f(x-1, y-1)+1</code>, 相等, 新增加一条, 最大连接数+1</li>
<li><code>A[x]!= B[y]</code>,  <code>max(f(x-1,y), f(x,y-1))</code>,  <ul>
<li><code>A[x], B[y]</code>不等, 必然不可能都参与连线, 若都与其他点相连, 一定会出现直线相交(与<code>A(x)相交的点必然小于B(y), 与B(y)相交的点必然小于A(x)</code>)</li>
</ul>
</li>
</ul>
</li>
<li><code>dp</code> 为记忆数组, 记忆之前子问题的结果</li>
</ul>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>编码</tag>
        <tag>动态规划</tag>
      </tags>
  </entry>
  <entry>
    <title>【随笔】一次排查种族敏感词的操作</title>
    <url>/posts/696153884.html</url>
    <content><![CDATA[<blockquote>
<p><strong>伴随着愈演愈烈的“Black Lives Matter”运动，Linus Torvalds 本周五批准在 Linux 内核代码和文档中启用全新的术语，以让整个生态更具包容性。</strong>而且，Torvalds 还呼吁 Linux 开发者尽量使用新术语来替代“master/slave”、“blacklist/whitelist”。</p>
</blockquote>
<p>基于近期的运动, 公司也要求在代码, 资料, ui上排查<strong>种族敏感词汇</strong>, 包括 master, slave, blacklist, whitelist</p>
<p>排查代码中的敏感词汇, <code>grep</code> 命令即可搞定, 然后需要输出文档, 用以做评估工作量的参考</p>
<p><img src="https://cdn.jsdelivr.net/gh/Hosted-code/CloudImg@master/20200719123206.png" alt="grep"></p>
<a id="more"></a>

<h1 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -inR --exclude-dir=.git whitelist</span><br></pre></td></tr></table></figure>

<p><strong>grep option</strong>, 非所有选项, 仅列出常用的, 完整查看<code>man grep</code></p>
<ul>
<li>匹配模式<ul>
<li>``-E<code>, extend regexp, 扩展正则,</code>egrep<code>, （支持</code>?<code>、</code>+<code>、</code>{}<code>、</code>()<code>、</code>|`）</li>
<li><code>-i</code>, ignore case, 忽略大小写</li>
<li><code>-w</code>, word,  匹配整个单词</li>
<li><code>-l</code>, line, 匹配整行</li>
<li><code>-v</code>, invert match,  匹配反选, 显示不匹配的行</li>
<li><code>-q</code>, quiet, 不输出, <strong>一般用于条件测试</strong>, 成功为 0, 失败为非 0</li>
</ul>
</li>
<li>grep范围<ul>
<li>action, 动作<ul>
<li><code>read</code>, 默认action, 读取</li>
<li><code>skip</code>,  跳过, 忽略</li>
<li><code>recurse</code>, 递归,  等同于 <code>-r</code></li>
<li><code>-D action</code>, 针对device 采取action</li>
<li><code>-d device</code>, 针对 directory 采取action</li>
</ul>
</li>
<li>指定查找范围, <strong>通配符</strong><ul>
<li><code>--include</code>, 只在指定范围内搜索,  <code>grep &quot;whitelist&quot; . -r --include *.{h,c}</code></li>
<li><code>--exclude</code>, 搜索时排除文件</li>
<li><code>--exclude-from</code>,  根据指定文件内容排除对应文件, <code>grep &quot;whitelist&quot; . -r --exclude-from filelist</code></li>
<li><code>--exclude-dir</code>, 搜索时排除指定目录, <code>-d skip</code> 是遇到任何目录都会跳过, <code>--exclude-dir</code> 只会跳过特定目录. 实测 <code>--exclude</code> 并不能排除目录</li>
<li><code>-r</code>, recurse, 递归查找, 当前目录文件及子目录下的文件均要查找, </li>
<li><code>-R</code>, 等同于 <code>-r</code>, 区别是, <strong><code>-R</code>会追踪符号链接</strong></li>
</ul>
</li>
</ul>
</li>
<li>输出控制<ul>
<li><code>-c</code>, count, 不显示具体匹配, 只显示每个文件匹配数, 配合<code>-v</code>, 则为不匹配数</li>
<li><code>--color=auto</code>,  颜色控制</li>
<li><code>-L</code>/<code>-l</code>,  匹配多个文件时, 显示 <strong>不匹配/匹配</strong> 的文件名</li>
<li><code>-m</code>, max count, 控制匹配的最大数</li>
<li><code>-n</code>, line number, 输出匹配行数</li>
<li>上下文控制, 匹配行附近的内容<ul>
<li><code>-A num</code>,  after context, 显示匹配行之后 num 行</li>
<li><code>-B num</code>, before context , 显示匹配行之前 num 行</li>
<li><code>-C num</code>,  context, 显示匹配行前后 num 行, 直接 <code>-num</code> 也是一样的效果</li>
</ul>
</li>
</ul>
</li>
<li><code>-a, --text</code>,  以文本方式搜索<ul>
<li>搜索.c, .h文件是出现 <strong>binary file match</strong></li>
<li>原因是文件内容中出现 <code>\000</code> 时, <code>grep</code> 会将该文件认作二进制文件</li>
<li>使用 <code>-a</code>, 将<strong>误认为的二进制文件</strong>以文本文件搜索</li>
<li><strong>不能滥用</strong>, 若将真正的二进制文件以文本方式搜索, 会导致整个<strong>终端乱码</strong>, 只有断开重连才会恢复</li>
</ul>
</li>
</ul>
<h1 id="输出文档"><a href="#输出文档" class="headerlink" title="输出文档"></a>输出文档</h1><ul>
<li>将 <code>grep</code> 查找结果输出到excel中, 使用数据透视表统计<ul>
<li><code>grep -c</code> 可做统计, 但没有查找结果</li>
</ul>
</li>
<li><strong>数据分列,</strong> 将数据分成多列, <strong>文件, 行数, 代码</strong></li>
<li><strong>提取关键词</strong>, <code>grep</code> 搜索是多个条件是多个条件同时搜索的, 无法根据敏感词分别做统计, 需要在搜索结果中<strong>提取关键词</strong><ul>
<li>新建一列, 为<strong>关键词</strong>列</li>
<li>在某处列出关键词, 如 <code>H3:H6</code></li>
<li>输入公式, <code>=lookup(,-search($H$3:$H$6, $D2), $H$3:$H$6)</code><ul>
<li>假定搜索结果在D列</li>
<li><code>search</code> 忽略大小写查找</li>
<li><code>=lookup(lookup_value, lookup_vector, result_vector)</code></li>
</ul>
</li>
</ul>
</li>
<li><strong>数据透视表</strong>, 关键词, 文件拖到<strong>行</strong>, 代码拖到<strong>值</strong>, 值为计数项</li>
</ul>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="https://www.sohu.com/a/407125383_99956743" target="_blank" rel="noopener">Linus Torvalds批准启用新术语替代master/slave、blacklist/whitelist </a></p>
<p><a href="https://man.linuxde.net/grep" target="_blank" rel="noopener">grep命令_Linux grep 命令用法详解：强大的文本搜索工具</a></p>
<p><a href="http://linux.51yip.com/search/grep" target="_blank" rel="noopener">grep linux 命令 在线中文手册</a></p>
]]></content>
      <categories>
        <category>随笔</category>
      </categories>
      <tags>
        <tag>随笔</tag>
        <tag>办公软件</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>定义未使用的变量</title>
    <url>/posts/2914184278.html</url>
    <content><![CDATA[<p>同事在搞特性开发时引入一个问题,  报错是存在未使用的定义变量, 其本质是宏开关控制条件不一致, 导致某一产品不支持该特性, 但执行了变量的定义, 赋值, 和 <code>log</code> 输出, 作为参数使用的代码被正确的宏控制着未执行</p>
<p>按正常来说log输出一般也就是 <code>printf</code> 的封装, 但 log 本身也是使用宏控制着的, 一般正式产品不启用这种 log 的宏, 这种场景下, log 输出没有使用变量, 赋值不算使用变量, 因此出现了这种报错, 下面是小例子</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">	<span class="meta">#<span class="meta-keyword">define</span> LOG(arg) printf(<span class="meta-string">"i = %d\n"</span>, arg)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">	<span class="meta">#<span class="meta-keyword">define</span> LOG(arg)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">    </span><br><span class="line">    i = <span class="number">30</span>;</span><br><span class="line">    LOG(i);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hosted@Desktop:~/train$ gcc 01.c -Werror=unused-but-set-variable -o 01</span><br><span class="line">01.c: In <span class="keyword">function</span> ‘main’:</span><br><span class="line">01.c:10:6: error: variable ‘i’ <span class="built_in">set</span> but not used [-Werror=unused-but-set-variable]</span><br><span class="line">  int i;</span><br><span class="line">      ^</span><br><span class="line">cc1: some warnings being treated as errors</span><br><span class="line">hosted@Desktop:~/train$ gcc 01.c -Werror=unused-but-set-variable -DDEBUG -o 01</span><br><span class="line">hosted@Desktop:~/train$ ./01</span><br><span class="line">i = 30</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>编码</category>
      </categories>
      <tags>
        <tag>编码</tag>
        <tag>Linux</tag>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - N X N 井字游戏</title>
    <url>/posts/2190736694.html</url>
    <content><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>来源：<a href="https://leetcode-cn.com/problems/valid-tic-tac-toe-state" target="_blank" rel="noopener">https://leetcode-cn.com/problems/valid-tic-tac-toe-state</a></p>
<p>用字符串数组作为井字游戏的游戏板 board。当且仅当在井字游戏过程中，玩家有可能将字符放置成游戏板所显示的状态时，才返回 true。</p>
<p>该游戏板是一个 3 x 3 数组，由字符 “ “，”X” 和 “O” 组成。字符 “ “ 代表一个空位。</p>
<p>以下是井字游戏的规则：</p>
<p>玩家轮流将字符放入空位（” “）中。<br>第一个玩家总是放字符 “X”，且第二个玩家总是放字符 “O”。<br>“X” 和 “O” 只允许放置在空位中，不允许对已放有字符的位置进行填充。<br>当有 3 个相同（且非空）的字符填充任何行、列或对角线时，游戏结束。<br>当所有位置非空时，也算为游戏结束。</p>
<p>如果游戏结束，玩家不允许再放置字符。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">示例 1:</span><br><span class="line">输入: board &#x3D; [&quot;O  &quot;, &quot;   &quot;, &quot;   &quot;]</span><br><span class="line">输出: false</span><br><span class="line">解释: 第一个玩家总是放置“X”。</span><br><span class="line"></span><br><span class="line">示例 2:</span><br><span class="line">输入: board &#x3D; [&quot;XOX&quot;, &quot; X &quot;, &quot;   &quot;]</span><br><span class="line">输出: false</span><br><span class="line">解释: 玩家应该是轮流放置的。</span><br><span class="line"></span><br><span class="line">示例 3:</span><br><span class="line">输入: board &#x3D; [&quot;XXX&quot;, &quot;   &quot;, &quot;OOO&quot;]</span><br><span class="line">输出: false</span><br><span class="line"></span><br><span class="line">示例 4:</span><br><span class="line">输入: board &#x3D; [&quot;XOX&quot;, &quot;O O&quot;, &quot;XOX&quot;]</span><br><span class="line">输出: true</span><br></pre></td></tr></table></figure>

<p>说明:</p>
<ul>
<li>游戏板 board 是长度为 3 的字符串数组，其中每个字符串 board[i] 的长度为 3。</li>
<li><code>board[i][j]</code>是集合<code>{&quot; &quot;, &quot;X&quot;, &quot;O&quot;}</code>中的一个字符。 </li>
</ul>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//判断谁赢了</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">Check</span><span class="params">(<span class="keyword">char</span> **board, <span class="keyword">int</span> <span class="built_in">size</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">int</span> value, rearValue;</span><br><span class="line">    <span class="comment">//行列</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="built_in">size</span>; i++) &#123;</span><br><span class="line">        value = <span class="number">0</span>;</span><br><span class="line">        rearValue = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="built_in">size</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (board[i][j] == <span class="string">'X'</span>) &#123;</span><br><span class="line">                value++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (board[i][j] == <span class="string">'O'</span>) &#123;</span><br><span class="line">                value--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (board[j][i] == <span class="string">'X'</span>) &#123;</span><br><span class="line">                rearValue++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (board[j][i] == <span class="string">'O'</span>) &#123;</span><br><span class="line">                rearValue--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((value == <span class="built_in">size</span>) || (rearValue == <span class="built_in">size</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'X'</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((value == (<span class="number">0</span>-<span class="built_in">size</span>)) || (rearValue == (<span class="number">0</span>-<span class="built_in">size</span>))) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'O'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//斜对角线</span></span><br><span class="line">    value = <span class="number">0</span>;</span><br><span class="line">    rearValue = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="built_in">size</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (board[i][i] == <span class="string">'X'</span>) &#123;</span><br><span class="line">            value++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(board[i][i] == <span class="string">'O'</span>) &#123;</span><br><span class="line">            value--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (board[i][<span class="built_in">size</span>-i<span class="number">-1</span>] == <span class="string">'X'</span>) &#123;</span><br><span class="line">            rearValue++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (board[i][<span class="built_in">size</span>-i<span class="number">-1</span>] == <span class="string">'O'</span>) &#123;</span><br><span class="line">            rearValue--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((value == <span class="built_in">size</span>) || (rearValue == <span class="built_in">size</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'X'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((value == (<span class="number">0</span>-<span class="built_in">size</span>)) || (rearValue == (<span class="number">0</span>-<span class="built_in">size</span>))) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'O'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'C'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">validTicTacToe</span><span class="params">(<span class="keyword">char</span> ** board, <span class="keyword">int</span> boardSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> countX = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> countO = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ((board == <span class="literal">NULL</span>) || (boardSize &lt;= <span class="number">0</span>)) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; boardSize; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; boardSize; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (board[i][j] == <span class="string">'X'</span>) &#123;</span><br><span class="line">                countX++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (board[i][j] == <span class="string">'O'</span>) &#123;</span><br><span class="line">                countO++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (board[i][j] == <span class="string">' '</span>) &#123;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;			<span class="comment">//board中落下其他字符, 直接报错, 但这个也可以在外部判断</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 正常情况: countO &lt;= countX &lt;= countO+1, int =&gt; countX == countO || countX == countO + 1</span></span><br><span class="line">    <span class="keyword">if</span> ((countX != countO) &amp;&amp; (countX != countO + <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 不能有一方赢了另一方还继续下的情况, X赢, countX == countO+1; O赢, countX==countO</span></span><br><span class="line">    c = Check(board, boardSize);</span><br><span class="line">    <span class="keyword">if</span> ((c == <span class="string">'X'</span>) &amp;&amp; (countX != countO + <span class="number">1</span>)) &#123;         <span class="comment">//X赢, X落子必多一</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((c == <span class="string">'O'</span>) &amp;&amp; (countX != countO)) &#123;      <span class="comment">//O赢, XO落子数必一致</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="思路二"><a href="#思路二" class="headerlink" title="思路二"></a>思路二</h1><ul>
<li>此为该题耗时最短的推荐解法</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">is_win_x</span><span class="params">(<span class="keyword">char</span> **board, <span class="keyword">int</span> boardSize, <span class="keyword">char</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> j;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; boardSize; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; boardSize; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (board[i][j] != x) &#123;		<span class="comment">//不符合预期结果的直接结束循环</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j == boardSize) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; boardSize; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (board[j][i] != x) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j == boardSize) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; boardSize; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (board[j][j] != x) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (j == boardSize) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; boardSize; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (board[boardSize - j - <span class="number">1</span>][j] != x) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (j == boardSize) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">validTicTacToe</span><span class="params">(<span class="keyword">char</span> ** board, <span class="keyword">int</span> boardSize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x_num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> o_num = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; boardSize; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; boardSize; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (board[i][j] == <span class="string">'O'</span>)</span><br><span class="line">                o_num++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (board[i][j] == <span class="string">'X'</span>)</span><br><span class="line">                x_num++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((o_num != x_num) &amp;&amp; (x_num != (o_num + <span class="number">1</span>)))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (o_num == x_num) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_win_x(board, boardSize, <span class="string">'X'</span>) == <span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_win_x(board, boardSize, <span class="string">'O'</span>) == <span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><table>
<thead>
<tr>
<th align="left">提交时间</th>
<th align="left">提交结果</th>
<th align="left">运行时间</th>
<th align="left">内存消耗</th>
<th align="left">语言</th>
</tr>
</thead>
<tbody><tr>
<td align="left">几秒前</td>
<td align="left">通过</td>
<td align="left">0 ms</td>
<td align="left">5.2 MB</td>
<td align="left">C</td>
</tr>
</tbody></table>
<ul>
<li><p>可能出问题了吧, 0ms 跑完</p>
</li>
<li><p>两种解法思路大体一致, 执行流程不同的是<strong>胜负判断函数</strong></p>
</li>
<li><p>思路二判胜负函数中, 直接传入判断赢的对象, 在2N+2的情况里, <strong>遇到与预期不符的情况直接跳出循环, 减少不必要的循环次数, 以及后续的判断也更简洁</strong></p>
</li>
<li><p>思路没什么好说的, 主要是异常判断和胜负判断</p>
<ul>
<li><strong>异常判断</strong><ul>
<li>参数判断</li>
<li>X先行,  轮流落子, 则<code>countX=countO</code>, <code>countX = countO+1</code> 异常即为判断</li>
<li>一方赢了之后另一方禁止继续落子</li>
</ul>
</li>
<li><strong>胜负判断</strong>, 目标均为同类落子<ul>
<li>N横, <code>board[i][0], board[i][1],...,board[i][n]</code></li>
<li>N竖, <code>board[0][i], board[1][i],...,board[n][i]</code></li>
<li>对角线, <code>board[i][i]</code></li>
<li>斜对角线, <code>board[i][n-i-1]</code></li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>编码</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 生存人数</title>
    <url>/posts/3677400576.html</url>
    <content><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>来源: <a href="https://leetcode-cn.com/problems/living-people-lcci/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/living-people-lcci/</a></p>
<p>给定N个人的出生年份和死亡年份，第<code>i</code>个人的出生年份为<code>birth[i]</code>，死亡年份为<code>death[i]</code>，实现一个方法以计算生存人数最多的年份。</p>
<p>你可以假设所有人都出生于1900年至2000年（含1900和2000）之间。如果一个人在某一年的任意时期都处于生存状态，那么他们应该被纳入那一年的统计中。例如，<strong>生于1908年、死于1909年的人应当被列入1908年和1909年的计数。</strong></p>
<p>如果有多个年份生存人数相同且均为最大值，输出其中最小的年份。</p>
<p>示例：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">输入：</span><br><span class="line">birth = &#123;<span class="number">1900</span>, <span class="number">1901</span>, <span class="number">1950</span>&#125;</span><br><span class="line">death = &#123;<span class="number">1948</span>, <span class="number">1951</span>, <span class="number">2000</span>&#125;</span><br><span class="line">输出： <span class="number">1901</span></span><br></pre></td></tr></table></figure>


<p>提示：</p>
<ul>
<li><code>0 &lt; birth.length == death.length &lt;= 10000</code></li>
</ul>
<p>leetcode上的一条用例</p>
<ul>
<li><code>[1972,1908,1915,1957,1960,1948,1912,1903,1949,1977,1900,1957,1934,1929,1913,1902,1903,1901]</code></li>
<li><code>[1997,1932,1963,1997,1983,2000,1926,1962,1955,1997,1998,1989,1992,1975,1940,1903,1983,1969]</code></li>
</ul>
<h1 id="思路1"><a href="#思路1" class="headerlink" title="思路1"></a>思路1</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxAliveYear1</span><span class="params">(<span class="keyword">int</span> *birth, <span class="keyword">int</span> birthSize, <span class="keyword">int</span> *death, <span class="keyword">int</span> deathSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">int</span> j;</span><br><span class="line">    <span class="keyword">int</span> year;</span><br><span class="line">    <span class="keyword">int</span> count;      <span class="comment">//记录当年生存人数</span></span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">max</span> = <span class="number">0</span>;    <span class="comment">//记录最大生存人数</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ((birth == <span class="literal">NULL</span>) || (death == <span class="literal">NULL</span>) || (birthSize &lt; <span class="number">0</span>) || (birthSize &gt; <span class="number">10000</span>)) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"参数无效\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (birthSize != deathSize) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"出生年份人数与死亡年份人数不一致, 数据有误\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; birthSize; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (birth[i] &gt; death[i]) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"生的的比死的迟, 数据有误\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = START_YEAR; i &lt;= END_YEAR; i++) &#123;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; birthSize; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((i &gt;= birth[j]) &amp;&amp; (i &lt;= death[j])) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">max</span> &lt; count) &#123;</span><br><span class="line">            <span class="built_in">max</span> = count;</span><br><span class="line">            year = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> year;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="思路2"><a href="#思路2" class="headerlink" title="思路2"></a>思路2</h1><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxAliveYear</span><span class="params">(<span class="keyword">int</span>* birth, <span class="keyword">int</span> birthSize, <span class="keyword">int</span>* death, <span class="keyword">int</span> deathSize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> year[SIZE] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> i, birthIdx, deathIdx;</span><br><span class="line">    <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">max</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> result =<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((birth == <span class="literal">NULL</span>) || (death == <span class="literal">NULL</span>) || (birthSize &lt; <span class="number">0</span>) || (birthSize &gt; <span class="number">10000</span>)) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"参数无效\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (birthSize != deathSize) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"出生年份人数与死亡年份人数不一致, 数据有误\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; birthSize; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (birth[i] &gt; death[i]) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"生的的比死的迟, 数据有误\n"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; birthSize; i++) &#123;</span><br><span class="line">        birthIdx = birth[i] - START_YEAR;</span><br><span class="line">        deathIdx = death[i] - START_YEAR + <span class="number">1</span>;		<span class="comment">//死亡第二年</span></span><br><span class="line">        year[birthIdx]++;</span><br><span class="line">        <span class="comment">//避免数组越界, 如果death[i]为2000, 则deathIdx为101, year[101]为数组越界</span></span><br><span class="line">        <span class="keyword">if</span> (deathIdx &lt; SIZE) &#123;</span><br><span class="line">            year[deathIdx]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; SIZE; i++) &#123;</span><br><span class="line">        tmp += year[i];</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">max</span> &lt; tmp) &#123;</span><br><span class="line">            <span class="built_in">max</span> = tmp;</span><br><span class="line">            result = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result + START_YEAR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="目前耗时最短的写法"><a href="#目前耗时最短的写法" class="headerlink" title="目前耗时最短的写法"></a>目前耗时最短的写法</h1><ul>
<li>耗时为<strong>32ms</strong></li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MMAX(a, b)        ((a) &gt; (b)? (a) : (b))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MMIN(a, b)        ((a) &lt; (b)? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BASE_YEAR   1900</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_LEN     102</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//【算法思路】差分问题。注意死亡年份减人，在第二年。</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxAliveYear</span><span class="params">(<span class="keyword">int</span>* birth, <span class="keyword">int</span> birthSize, <span class="keyword">int</span>* death, <span class="keyword">int</span> deathSize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *years = (<span class="keyword">int</span> *)<span class="built_in">calloc</span>(MAX_LEN, <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; birthSize; i++) &#123;</span><br><span class="line">        years[birth[i] - BASE_YEAR]++;</span><br><span class="line">        years[death[i] - BASE_YEAR + <span class="number">1</span>]--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">max</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> max_year;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_LEN; i++) &#123;</span><br><span class="line">        sum += years[i];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(sum &gt; <span class="built_in">max</span>) &#123;</span><br><span class="line">            <span class="built_in">max</span> = sum;</span><br><span class="line">            max_year  = i + BASE_YEAR;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> max_year;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="前缀和-差分-二维前缀和"><a href="#前缀和-差分-二维前缀和" class="headerlink" title="前缀和, 差分, 二维前缀和"></a>前缀和, 差分, 二维前缀和</h1><p>前缀和是一种重要的<strong>预处理</strong>，能大大降低查询的时间复杂度(以<strong>空间换时间</strong>)。我们可以简单理解为“数列的前 n 项的和”。</p>
<p>简单的说, <strong>前缀和: 数组B中每一项<code>B[i]</code> 保存 A 中 <code>[0…i]</code> 的和；</strong></p>
<p>类似的概念还有</p>
<ul>
<li><strong>后缀和: 数组B中每一项<code>B[i]</code> 保存 A 中 <code>[i…n-1]</code> 的和；</strong></li>
<li><strong>前缀积: 数组B中每一项<code>B[i]</code> 保存 A 中 <code>[0…i]</code> 的和；</strong></li>
<li><strong>后缀积: 数组B中每一项<code>B[i]</code> 保存 A 中 <code>[i…n-1]</code> 的和；</strong></li>
<li><strong>差分: $d(n) = a[n] - a[n-1]$, 可存储每一步的操作</strong></li>
</ul>
<p><strong>差分 + 前缀和</strong>, 可直接查询每一个节点的状态</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">提交结果</th>
<th align="left">运行时间</th>
<th align="left">内存消耗</th>
<th align="left">语言</th>
</tr>
</thead>
<tbody><tr>
<td align="left">思路一</td>
<td align="left">通过</td>
<td align="left">104 ms</td>
<td align="left">7 MB</td>
<td align="left">C</td>
</tr>
<tr>
<td align="left">13 分钟前</td>
<td align="left">通过</td>
<td align="left">48 ms</td>
<td align="left">6.8 MB</td>
<td align="left">C</td>
</tr>
</tbody></table>
<ul>
<li>根据上述 leetcode 的结果来看, 思路二明显优于思路一</li>
<li>思路一便是无脑双重循环, 代码复杂度为$O(n^2)$</li>
<li>思路二采用的是 <strong>差分+前缀和</strong> 的方法</li>
<li>最少耗时代码的思路同样是这种思路,  耗时为 <strong>32ms</strong></li>
<li>两种方法产生耗时差可能的原因是, 思路二中, 为避免出现2000年死亡这种边界条件导致数组越界, <strong>每次都要进行一次判断</strong>,  <strong>最少耗时思路则记录了2001年的数据, 确保不会数组越界, 少了每一次的判断耗时</strong></li>
</ul>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://oi-wiki.org/basic/prefix-sum/" target="_blank" rel="noopener">前缀和 &amp; 差分</a></p>
<p><a href="https://www.jianshu.com/p/fc2c30576e92" target="_blank" rel="noopener">前缀和+差分</a></p>
<p><a href="https://blog.csdn.net/k_r_forever/article/details/81775899" target="_blank" rel="noopener">前缀和、二维前缀和与差分的小总结</a></p>
<p><a href="https://segmentfault.com/a/1190000022853798" target="_blank" rel="noopener">实用算法解析 - 前缀和</a></p>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>编码</tag>
        <tag>前缀和</tag>
      </tags>
  </entry>
  <entry>
    <title>Regexp 使用</title>
    <url>/posts/4059706354.html</url>
    <content><![CDATA[<h1 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h1><p>正则, <strong>文本匹配</strong>的工具, 能更精确的描述需求</p>
<p><a href="https://regexr.com/" target="_blank" rel="noopener">正则表达式在线验证工具</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/Hosted-code/CloudImg@master/20200706221746.png" alt="Regexp"></p>
<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p> 早之前为了避免将 <code>==</code> 误写为 <code>=</code> , 人们一般习惯将常量放在左侧,  如 <code>5 == flag</code>, 这样当误写为<code>5 = flag</code>, 编译器就会报错, 这种也被视作是好的书写习惯</p>
<p>但如今, 这种错误可以通过<strong>静态检查工具</strong>检视出来, 以及通过设置<strong>编译选项</strong>来使得在编译过程中就可防范该类错误, 因此无需牺牲可读性, 而使用这种 “优秀的书写习惯”. </p>
<blockquote>
<p>通过设置<code>-Wall -Werror</code>, 启用所有警告, 并在将warning视为 error, 如此便能发现 <strong>条件判断中的赋值语句</strong></p>
<p><strong>让工具去解决笔误问题, 代码要符合可读性第一</strong></p>
</blockquote>
<p>公司要求整改代码时, 便遇到了大量常量位于运算符左侧的代码, 这种写法不符合公司编码规范, 因此借用<strong>正则表达式</strong>来实现快速替换</p>
<p>使用该正则, 可批量替换代码中运算符右侧<strong>非函数的情况</strong></p>
<p><code>([A-Z0-9_]+) (==|!=)([-&gt;\.\[\]\w]+)(?!\()</code> =&gt; <code>$3 $2 $1</code></p>
<p>涉及函数的情况, 贪婪非贪婪均无法精确匹配到对应层次的括号,  <strong>平衡组可实现</strong>, 但无论使用的编辑器vim还是vscode均不支持该种特性,  python支持该特性, 但为免引入问题, 涉及函数的手动变更</p>
<p>正则在做提取和替换方面还是很高效的, 因此做如下总结, 常用元字符之类的, 就仅在上文思维导图中体现</p>
<h1 id="位置匹配-断言"><a href="#位置匹配-断言" class="headerlink" title="位置匹配 - 断言"></a>位置匹配 - 断言</h1><p><strong>六个概念</strong></p>
<ul>
<li><strong>零宽</strong>: 只<strong>匹配位置</strong>，在匹配过程中，<strong>不占用字符</strong></li>
<li><strong>正向</strong>：匹配括号中的表达式,  <code>=</code></li>
<li><strong>负向</strong>: 不匹配括号中表达式,  <code>!</code></li>
<li>正则引擎<strong>从左到右</strong>扫描字符<ul>
<li><strong>先行</strong>, 匹配未扫描到的字符, 先于扫描指针, </li>
<li><strong>后行</strong>, 匹配已扫描到的字符, 后于扫描指针.  <code>&lt;</code>,  表明返回匹配已扫描的字符</li>
</ul>
</li>
<li><strong>断言</strong>: 断言为真时继续进行匹配。<code>?</code></li>
</ul>
<p><strong>零宽正向先行断言,</strong> <code>(?=pattern)</code>, <strong>某位置后面紧接着的字符序列要匹配 pattern</strong></p>
<p><strong>零宽负向先行断言,</strong> <code>(?!pattern)</code>,  <strong>某位置后面紧接着的字符序列不能匹配 pattern</strong></p>
<p><strong>零宽正向后行断言,</strong> <code>(?&lt;=pattern)</code>, <strong>某位置前面紧接着的字符序列要匹配 pattern</strong></p>
<p><strong>零宽负向后行断言,</strong> <code>(?&lt;!pattern)</code>, <strong>某位置前面紧接着的字符序列不能匹配 pattern</strong></p>
<h1 id="平衡组"><a href="#平衡组" class="headerlink" title="平衡组"></a>平衡组</h1><p>平衡组，故名思义，平衡即对称，<strong>主要是结合几种正则语法规则，提供对配对出现的嵌套结构的匹配。</strong></p>
<p>四种语法结果</p>
<ul>
<li>维护命名栈<ul>
<li><code>(?&lt;group&gt;)</code>, 命名组, 压栈</li>
<li><code>(?&lt;-group&gt;)</code>, 命名组, 出栈, <code>-</code></li>
</ul>
</li>
<li><code>(?!)</code>, 零宽负向先行断言, pattern为<code>&quot;&quot;</code>, 匹配总是失败</li>
<li><code>(?(group)yes|no)</code>, 判断堆栈, 不为空匹配yes, 为空匹配no<ul>
<li><code>(?(group)(?!))</code>, 堆栈不为空, 则匹配失败</li>
</ul>
</li>
</ul>
<p>该段正则可匹配成对括号匹配, <code>\(((?&lt;mm&gt;\()|(?&lt;-mm&gt;\))|[^()]+)*(?(mm)(?!))\)</code></p>
<p>下图则为对正则表达式的解析</p>
<p><img src="https://cdn.jsdelivr.net/gh/Hosted-code/CloudImg@master/20200706222709.png" alt="平衡组"></p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="https://ihateregex.io/cheatsheet" target="_blank" rel="noopener">Regex/CheatSheet</a></p>
<p><a href="https://deerchao.cn/tutorials/regex/regex.htm" target="_blank" rel="noopener">正则表达式30分钟入门教程</a></p>
<p><a href="https://blog.csdn.net/zm2714/article/details/7946437" target="_blank" rel="noopener">正则表达式——详细讲解平衡组</a></p>
<p><a href="https://juejin.im/post/5b583fede51d4516e91f9e2f" target="_blank" rel="noopener">关于正则位置匹配（断言）的技巧</a></p>
]]></content>
      <categories>
        <category>Tool</category>
        <category>CheatSheet</category>
      </categories>
      <tags>
        <tag>Tool</tag>
        <tag>CheatSheet</tag>
      </tags>
  </entry>
  <entry>
    <title>Vim 使用</title>
    <url>/posts/1645038700.html</url>
    <content><![CDATA[<p>本文均不涉及插件, 常用操作一图总结<br><img src="https://cdn.jsdelivr.net/gh/Hosted-code/CloudImg@master/Vim使用.jpg" alt="Vim使用" style="zoom: 80%;" /></p>
<p>四种模式</p>
<ul>
<li><strong>Normal</strong>, 默认模式, 文本<strong>操作</strong></li>
<li><strong>Insert</strong>, 正常编辑模式</li>
<li><strong>Visual</strong>, 用于文本<strong>选定</strong></li>
<li><strong>Command</strong>, 文本<strong>编辑命令</strong></li>
</ul>
<p>vim按键的意义在于, 双手无需离开主键盘区域就可以进行绝大多数操作</p>
<a id="more"></a>

<h1 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h1><table>
<thead>
<tr>
<th>按键</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td><code>h,j,k,l</code><br><code>gj, gk</code></td>
<td><code>gj, gk</code>等同于<code>j,k</code>,不同的是前者将一行换行之后认作多行,后者仍认作一行</td>
</tr>
<tr>
<td><code>gg</code>, <code>G</code></td>
<td>首行,末行</td>
</tr>
<tr>
<td><code>w/W</code>, <code>e/E</code>, <code>b/B</code>, <code>ge/gE</code></td>
<td>移动单元是<strong>单词</strong><br><strong>大写</strong>按键为忽略<strong>标点</strong><br><code>w</code>, word; <code>e</code>, end; <code>b</code>, back<br><code>w</code>,<code>e</code>均为向后, <code>w</code>为单词首, <code>e</code>尾单词尾<br><code>b</code>,<code>ge</code>均为向前, <code>b</code>为单词首, <code>ge</code>为单词尾</td>
</tr>
<tr>
<td><code>0</code>,<code>^</code>, <code>$</code><br><code>g0, g_, g$</code><br><code>gm</code></td>
<td><code>0</code>,<code>^</code>均为行首, <code>0</code>为第一列, <code>^</code>为第一个非空字符处;<code>$</code>为行末<br><code>g0,g_,g$</code>等同于<code>0,^,$</code>, 不同的是前者将一行自动换行后认作多行, 后者认作一行<br><code>gm</code>为一行中间</td>
</tr>
<tr>
<td><code>%</code></td>
<td>匹配符号之间跳转<code>()</code>,<code>{}</code>,<code>[]</code>,<code>/* */</code>, <code>#if, #ifdef, #else, #elif, #endif</code><br>具体可参见vim帮助, <code>:help %</code><br>即便不在匹配符号上, 按键后自动寻找到附近可匹配的符号</td>
</tr>
<tr>
<td><code>(/)</code>,<code>{/}</code>, <code>[[/[]</code>,<code>][,]]</code></td>
<td><code>(/)</code>, 句首句尾;<code>{/}</code>, 段首段尾<br>句子以.<strong>.,!,?</strong>结尾并紧随换行,空格,制表符, 以此为边界; 段落以空行为边界<br>中括号类按键以<code>{</code>大括号为移动边界, 第一次的中括号决定向前向后移动, 第一次的中括号决定移动到左大括号还是右大括号</td>
</tr>
<tr>
<td><code>H, M, L</code><br><code>C-f, C-b, C-u, C-d</code></td>
<td>H: 屏幕第一行; M: 屏幕中间; L: 屏幕最后一行<br><code>C-f</code>, 下翻一屏; <code>C-b</code>, 上翻一屏; <code>C-u</code>, 上翻半屏, <code>C-d</code>, 下翻半屏</td>
</tr>
<tr>
<td><code>f/F{char}</code><br><code>t/T{char}</code></td>
<td><code>f{char}</code>, 向后移动到第一个char的位置, <code>F{char}</code>为反方向操作<br><code>t{char}</code>类似于<code>f{char}</code>后在光标前移,  <code>T{char}</code>为反方向操作<br><code>f</code>为目标位置, <code>t</code>为目标之前, <code>;</code>, 为重复该操作, <code>,</code>为反方向重复操作</td>
</tr>
<tr>
<td><code>:n</code>, `n</td>
<td><code>,</code>nG`</td>
</tr>
<tr>
<td><code>*</code>, <code>#</code></td>
<td>以当前光标所在单词为目标, <code>*</code>为向后搜索, <code>#</code>为向前搜索<br><code>n</code>跳转到下一个目标位置, N跳转到上一个目标位置</td>
</tr>
<tr>
<td><code>/pattern</code>, <code>?pattern</code></td>
<td><code>/</code>, 向下搜索, <code>?</code>, 向上搜索</td>
</tr>
<tr>
<td><code>C-o/i</code></td>
<td><code>o</code>, 回到上一次编辑的地方, <code>i</code>, 回到下一次编辑的地方</td>
</tr>
</tbody></table>
<h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><p>标记, 即为<strong>书签</strong>，在某处打上标记后，可快速跳转。</p>
<p>三类标记</p>
<ul>
<li><p><code>a-z</code> 用户设置，仅对当前的一个文件生效，也就意味着只可以在当前文件中跳转</p>
</li>
<li><p><code>A-Z</code> 用户设置，全局标记，可以作用于不同文件。大写标注也称为「文件标注」。跳转时有可能会切换到另一个缓冲区</p>
</li>
<li><p><code>0-9</code> 由 <strong>viminfo</strong> 记录，0 代表 viminfo <strong>最后一次</strong>被写入的位置, </p>
<ul>
<li>0 代表 Vim 进程最后一次结束的位置</li>
<li>1 代表 Vim 进程<strong>倒数第二次</strong>结束的位置</li>
</ul>
<p><code>m</code> 定义一个标记，如 <code>ma</code> 标记当前问题为 a 标记。</p>
</li>
</ul>
<p>标记间跳转用 <code>&#39;</code> / <code>g&#39;</code>  或者反引号</p>
<ul>
<li><strong>单引号</strong>会跳转回被标记行的第一个<strong>非空字符</strong></li>
<li><strong>反引号</strong>会跳转回被标记行的<strong>被标记列</strong>。</li>
</ul>
<p>其他的跳转,  反引号命令相同</p>
<ul>
<li><code>&#39;[&#39;</code>,  上次修改或复制的第一行或第一个字符</li>
<li><code>&#39;]&#39;</code>, 上次修改或复制的最后一行或最后一个字符</li>
<li><code>&#39;&lt;</code>, 上一次在可视模式下选取的第一行或第一个字符</li>
<li><code>&#39;&gt;</code>,  上一次在可视模式下选取的最后一行或最后一个字符</li>
<li><code>&#39;&#39;</code>, 上一次跳转之前的光标位置</li>
<li><code>&#39;&quot;</code>, 上一次关闭当前缓冲区时的光标位置</li>
<li><code>&#39;^</code>,  上一次插入字符后的光标位置</li>
<li><code>&#39;.</code>, 上一次修改文本后的光标位置</li>
<li><code>&#39;(</code>, 当前句子的开头; <code>&#39;)</code>, 当前句子的结尾</li>
<li><code>&#39;{</code>, 当前段落的开头; <code>&#39;}</code>, 当前段落的结尾</li>
</ul>
<p>标记也可以搭配 <strong>范围</strong> 一起使用。如果在可视模式下选取一些文本，然后按下 <code>:</code>，这时命令行会被填充为 <code>:&#39;&lt;,&#39;&gt;</code>，这即表示在可视模式下选取的范围。</p>
<p>使用 <code>:marks</code> 可以查看当前所有的标记，使用 <code>:h mark-motions</code> 更多关于标记的帮助信息。</p>
<h1 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h1><p>选择处于visual模式</p>
<ul>
<li><code>v</code>, 按字符选定</li>
<li><code>V</code>, 按行选定</li>
<li><code>C-v</code>, 列选择</li>
</ul>
<p><code>a{x}</code>, <code>i{x}</code>,  <code>a</code> 选择的范围要比<code>i</code>要大, <strong>a: around; i: inner</strong></p>
<ul>
<li><code>x</code>可以是<code>w, s, p</code>, 分别表示word, sentence, paragraph</li>
<li><code>x</code>可以是block,  <code>ax</code>, 包括外边符号, <code>ix</code>, 不包括外边符号<ul>
<li><code>[/]</code>, <code>(/)</code>, <code>&lt;/&gt;</code>, <code>{/}</code>分别对应<code>[]</code>, <code>()</code>,  <code>&lt;&gt;</code>, <code>{}</code>包含的block</li>
<li><code>&quot;</code>, <code>&#39;</code>, <code>反引号</code>, 分别对应其包起来的block</li>
</ul>
</li>
</ul>
<h1 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h1><p><code>r</code>, replace, 替换单个字符; <code>R</code>, 连续替换</p>
<p><code>x</code>, 删除光标所在字符, <code>X</code>, 删除光标前一个字符</p>
<p>命令格式: <strong><code>motion</code> + <code>num</code> + <code>range</code></strong></p>
<p><code>motion</code>, 动作</p>
<ul>
<li><p>替换</p>
<ul>
<li><code>c</code>, change, 改写, 删了重写, <code>c</code>需要配合运动(如<code>w</code>, <code>b</code>, <code>j</code>等), 将删除从当前光标位置一直到运动结束的字符进入insert模式</li>
<li><code>s</code>, substitute, 替换, 删除当前字符, 并进入insert模式</li>
<li><code>r</code>, replace, 替代, 不进入insert模式, 需要另一个字符替换当前字符</li>
</ul>
</li>
<li><p><code>d</code>, delete, 删除</p>
</li>
<li><p><code>y</code>, yank, 复制</p>
</li>
<li><p><code>v</code>, visual, 选择</p>
</li>
<li><p><code>range</code>, 均为上文提到的<strong>选择命令</strong></p>
<ul>
<li><strong>单词</strong>, <code>w/W</code>, <code>b/B</code>, <code>e/E</code></li>
<li><strong>行</strong>, <code>j, k, 0, ^, $</code></li>
<li><strong>句子</strong>, <code>(/)</code>; 段落: <code>{/}</code></li>
</ul>
</li>
<li><p>command模式</p>
<ul>
<li><code>:set paste</code>, 粘贴不自动缩进</li>
<li><code>:a, b co p</code>,  a-b行的内容 <strong>copy</strong> 到 p行, a &lt; b 时会提示范围输错了, 是否交换a,b, 确认的话会交换a,b 正常粘贴</li>
<li><code>:a, b m p</code>, a-b行的内容 <strong>move</strong> 到 p</li>
<li><code>:a, bd</code>, a-b行的内容 delete掉</li>
</ul>
</li>
</ul>
<p>编辑模式, <kbd>Ctrl</kbd>+<kbd>U</kbd>, 删除光标所在位置至行首的字符</p>
<p><strong>特殊字符/符号</strong></p>
<ul>
<li>command 模式:  <strong>输入回车</strong>: <code>C-v</code> + 回车</li>
<li><strong>insert</strong> + <strong>command</strong>: <code>:dig</code>获取特殊字符对应<code>digraph</code>, 然后 <code>C-k</code>,  输入对应<code>digraph</code></li>
</ul>
<p>大小写转换, <code>:help ~</code></p>
<ul>
<li><code>~</code>,  改变大小写</li>
<li><code>g~~</code>, 改变当前行大小写</li>
<li><code>guu</code>, 当前行字母全小写</li>
<li><code>gUU</code>, 当前行字母全小写</li>
</ul>
<p><strong>列编辑,</strong> <code>C-v</code></p>
<ul>
<li>修改, <code>r</code>, 光标所选均会被 <strong>Replace</strong></li>
<li>光标插入, <code>I</code>, 所选列光标前会被 <strong>Insert</strong></li>
<li>光标后追加, <code>A</code>, 所选列光标后会 <strong>Append</strong></li>
<li>删除, <code>d</code>, 光标所选会被 <strong>delete</strong></li>
</ul>
<p><strong>替换</strong>, <strong>substitute</strong>,  <code>:[range]s/pattern/string/flags</code></p>
<ul>
<li><strong>flag</strong>, 只列出常用的<ul>
<li><code>c</code>, confirm, 每个替换都需要验证</li>
<li><code>g</code>, global, 范围内全部替换</li>
<li><code>i</code>, ignore case for the pattern, 忽略大小写<ul>
<li><code>I</code>, don’t ignore case</li>
</ul>
</li>
<li><code>n</code>, number, 不做替换, 只显示匹配数目</li>
</ul>
</li>
<li><code>string</code>相关规则<ul>
<li><code>\0, ... \9</code>, pattern 匹配到的第i个子串</li>
<li><code>&amp;</code>, 表示为整个pattern</li>
<li>大小写变换<ul>
<li><code>~</code>, 替换, 大小写转换</li>
<li><code>\u</code>, <code>\l</code>, 下个字符为大写, 小写</li>
<li><code>\U</code>, <code>\L</code>, 接下来的字符为大写, 小写, 直到遇到<code>\e</code></li>
</ul>
</li>
</ul>
</li>
<li>替换示例: <code>:s/\([abc]\)\([efg]\)/\L\u\2\u\1/g   modifies &quot;AF Fa bG&quot; to &quot;Fa Fa Gb&quot;</code></li>
</ul>
<p>vim 与 shell</p>
<ul>
<li><code>:shell</code>, vim 进入shell, <code>exit</code>后会回到vim</li>
<li><code>:!command</code>, 临时进入shell, 完成后返回vim</li>
<li>与shell交互, ``:r !command`, 读取命令输出, 写入到vim中</li>
</ul>
<p>二进制文件</p>
<ul>
<li><code>vim -b filename</code>,  <code>-b</code>, 二进制, 否则文件末尾会被加上0x0a</li>
<li><code>:%!xxd</code>, 以16进制方式查看</li>
<li><code>:%!xxd -r</code>, 取消上一步操作, </li>
<li>为调用<code>xxd</code>转换, <code>-g</code>, 指定输出每组的8位字节数, 默认为2</li>
</ul>
<h1 id="退出"><a href="#退出" class="headerlink" title="退出"></a>退出</h1><ul>
<li><code>:w</code>, save, 保存</li>
<li><code>:q</code>, quit, 退出, 修改未保存进行退出会失败</li>
<li><code>:wq</code>, :<code>x</code>, save and exit, 保存退出</li>
<li><code>:quit</code>, force quit, 强制退出, 忽略未保存</li>
</ul>
<h1 id="折叠"><a href="#折叠" class="headerlink" title="折叠"></a>折叠</h1><ul>
<li>6种折叠模式, <code>:help fdm</code><ul>
<li><strong>manual</strong>, 手动管理</li>
<li><strong>indent</strong>, 缩进表示折叠</li>
<li><strong>expr</strong>, 表达式表示折叠, <code>foldexpr</code></li>
<li><strong>marker</strong>, 对特定标示, 如括号(<code>(), {}, []</code>) 折叠</li>
<li><strong>syntax</strong>, 语法高亮折叠</li>
<li><strong>diff</strong>, 没变更的会被折叠</li>
</ul>
</li>
<li>折叠命令<ul>
<li><code>zf</code>, 选中文本折叠<ul>
<li><code>zf10j</code>, 折叠当前行后10行; <code>5zf</code>, 折叠5行</li>
<li><code>zf7G</code>, 当前行至全文第7行折叠起来</li>
<li><code>zfa(</code>, 折叠 <code>()</code>包围区域</li>
</ul>
</li>
<li><code>zo</code>,  open 当前的折叠; <code>zc</code>, close 当前的折叠; <code>za</code>,  打开关闭折叠切换</li>
<li><code>zd</code>, 删除当前的折叠, <strong>delete</strong>;  <code>zE</code>, 删掉所有的折叠, <strong>erase</strong></li>
<li><code>zj</code>, <code>zk</code>,  移动到下/上一个折叠</li>
<li><code>zn</code>, <code>zN</code>, 禁用/启用折叠</li>
<li><code>zM</code>, 关闭所有及嵌套的折叠; <code>zr</code>, 打开所有折叠; <code>zR</code>, 打开所有及嵌套的折叠</li>
</ul>
</li>
<li>保存折叠状态, <code>:mkview</code>, 此命令会在 <strong>.vim</strong> 下生成view文件夹</li>
<li>可通过 <code>:loadview</code> 加载折叠状态</li>
</ul>
<h1 id="文本比较"><a href="#文本比较" class="headerlink" title="文本比较"></a>文本比较</h1><ul>
<li><code>vimdiff file1 file2</code></li>
<li>``vim -d file1 file2`</li>
<li>已打开一个文件file1<ul>
<li>上下,  <code>:diffsplit file2</code></li>
<li><strong>左右: <code>:vert diffsplit file2</code></strong><ul>
<li>左右文件交换: <code>C-w</code> + <code>H/L</code></li>
</ul>
</li>
</ul>
</li>
<li>已经打开两个文件, 分屏后分别在两个窗口输入 <code>:diffthis</code></li>
<li>比较命令<ul>
<li><code>:diffupdate</code>, 修改文件后变更比较结果</li>
<li><code>[c</code>, 上一个diff点; <code>]c</code>下一个diff点</li>
<li><code>dp</code>, diff put, 将diff点的当前文档应用到另一个文档</li>
<li><code>do</code>, diff obtain, diff点的当前文档应用另一个文档的内容</li>
</ul>
</li>
</ul>
<h1 id="多屏-amp-session"><a href="#多屏-amp-session" class="headerlink" title="多屏 &amp; session"></a>多屏 &amp; session</h1><ul>
<li><p>vim支持多窗口分屏, 可同时打开多个文件编辑</p>
</li>
<li><p>三种概念,  查看帮助<code>:help window</code></p>
<ul>
<li><strong>buffer</strong>, A buffer is the <strong>in-memory</strong> text of a file., 保存前修改只在内存中, 未写入磁盘</li>
<li><strong>window</strong>, A window is a viewport on a buffer. <strong>sql中的视图</strong>, <strong>用来显示buffer,</strong> 一个buffer可有多个窗口, 一个窗口只对应一个buffer</li>
<li><strong>tab</strong>, A tab page is a collection of windows. tab是窗口的集合</li>
</ul>
</li>
<li><p>vim是终端软件, 非图形软件(gvim不包括在内)</p>
<ul>
<li>vim默认打开一个window, 根据打开的文件数量, 可以有多个buffer</li>
<li><code>:e filename</code>, 新打开一个文件, buffer+1</li>
<li><code>:ls</code>, 查看当前buffer<ul>
<li>最开始是buffer编号, 用于buffer切换时指定编号<ul>
<li><code>:bp</code>, 切换到 <strong>previous</strong> buffer</li>
<li><code>:bn</code>, 切换到 <strong>next</strong> buffer</li>
<li><code>:bf</code>, 切换到 <strong>first</strong> buffer</li>
<li><code>:bl</code> 切换到 <strong>last</strong> buffer</li>
<li><code>:b{n}</code>, 切换到第n个buffer, 如<code>:b2</code></li>
</ul>
</li>
<li><code>:bd</code>, delete buffer, 关闭当前文件</li>
<li><strong>flag</strong>,  标示文件状态<ul>
<li><code>%</code>, 当前, 当前窗口正显示的文件</li>
<li><code>#</code>, 交换, 上次打开的文件</li>
<li><code>=</code>, 只读, 该buffer打开的是一个只读文件</li>
<li><code>+</code>, 文件已修改</li>
<li><code>a</code>, 当前被激活, <strong>activation</strong></li>
<li><code>h</code>, 隐藏的缓冲区</li>
</ul>
</li>
<li><code>1 %a + &quot;test.c&quot;   line 9</code></li>
</ul>
</li>
</ul>
</li>
<li><p>多窗口, 一个窗口 <strong>split</strong> 成多个窗口</p>
<ul>
<li><code>:sp</code>, 水平分屏, 分为上下; <code>:vsp</code>, 垂直分屏, 分为左右, 后可跟文件名</li>
<li>窗口命令, <code>C-w</code><ul>
<li><strong>光标移动</strong>, <code>C-w</code> + <code>hjkl</code></li>
<li><strong>分屏移动</strong>, <code>C-w</code> + <code>HJKL</code></li>
<li><strong>调整尺寸</strong><ul>
<li><code>C-w</code> + <code>-/+</code>, 增加或减少窗口高度</li>
<li><code>C-w</code> + <code>&lt;/&gt;</code>, 增加或减少窗口宽度</li>
<li><code>C-w</code> + <code>=</code>, 均分窗口</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>分屏同步滚动, <strong>scrollbind</strong></p>
<ul>
<li>设置, <code>:set scb</code></li>
<li>取消, <code>:set scb!</code></li>
</ul>
</li>
<li><p>标签页, <strong>tab</strong></p>
<ul>
<li><code>:tabnew + filename</code>, 新建一个tab页</li>
<li><code>tabc i</code>, close掉tab页, 指定数字就关闭指定页, 否则关闭当前页</li>
<li><code>:tabo</code>, close掉 other 页</li>
<li><code>:tabs</code>, 查看所有tab页</li>
<li>查看上一个, 下一个tab<ul>
<li><code>:tabn</code>, <code>:tabp</code></li>
<li><code>gt</code>, <code>gT</code></li>
</ul>
</li>
<li><code>Ngt</code>, 查看第N个标签页</li>
<li><code>vim -p file1 file2 file3</code>, 使用tab打开多个文件</li>
</ul>
</li>
<li><p><strong>目录</strong>, <code>:E</code></p>
<ul>
<li>也可直接vim一个目录</li>
<li><code>j, k</code>上下移动, 回车进入目录或打开文件, 上面有显示一堆命令</li>
<li><code>:cd path</code>, 切换目录, <code>:pwd</code>, 查看当前路径</li>
<li>目录分屏<ul>
<li>上下分屏, <code>:He</code>,  <code>He!</code>为目录在上</li>
<li>左右分屏, <code>Ve</code>, 左边是目录</li>
<li><code>:Te</code>, tab页浏览目录</li>
</ul>
</li>
</ul>
</li>
<li><p>会话, <strong>session</strong></p>
<ul>
<li>保存会话:  <code>:mksession ~/.mysession.vim</code></li>
<li>加载会话, <code>vim -S ~/.mysession.vim</code></li>
</ul>
</li>
</ul>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><ul>
<li><p><strong>字符编码:</strong>, <code>ga</code>, 查看光标处字符的ascii码, <code>g8</code>, 查看光标处字符的utf-8编码</p>
</li>
<li><p><code>gf</code>, 打开光标处所指的文件, 例如<code>#include</code></p>
</li>
<li><p><strong>缩进</strong></p>
<ul>
<li><code>&gt;&gt;</code>, 右缩进, <code>&lt;&lt;</code>, 左缩进, <code>=</code>, 缩进当前行, <strong>对齐缩进</strong>, 与上下文对齐</li>
<li><code>=%</code>, <strong>对齐缩进整个语句块</strong>, <code>%</code>是括号匹配, <strong>光标需要在语句块括号上</strong></li>
<li><code>gg=G</code>, 对整个文件进行排版</li>
</ul>
</li>
<li><p><strong>自动补全</strong></p>
<ul>
<li><p><code>C-n</code>, <code>C-p</code></p>
</li>
<li><p>智能补全, 进入补全模式: <code>C-x</code></p>
<ul>
<li>整行补全, line <code>C-L</code></li>
<li><strong>根据当前文件里关键字补全</strong><code>C-n</code></li>
<li><strong>根据字典补全</strong><code>C-n</code></li>
<li>根据同义词字典补全 <code>C-t</code></li>
<li><strong>根据头文件内关键字补全</strong><code>C-i</code></li>
<li>根据标签补全 <code>C-]</code></li>
<li><strong>补全文件名</strong><code>C-f</code></li>
<li>补全宏定义, <strong>define</strong> , <code>C-d</code></li>
<li>补全vim命令 <code>C-v</code></li>
<li>用户自定义补全方式 <code>C-u</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>插入计算结果:</strong> 输入 <code>ctrl-r =</code>，然后输入表达式，就能在光标处得到计算结果。</p>
</li>
</ul>
<h1 id="vimrc"><a href="#vimrc" class="headerlink" title="vimrc"></a>vimrc</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">filetype on             &quot;检测文件类型</span><br><span class="line">filetype indent on      &quot;针对不同文件类型采用不同的缩进格式</span><br><span class="line">syntax enable           &quot;开启语法高亮</span><br><span class="line">syntax on</span><br><span class="line"></span><br><span class="line">&quot;通用项</span><br><span class="line">set number              &quot;显示行号</span><br><span class="line">set nowrap              &quot;取消换行</span><br><span class="line">set cursorline          &quot;突出显示当前行</span><br><span class="line">set colorcolumn&#x3D;121		&quot;121列高亮, 代码规范要求一行不超过120字符, 压线则超</span><br><span class="line">set paste               &quot;粘贴时保持格式</span><br><span class="line">set scrolloff&#x3D;3         &quot;光标的上方或下方至少会保留显示的行数, 意即上移或下移距屏幕边缘还有n行便开始滚动</span><br><span class="line">set autowrite           &quot;自动保存</span><br><span class="line">set autoread			&quot;自动加载, 外部修改文件, 自动更新</span><br><span class="line">set confirm             &quot;处理未保存文件或只读文件弹出确认</span><br><span class="line">set report&#x3D;0            &quot;通过使用: commands命令，告诉我们文件的哪一行被改变过&quot;</span><br><span class="line">set iskeyword+&#x3D;_,$,@,%,#,-  &quot;带有这些字符的不要被换行分割</span><br><span class="line">&quot;colorscheme desert		&quot;颜色主题</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;命令模式模糊匹配</span><br><span class="line">set wildmenu</span><br><span class="line">set wildmode&#x3D;longest:list,full</span><br><span class="line"></span><br><span class="line">&quot;取消备份</span><br><span class="line">set nobackup</span><br><span class="line">set noswapfile</span><br><span class="line"></span><br><span class="line">&quot;查找</span><br><span class="line">set ignorecase          &quot;搜索忽略大小写</span><br><span class="line">set hlsearch            &quot;高亮搜索结果</span><br><span class="line">set incsearch           &quot;随着键入即时搜索</span><br><span class="line">set smartcase           &quot;有一个或以上大写字母时仍大小写敏感</span><br><span class="line">set magic               &quot;支持正则</span><br><span class="line"></span><br><span class="line">&quot;缩进</span><br><span class="line">set tabstop&#x3D;4           &quot;设置tab键的宽度</span><br><span class="line">set expandtab           &quot;将tab自动转为空格</span><br><span class="line">set smarttab</span><br><span class="line">set shiftwidth&#x3D;4        &quot;自动缩进的宽度</span><br><span class="line">set softtabstop&#x3D;4       &quot;退格键删除的空格数, 只影响tab插入的空格</span><br><span class="line">set smartindent         &quot;智能缩进</span><br><span class="line">set autoindent          &quot;自动缩进</span><br><span class="line">set cintent</span><br><span class="line">autocmd FileType make set noexpandtab  &quot;不将makefile中的tab转换为空格</span><br><span class="line"></span><br><span class="line">&quot;折叠</span><br><span class="line">set foldenable</span><br><span class="line">&quot; 折叠方法</span><br><span class="line">&quot; manual    手工折叠</span><br><span class="line">&quot; indent    使用缩进表示折叠</span><br><span class="line">&quot; expr      使用表达式定义折叠</span><br><span class="line">&quot; syntax    使用语法定义折叠</span><br><span class="line">&quot; diff      对没有更改的文本进行折叠</span><br><span class="line">&quot; marker    使用标记进行折叠, 默认标记是 &#123;&#123;&#123; 和 &#125;&#125;&#125;</span><br><span class="line">set foldmethod&#x3D;syntax</span><br><span class="line">&quot;set foldcolumn&#x3D;4 &quot;设置最大折叠层次</span><br><span class="line"></span><br><span class="line">&quot;编码设置</span><br><span class="line">set encoding&#x3D;gbk</span><br><span class="line">set fileencodings&#x3D;utf-8,ucs-bom,shift-jis,gb18030,gbk,gb2312,cp936</span><br><span class="line"></span><br><span class="line">&quot;状态栏</span><br><span class="line">set ruler               &quot;显示当前行号列号</span><br><span class="line">set showcmd             &quot;在状态栏显示正在输入的命令</span><br><span class="line"></span><br><span class="line">set statusline&#x3D;%F%m%r%h%w</span><br><span class="line">set statusline+&#x3D;[%&#123;&amp;fileformat&#125;]</span><br><span class="line">set statusline+&#x3D;[%&#123;&amp;fileencoding&#125;]</span><br><span class="line">set statusline+&#x3D;[%&#123;strftime(\&quot;%Y&#x2F;%m&#x2F;%d\ %H:%M:%S\&quot;,getftime(expand(\&quot;%:p\&quot;)))&#125;]</span><br><span class="line">set statusline+&#x3D;%&#x3D;%l,%c%V\ %P</span><br><span class="line">set laststatus&#x3D;2</span><br><span class="line"></span><br><span class="line">&quot;其他</span><br><span class="line">set lz	&quot;在执行宏命令时，不进行显示重绘；在宏命令执行完成后，一次性重绘，以便提高性能&quot;</span><br><span class="line">set noerrorbells		&quot;关闭错误信息响铃</span><br></pre></td></tr></table></figure>



<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><ul>
<li><code>:help</code></li>
<li><a href="https://coolshell.cn/articles/11312.html" target="_blank" rel="noopener">无插件Vim编程技巧|</a></li>
<li><a href="https://www.thinbug.com/q/16416758" target="_blank" rel="noopener">vi / vim中的s，c和r命令有什么区别？</a></li>
<li><a href="https://blog.konghy.cn/2019/11/23/vim-skill/" target="_blank" rel="noopener">Vim 使用技巧整理</a></li>
</ul>
]]></content>
      <categories>
        <category>Tool</category>
        <category>CheatSheet</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Tool</tag>
        <tag>CheatSheet</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux权限相关</title>
    <url>/posts/4220703012.html</url>
    <content><![CDATA[<h1 id="setuid"><a href="#setuid" class="headerlink" title="setuid"></a>setuid</h1><h2 id="从passwd说起"><a href="#从passwd说起" class="headerlink" title="从passwd说起"></a>从passwd说起</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hosted@Desktop:~$ l /etc/passwd /etc/shadow /usr/bin/passwd</span><br><span class="line">-rw-r--r-- 1 root root 1.6K Mar  9 11:09 /etc/passwd</span><br><span class="line">-rw-r----- 1 root shadow 1026 Mar  9 11:13 /etc/shadow</span><br><span class="line">-rwsr-xr-x 1 root root  59K Mar 23  2019 /usr/bin/passwd</span><br></pre></td></tr></table></figure>

<ul>
<li>要修改, 需通过 <code>passwd</code> 命令修改 <code>/etc/passwd</code>, <code>/etc/shadow</code><ul>
<li><code>/etc/passwd</code>, 只有属组root有w权限</li>
<li><code>passwd</code> 命令root和普通用户都可以执行</li>
<li><code>passwd</code> 命令权限为rws, <strong>设置了setuid</strong>, <strong>使其以命令属主的名义执行</strong></li>
<li>普通用户执行 <code>passwd</code> 命令时, euid变为passwd的属主root, 去修改 <code>/etc/passwd</code></li>
</ul>
</li>
<li><code>setuid</code>, 让执行该命令的用户以该命令拥有者的权限去执行</li>
</ul>
<h2 id="有什么问题-提权"><a href="#有什么问题-提权" class="headerlink" title="有什么问题? 提权"></a>有什么问题? 提权</h2><ul>
<li>可能误设setuid导致可执行文件实现提权</li>
<li>普通用户通过vi编辑自己无权访问(r/w)的文件, 会报 <strong>Permission Denied</strong></li>
<li>普通用户尝试kill掉root启动的进程, 会报错, <strong>Operation not permitted</strong></li>
<li>这是合理的设置, 普通用户权限会被限制</li>
<li>但正如上述passwd, 以及ping命令来说, 某些场景下一些命令是普通用户也需要进行的, 因此被赋予了setuid<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hosted@Desktop:~$ sudo find / -perm /u=s</span><br><span class="line">[sudo] password <span class="keyword">for</span> hosted: </span><br><span class="line">/bin/fusermount</span><br><span class="line">/bin/mount</span><br><span class="line">/bin/ping</span><br><span class="line">/bin/su</span><br><span class="line">/bin/umount</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li>
<li>但若是setuid被滥用了, 比如vi, 比如kill, 比如find<ul>
<li>给vi赋予setuid, 因为属主是root, 普通用户执行vi便以root的身份去执行, 可进行任意文件的读写操作</li>
<li>给kill赋予setuid, 普通用户执行kill, 就有了root的身份, 可以kill掉任何进程</li>
<li>给find赋予setuid, <code>-exec</code> 便可以以root的身份执行命令</li>
</ul>
</li>
</ul>
<a id="more"></a>

<h2 id="SetUID的使用"><a href="#SetUID的使用" class="headerlink" title="SetUID的使用"></a>SetUID的使用</h2><ul>
<li><p>setuid只对可执行文件有效, 有 <code>x</code>, 没有 <code>x</code> 权限, 设置setuid会被标记为 <code>S</code></p>
</li>
<li><p>用户要对该文件有执行权限</p>
<ul>
<li>无法执行, setuid不会生效</li>
<li>执行过程中, setuid生效以属主身份执行</li>
</ul>
</li>
<li><p>setuid只在执行过程中有效, 执行完毕, 身份也随之消失</p>
</li>
<li><p>防范setuid滥用</p>
<ul>
<li>敏感目录严格控制写权限</li>
<li>谨慎授予setuid的进程</li>
<li>敏感分区禁用setuid<ul>
<li>存放数据, 用来备份的分区等</li>
<li><code>mount -o remount nosuid /usr1</code>, 这种是临时禁用</li>
<li><code>/etc/fstab</code>, default后加<strong>nosuid</strong>, 然后重新挂载</li>
</ul>
</li>
</ul>
</li>
<li><p>root执行属主为普通用户, 设置setuid的可执行文件会怎样</p>
</li>
</ul>
<h1 id="Linux-Cap能力"><a href="#Linux-Cap能力" class="headerlink" title="Linux Cap能力"></a>Linux Cap能力</h1><h2 id="从ping开始谈起"><a href="#从ping开始谈起" class="headerlink" title="从ping开始谈起"></a>从ping开始谈起</h2><ul>
<li>ping 同样具有setuid</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hosted@Desktop:~$ l /bin/ping</span><br><span class="line">-rwsr-xr-x 1 root root 63K Mar 10  2017 /bin/ping</span><br><span class="line">hosted@Desktop:~$ chmod u<span class="_">-s</span> /bin/ping</span><br><span class="line">hosted@Desktop:~$ ls -l /bin/ping</span><br><span class="line">-rwxr-xr-x 1 root root 64424 Mar 10  2017 /bin/ping</span><br><span class="line">hosted@Desktop:~$ ping 127.0.0.1 -c 4</span><br><span class="line">ping: socket: Operation not permitted</span><br></pre></td></tr></table></figure>
<ul>
<li>去掉ping的suid, ping出现报错, <strong>socket: Operation not permitted</strong></li>
<li>ping只是需要socket的权限, 就将root的权限临时给它, 这样带来了<strong>安全隐患</strong><ul>
<li>只是需要<strong>RAW套接字建立必要ICMP数据包</strong>，除此之外的其它root权限对这个程序都是没有必要的</li>
</ul>
</li>
<li>大多数情况下我们只是需要一小部分特权, 但是使用suid, 却可以拥有root的全部权限. 这样一旦文件存在漏洞, 极有可能被利用, 成功被提权, 以root身份执行其他操作, 因此<strong>suid某种程度上增加了攻击面</strong></li>
<li>suid这种权限控制方法有点粗糙, 因此从kernel 2.2开始, linux实现了一种新机制Capabilities, 对权限进行更<strong>精细的控制</strong><ul>
<li>本质上就是将内核调用分门别类，具有相似功能的内核调用被分到同一组中</li>
<li>将root权限细分为不同的领域, 划分能力, 分别启用禁用, 在进行特权操作时, 判别该领域能力是否启用, 并以此决定能否执行该特权操作</li>
</ul>
</li>
<li>回到ping命令上来, 收回ping的suid权限, ping报错socket没有操作权限, 那么给ping加上socket相关能力 <code>cap_net_raw</code> 试一下<ul>
<li><code>ping</code> 需要使用raw套接字, 构建icmp包</li>
<li><code>cap_net_raw</code>, 允许使用原始(raw)套接字<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hosted@Desktop:~$ sudo <span class="built_in">setcap</span> cap_net_raw+ep /bin/ping</span><br><span class="line">[sudo] password <span class="keyword">for</span> hosted: </span><br><span class="line">hosted@Desktop:~$ <span class="built_in">getcap</span> /bin/ping</span><br><span class="line">/bin/ping = cap_net_raw+ep</span><br><span class="line">hosted@Desktop:~$ ping 127.0.0.1</span><br><span class="line">PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.208 ms</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.198 ms</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>相比setuid, 他只是<strong>具有必要的特权, 最大化程度上减少了系统的攻击面</strong></li>
<li>能力这种, 也是需要只满足必要的能力, <strong>能力最小化</strong>, 若能力不做限制, 集齐38种能力, 那和不受限制也没什么区别</li>
</ul>
<h2 id="能力集"><a href="#能力集" class="headerlink" title="能力集"></a>能力集</h2><ul>
<li><p><strong>添加能力</strong>, <code>sudo setcap cap_net_raw+ep /bin/ping</code></p>
<ul>
<li>此处添加能力为<strong>文件能力</strong>, 具体看下文</li>
<li><code>+</code>, 为添加指定能力, <code>-</code>, 为将指定能力从能力集中移除, <code>=</code>, 指定能力</li>
<li><code>eip</code>, 为linux中的三个能力集, <strong>Effective</strong>, <strong>Inheritable</strong> 和 <strong>Permitted</strong></li>
<li><code>-r</code>, 为清除能力</li>
</ul>
</li>
<li><p><strong>查看能力</strong></p>
<ul>
<li><code>getcap /bin/ping</code></li>
<li><code>cat /proc/{pid}/status | grep Cap</code>, 包含进程的五个能力集信息, 通过16进制展示</li>
<li><code>capsh --decode=302b</code>, 根据得到的16进制数字查看解码出来的cap能力<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hosted@Desktop:~$ cat /proc/869/status | grep Cap</span><br><span class="line">CapInh:	0000000000000000</span><br><span class="line">CapPrm:	0000001fffffffff</span><br><span class="line">CapEff:	0000001fffffffff</span><br><span class="line">CapBnd:	0000001fffffffff</span><br><span class="line">hosted@Desktop:~$ capsh --decode=302b</span><br><span class="line">0x000000000000302b=cap_chown,cap_dac_override,cap_fowner,cap_kill,cap_net_admin,cap_net_raw</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>man capabilities</code>, 查看能力集相关, 随着内核版本的更新, 截止到4.4.0, cap能力目前共支持38种能力</p>
<ul>
<li>0~37, 最大能力值则为 <code>0x3fffffffff</code></li>
<li>具体对应位可在该文件查看, <code>/usr/include/linux/capability.h</code><ul>
<li>ubuntu 18.04.2 LTS存放在上述路径</li>
<li>18.04.3 LTS在上述路径下不存在该文件, find后, 该文件存放在该路径下 <code>/usr/src/linux-headers-5.0.0-23/include/uapi/linux/capability.h</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Capabilities</strong>是细分到线程的，即每个线程可以有自己的capabilities。而完整的capabilities实现，除了对线程的capabilities具有以下相关功能：</p>
<ul>
<li>对线程(进程)的特权操作，内核续检查其该项特权能力是否启用的</li>
<li>内核提供系统调用，用于获取或修改线程(进程)的能力</li>
<li>文件系统应支持对于<strong>文件能力</strong>的支持, 文件能力在内核2.6.24之后完成支持<ul>
<li>能力机制可附加在可执行文件中</li>
<li>文件类型</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>以下，将分别介绍线程（进程）的capabilities和文件的capabilities</p>
<h2 id="线程-进程-能力"><a href="#线程-进程-能力" class="headerlink" title="线程(进程)能力"></a>线程(进程)能力</h2><ul>
<li>进程中共有四种能力集合</li>
<li>上述章节有提到查看进程能力集的方法<ul>
<li><code>cap /proc/{pid}/status | grep Cap</code>, 该种方法可查到五种能力集的数值, 需通过capsh 解码为人类可读模式</li>
<li><code>getpcaps {pid}</code>, 结果为人类可读的</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hosted@Desktop:~$ ps au</span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">hosted      46  0.0  0.0  18396  4832 pts/0    Ss   09:40   0:06 -bash</span><br><span class="line">hosted      99  0.0  0.0  17504  3636 pts/1    Ss   09:42   0:06 -bash</span><br><span class="line">root       869  0.0  0.0  11504   548 pts/1    S    12:40   0:00 nc -lp 5555</span><br><span class="line">root      1224  0.0  0.0  16520  1664 pts/1    S    15:02   0:00 su -</span><br><span class="line">root      1225  0.0  0.0  16924  3420 pts/1    S    15:02   0:00 -su</span><br><span class="line">hosted    1747  0.0  0.0  17380  1912 pts/0    R    19:46   0:00 ps au</span><br><span class="line">hosted@Desktop:~$ getpcaps 869</span><br><span class="line">Capabilities <span class="keyword">for</span> `869`: = cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,cap_wake_alarm,cap_block_suspend+ep</span><br><span class="line">hosted@Desktop:~$ getpcaps 46</span><br><span class="line">Capabilities <span class="keyword">for</span> `46`: =</span><br></pre></td></tr></table></figure>
<ul>
<li><p>未专门进行能力值设置的进程, 一般都根据特权与否来划分能力值</p>
<ul>
<li>特权进程<strong>基本为全能力</strong>, 受系统边界能力 <code>cap_bset</code> 限制, 此时root进程能力等于系统边界能力</li>
<li>普通进程为0能力, 不能进行任何特权操作</li>
</ul>
</li>
<li><p><code>cap_bset</code> 不属于进程能力, 其为系统边界能力(系统完整能力), 任何进程能力均小于等于 <code>cap_bset</code></p>
<ul>
<li>能力边界集(capability bounding set)是系统中所有进程允许保留的能力</li>
<li>如果在能力边界集中不存在某个能力，那么<strong>系统中的所有进程都没有这个能力，即使以超级用户权限执行的进程也一样</strong>。</li>
<li>查看边界值: <code>cat /proc/sys/kernel/cap_last_cap</code>, 查看边界值, <code>sysctl -a</code></li>
<li>root用户可以向能力边界集中写入新的值来修改系统保留的能力。但是要注意，root用户能够从能力边界集中删除能力，却不能再恢复被删除的能力，只有init进程能够添加能力。通常，一个能力如果从能力边界集中被删除，只有系统重新启动才能恢复。</li>
</ul>
</li>
<li><p>四种进程能力</p>
<ul>
<li><strong><code>Permitted</code></strong>, 是一种<strong>规定</strong>, 描述进程所能拥有的<strong>能力上限</strong>, 是Inheritable和Effective的超集, 一个进程在Permitted集合中丢失一个能力，它无论如何不能再次获取该能力(除非特权用户再次赋予它)</li>
<li><strong><code>Effective</code></strong>, 进程有效能力, <strong>进行特权操作是实际进行判别的能力集</strong><ul>
<li>禁用能力时, <code>Permitted</code> 为永久禁止, 需要时只能特权用户再次赋予</li>
<li><code>Effective</code> 为临时禁止, 需要时可从 <code>Permitted</code> 启用</li>
</ul>
</li>
<li><strong><code>Inheritable</code></strong>, 执行 <code>exec()</code> 系运行其他命令时，能够被新命令<strong>继承的能力</strong><ul>
<li>该能力集并不会自动继承给新进程, 即不会自动添加到新进程的 <code>Effective</code> 中</li>
<li>只会影响新进程的 <code>Permitted</code> 集合, 下文有提到能力继承</li>
</ul>
</li>
<li><strong><code>Ambient</code></strong>, <strong>能力掩码</strong>, 4.3之后新增加的一种能力集<ul>
<li><code>Permitted</code> 和 <code>Inheritable</code> 未设置的, <code>Ambient</code> 也不能设置, <code>pA &lt; pP &amp; pI</code></li>
<li><code>Permitted</code> 或 <code>Inheritale</code> 某能力关闭, <code>Ambient</code> 也随之关闭</li>
<li>用户从特权用户到非特权用户后, <code>Ambient</code> 被清除</li>
<li><code>ambient</code> 解决非root用户使用 <code>exec</code> 执行一个程序时候如何保留权限的问题。执行 <code>exec</code> 的时候，<code>cap_ambient</code> 会被添加到 <code>cap_permitted</code> 中，同时设置到 <code>cap_effective</code> 中。</li>
<li><code>ambient</code> 的好处显而易见，举个例子，如果你将 <code>CAP_NET_ADMIN</code> 添加到当前进程的 <code>Ambient</code> 集合中，它便可以通过 <code>fork()</code> 和 <code>execve()</code> 调用 shell 脚本来执行网络管理任务，因为 <code>CAP_NET_ADMIN</code> 会自动继承下去。</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">贴man手册原文</span><br><span class="line">Ambient (since Linux 4.3):</span><br><span class="line">	This  is a set of capabilities that are preserved across an execve(2) of a program that is not privileged.  The ambient capability set obeys the invariant that no capability can ever be ambient if it is not both permitted and inheritable.</span><br><span class="line">	The ambient capability set can be directly modified using prctl(2).  Ambient capabilities are automatically lowered if either of the corresponding permitted or inheritable capabilities is lowered.</span><br><span class="line">	Executing a program that changes UID or GID due to the set-user-ID or set-group-ID bits or executing a program that has any file capabilities set will clear the ambient set.  Ambient capabilities are added to the permitted set and assigned to the effective set when execve(2) is called.</span><br><span class="line"></span><br><span class="line">针对非特权进程execve的能力集</span><br><span class="line">prctl可以直接设置该能力集, permitted, inheritableg关闭某项能力, ambient也随之关闭</span><br><span class="line">setuid, setgid或有任何文件能力, Ambient集合会被清空,</span><br></pre></td></tr></table></figure>

<h2 id="文件能力"><a href="#文件能力" class="headerlink" title="文件能力"></a>文件能力</h2><ul>
<li><p>上述通过<code>setcap</code> 赋予 <code>ping</code> 能力, 便是给可执行文件附加能力</p>
<ul>
<li><code>setcap</code> 一般用于二进制可执行文件。 <code>setcap</code> 用于脚本文件时无效</li>
</ul>
</li>
<li><p>文件能力，保存在文件扩展属性中。修改这些扩展属性，需要具有 <code>CAP_SETFCAP</code> 的能力。</p>
</li>
<li><p><strong>文件与线程的 <code>capabilities</code>，共同决定了通过 <code>exec</code> 运行该文件后的 <code>capabilities</code></strong>。</p>
</li>
<li><p>文件的能力，需要 <strong>文件系统的支持</strong>。如果 <strong>文件系统使用了 <code>nosuid</code> 选项进行挂载，那么文件的 <code>capabilities</code> 将被忽略。</strong></p>
</li>
<li><p>文件能力包含三种</p>
<ul>
<li><strong>Permitted</strong>, 进程执行时, 该能力与线程的cap_bset做与运算, 结果加入进程的 <code>Permitted</code> 能力中</li>
<li><strong>Inheritable</strong>, 该能力与进程中的 <code>Inheritable</code> 能力做与运算, 以确定进程在执行<code>execve</code>后新进程的 <code>Inheritable</code> 能力</li>
<li><strong>Effective</strong>, 文件能力<strong>标志位</strong><ul>
<li>根据 man 手册提到的, 文件的 <code>effective</code> 是<strong>一个bit, 不是一个集合</strong>, 如果设置为开启，那么在执行 <code>execve</code> 函数后，<code>Permitted</code> 集合中新增的 <code>capabilities</code> 会自动出现在进程的 <code>Effective</code> 集合中。</li>
<li>按 <code>setcap</code> 的使用来说, <code>sudo setcap cap_net_raw+p /bin/ping</code>, 只给 <code>permitted</code> 添加 <code>cap_net_raw</code> 能力即可<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">贴man手册原文</span><br><span class="line">Effective:</span><br><span class="line">	This  is  not a set, but rather just a single bit.  If this bit is set, then during an execve(2) all of the new permitted capabilities for the thread are also raised in the effective set.  If this bit is not set, then after an execve(2), none of the new permitted capabilities is in the new effective set.</span><br><span class="line">	Enabling the file effective capability bit implies that any file permitted or inheritable capability that causes a thread to acquire the corresponding  permitted  capability  during  an execve(2) (see the transformation rules described below) will also acquire that capability in its effective set.  Therefore, when assigning capabilities to a file (setcap(8), cap_set_file(3), cap_set_fd(3)), if we specify the effective flag as being enabled for any capability, then the effective flag must  also  be specified as enabled for all other capabilities for which the corresponding permitted or inheritable flags is enabled.</span><br><span class="line"></span><br><span class="line">该位开启, permitted 能力加入进程Effective能力集中, 该位关闭, 没有新的 permitted 能力加入新的 effective 能力集中</span><br><span class="line">该位的开启表明文件的 permitted 或 inheritable 能力可加入到线程的能力中</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>迷惑行为? ping只加了permitted能力集, 进程能力Effective为0, 程序能正常执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hosted@Desktop:~$ ls -l /bin/ping</span><br><span class="line">-rwxr-xr-x 1 root root 64424 Mar 10  2017 /bin/ping     <span class="comment">#没有suid</span></span><br><span class="line">hosted@Desktop:~$ <span class="built_in">getcap</span> /bin/ping</span><br><span class="line">/bin/ping = cap_net_raw+p</span><br><span class="line">hosted@Desktop:~$ sudo <span class="built_in">setcap</span> -r /bin/ping              <span class="comment">#此处清空文件能力, 文件本身没任何能力的会报错</span></span><br><span class="line">hosted@Desktop:~$ <span class="built_in">getcap</span> /bin/ping                      <span class="comment">#查看文件能力, 未回显即为未设置</span></span><br><span class="line">hosted@Desktop:~$ ping 127.0.0.1 -c 4                   <span class="comment">#没有suid, 没有能力, ping出现报错</span></span><br><span class="line">ping: socket: Operation not permitted</span><br><span class="line">hosted@Desktop:~$ sudo <span class="built_in">setcap</span> cap_net_raw+p /bin/ping   <span class="comment">#只在permitted添加cap_net_raw能力</span></span><br><span class="line">hosted@Desktop:~$ <span class="built_in">getcap</span> /bin/ping</span><br><span class="line">/bin/ping = cap_net_raw+p                               <span class="comment">#显示当前只在permitted能力集中有cap_net_raw能力</span></span><br><span class="line">hosted@Desktop:~$ ls -l /bin/ping</span><br><span class="line">-rwxr-xr-x 1 root root 64424 Mar 10  2017 /bin/ping     <span class="comment">#此时还是没有suid</span></span><br><span class="line">hosted@Desktop:~$ ping 127.0.0.1 -c 4                   <span class="comment">#ping 正常执行</span></span><br><span class="line">PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.184 ms</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.297 ms</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.178 ms</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.216 ms</span><br><span class="line">hosted@Desktop:~$ ps aux                                <span class="comment">#查看ping的进程号</span></span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">...</span><br><span class="line">hosted     113  0.2  0.0  14724  1088 pts/1    S    18:39   0:00 ping 127.0.0.1   <span class="comment">#非特权进程, 进程号为113</span></span><br><span class="line">...</span><br><span class="line">hosted@Desktop:~$ getpcaps 113                          <span class="comment">#查看进程能力</span></span><br><span class="line">Capabilities <span class="keyword">for</span> `113`: = cap_net_raw+p                 <span class="comment">#进程能力中只有permitted中有能力</span></span><br><span class="line">hosted@Desktop:~$ cat /proc/113/status | grep Cap       <span class="comment">#另一种查看能力的方式, 辅证</span></span><br><span class="line">CapInh:	0000000000000000</span><br><span class="line">CapPrm:	0000000000002000</span><br><span class="line">CapEff:	0000000000000000                                <span class="comment">#进程Effective能力为空? 怎么判别过的</span></span><br><span class="line">CapBnd:	0000001fffffffff</span><br><span class="line">hosted@Desktop:~$ sudo <span class="built_in">setcap</span> -r /bin/ping              <span class="comment"># 再次清空能力</span></span><br><span class="line">hosted@Desktop:~$ <span class="built_in">getcap</span> /bin/ping                      </span><br><span class="line">hosted@Desktop:~$ sudo <span class="built_in">setcap</span> cap_net_raw+e /bin/ping   <span class="comment"># 只加个effective</span></span><br><span class="line">hosted@Desktop:~$ <span class="built_in">getcap</span> /bin/ping</span><br><span class="line">/bin/ping =</span><br><span class="line">hosted@Desktop:~$ ping 127.0.0.1</span><br><span class="line">ping: socket: Operation not permitted</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="Cap能力"><a href="#Cap能力" class="headerlink" title="Cap能力"></a>Cap能力</h1><ul>
<li><code>Capability</code> 用<strong>更小的粒度控制超级管理员权限</strong>,可以避免使用 root 权限。</li>
<li>软件开发者应该为二进制文件赋予<strong>最小权限</strong>，而不是使用强大的setuid。</li>
<li><code>Capabilities</code> 的主要思想在于<strong>分割root用户的特权</strong>，即将root的特权分割成不同的能力，每种能力代表一定的特权操作</li>
<li>在4.4 版本中, Linux将root权限划分为38种能力</li>
</ul>
<table>
<thead>
<tr>
<th>Cap能力</th>
<th>序号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><span class="label danger">CAP_CHOWN</span></td>
<td>0</td>
<td>修改文件属主,  属组, 允许使用 <code>chown</code></td>
</tr>
<tr>
<td><span class="label danger">CAP_DAC_OVERRIDE</span></td>
<td>1</td>
<td>忽略对文件的所有DAC访问限制</td>
</tr>
<tr>
<td><code>CAP_DAC_READ_SEARCH</code></td>
<td>2</td>
<td>忽略所有对读、搜索操作的限制,  <code>DAC_READ_SEARCH</code>是<code>DAC_OVERRIDE</code>的子集</td>
</tr>
<tr>
<td><span class="label danger"> CAP_FOWNER</span></td>
<td>3</td>
<td>忽略文件属主ID必须和进程用户ID相匹配的限制<br><strong>最后操作的UID,覆盖文件的先前的UID</strong><br>不覆盖DAC, MAC的限制</td>
</tr>
<tr>
<td><code>CAP_FSETID</code></td>
<td>4</td>
<td>允许设置文件的 <code>setuid</code> 位,  确保在文件被修改后不修改setuid/setgid位<br>当文件被修改后,会清除掉文件的<code>setuid/setgid</code>位,而设定<code>CAP_FSETID</code>后将保证<code>setuid/setgid</code> 位不被清除.但这对 <code>chown</code> 函数无用</td>
</tr>
<tr>
<td><span class="label danger"> CAP_KILL</span></td>
<td>5</td>
<td>对不属于自己的进程发送信号<br>普通用户要用<code>/bin/kill</code>这种绝对路径的方式,而不能用<code>kill</code>这种方式</td>
</tr>
<tr>
<td><code>CAP_SETGID</code></td>
<td>6</td>
<td>允许改变进程的组ID, 允许进程使用setgid,  setgroups函数<br>与文件的sgid无关<br>通过UNIX域套接字传递套接字凭证时伪造GID</td>
</tr>
<tr>
<td><span class="label danger">CAP_SETUID</span></td>
<td>7</td>
<td>允许改变进程的用户ID, 允许进程使用setuid函数<br>与文件的suid无关<br>通过UNIX域套接字传递套接字凭证时伪造UID</td>
</tr>
<tr>
<td><code>CAP_SETPCAP</code></td>
<td>8</td>
<td>允许向其他进程转移能力以及删除其他进程的能力<br><strong>事实上只有init进程可以设定其它进程的能力,而其它程序无权对进程授权</strong><br>root用户也不能对其它进程的能力进行修改<br>只能对当前进程通过cap_set_proc等函数进行修改,而子进程也会继承这种能力.</td>
</tr>
<tr>
<td><code>CAP_LINUX_IMMUTABLE</code></td>
<td>9</td>
<td>允许修改文件的不可修改(<strong>IMMUTABLE</strong>)和只添加(<strong>APPEND-ONLY</strong>)属性<br>允许普通用户执行<code>chattr</code>, 添加以上两个属性<br><strong>只能对自己的文件授权</strong>(immutable/append-only)权限,对于其它用户的权限LINUX_IMMUTABLE不起作用(root除外)</td>
</tr>
<tr>
<td><code>CAP_NET_BIND_SERVICE</code></td>
<td>10</td>
<td>允许绑定到<strong>小于1024</strong>的端口</td>
</tr>
<tr>
<td><del><code>CAP_NET_BROADCAST</code></del></td>
<td>11</td>
<td>允许网络广播和多播访问<br>事实上它<strong>并没有被应用</strong>,普通用户也可以使用 <code>ping -b  192.168.0.255</code> 也发送广播包</td>
</tr>
<tr>
<td><code>CAP_NET_ADMIN</code></td>
<td>12</td>
<td>允许执行<strong>网络管理任务</strong>:接口,防火墙和路由等</td>
</tr>
<tr>
<td><code>CAP_NET_RAW</code></td>
<td>13</td>
<td>使用原始(raw)套接字,  为透明代理绑定任何地址。</td>
</tr>
<tr>
<td><code>CAP_IPC_LOCK</code></td>
<td>14</td>
<td>允许锁定共享内存片段<br>root和普通用户都可以用<code>mlock</code>来锁定内存,区别是root不受ulimit下的锁定内存大小限制,而普通用户会受到影响.<br>锁定内存 (<code>mlock</code>(2)，<code>mlockall</code>(2)，<code>mmap</code>(2)，<code>shmctl</code>(2))。</td>
</tr>
<tr>
<td><code>CAP_IPC_OWNER</code></td>
<td>15</td>
<td>忽略IPC所有权检查<br>允许普通用户读取/更改 root用户创建的权限为600的共享内存(<code>shmget</code>)<br>可以修改, 但不可以脱离, 删除共享内存</td>
</tr>
<tr>
<td><code>CAP_SYS_MODULE</code></td>
<td>16</td>
<td>允许普通用户插入和删除内核模块</td>
</tr>
<tr>
<td><code>CAP_SYS_RAWIO</code></td>
<td>17</td>
<td>允许用户打开I/O端口,并读取修改端口数据,一般用 <code>ioperm/iopl</code> 函数</td>
</tr>
<tr>
<td><code>CAP_SYS_CHROOT</code></td>
<td>18</td>
<td>允许使用<code>chroot()</code></td>
</tr>
<tr>
<td><code>CAP_SYS_PTRACE</code></td>
<td>19</td>
<td>允许跟踪任何进程,  使用<code>ptrace()</code> <br>默认普通用户不能跟踪任何进程,不包括它自己的进程,<br>CAP_SYS_PTRACE可以帮助普通用户跟踪任何进程.</td>
</tr>
<tr>
<td><code>CAP_SYS_PACCT</code></td>
<td>20</td>
<td>允许配置进程记帐process  accounting<br>要完成进程记帐,要保证有写入文件的权限<br>程序通过``acct<code>函数,将进程的记帐写入到指定文件中,如果</code>acct<code>函数的参数为</code>NULL`,则关闭进程记帐.</td>
</tr>
<tr>
<td><code>CAP_SYS_ADMIN</code></td>
<td>21</td>
<td>允许执行系统管理任务,如挂载/卸载文件系统,设置磁盘配额,开/关交换设备和文件等</td>
</tr>
<tr>
<td><code>CAP_SYS_BOOT</code></td>
<td>22</td>
<td>允许普通用使用<code>reboot()</code>函数,  非<code>reboot</code>命令</td>
</tr>
<tr>
<td><code>CAP_SYS_NICE</code></td>
<td>23</td>
<td>允许提升优先级,设置其它进程的优先级</td>
</tr>
<tr>
<td><code>CAP_SYS_RESOURCE</code></td>
<td>24</td>
<td>忽略资源限制,  允许普通用户使用setrlimit()来突破ulimit的限制</td>
</tr>
<tr>
<td><code>CAP_SYS_TIME</code></td>
<td>25</td>
<td>允许改变系统时钟</td>
</tr>
<tr>
<td><code>CAP_SYS_TTY_CONFIG</code></td>
<td>26</td>
<td>允许配置TTY设备</td>
</tr>
<tr>
<td><code>CAP_MKNOD</code></td>
<td>27</td>
<td>允许使用 <code>mknod</code> 系统调用</td>
</tr>
<tr>
<td><code>CAP_LEASE</code></td>
<td>28</td>
<td>允许在文件上建立租借锁</td>
</tr>
<tr>
<td><code>CAP_AUDIT_WRITE</code></td>
<td>29</td>
<td>向内核审计日志写记录。</td>
</tr>
<tr>
<td><code>CAP_AUDIT_CONTROL</code></td>
<td>30</td>
<td>启用和禁用内核审计；修改审计过滤器规则；提取审计状态和过滤规则。</td>
</tr>
<tr>
<td><code>CAP_SETFCAP</code></td>
<td>31</td>
<td>允许在指定的程序上授权能力给其它程序</td>
</tr>
<tr>
<td><code>CAP_MAC_OVERRIDE</code></td>
<td>32</td>
<td>忽略MAC访问控制</td>
</tr>
<tr>
<td><code>CAP_MAC_ADMIN</code></td>
<td>33</td>
<td>允许配置MAC或状态改变</td>
</tr>
<tr>
<td><code>CAP_SYSLOG</code></td>
<td>34</td>
<td>允许配置内核syslog,  执行特权 syslog(2) 操作</td>
</tr>
<tr>
<td><code>CAP_WAKE_ALARM</code></td>
<td>35</td>
<td>触发将唤醒系统的东西 (设置  CLOCK_REALTIME_ALARM 和 CLOCK_BOOTTIME_ALARM 定时器)</td>
</tr>
<tr>
<td><code>CAP_BLOCK_SUSPEND</code></td>
<td>36</td>
<td>可以阻塞系统挂起(epoll(7)  EPOLLWAKEUP，/proc/sys/wake_lock)的特性。</td>
</tr>
<tr>
<td><code>CAP_AUDIT_READ</code></td>
<td>37</td>
<td>允许通过一个多播  netlink socket 读取审计日志。</td>
</tr>
</tbody></table>
<h1 id="Cap能力继承"><a href="#Cap能力继承" class="headerlink" title="Cap能力继承"></a>Cap能力继承</h1><ul>
<li>Linux系统中的能力分为两部分，一部分是进程能力，一部分是文件能力，而Linux内核最终检查的是进程能力中的<code>Effective</code>。而文件能力和进程能力中的其他部分用来完整能力继承、限制等方面的内容。</li>
<li>查看 <code>capabilities</code> 的man手册, 其中描述能力继承公式如下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">公式一: P&#39;(ambient)     &#x3D; (file is privileged) ? 0 : P(ambient)       &#x2F;&#x2F;file cap, suid, sgid</span><br><span class="line">公式二: P&#39;(permitted)   &#x3D; (P(inheritable) &amp; F(inheritable)) | (F(permitted) &amp; cap_bset) | P&#39;(ambient)</span><br><span class="line">公式三: P&#39;(effective)   &#x3D; F(effective) ? P&#39;(permitted) : P&#39;(ambient)</span><br><span class="line">公式四: P&#39;(inheritable) &#x3D; P(inheritable)    [i.e., unchanged]       &#x2F;&#x2F;inheritable不变</span><br><span class="line"></span><br><span class="line">说明:</span><br><span class="line">    P	  进程能力, execve前</span><br><span class="line">    P&#39;  进程能力, execve后</span><br><span class="line">    F   文件能力</span><br><span class="line">    cap_bset, 系统能力边界值. 为root进程所具有的所有能力</span><br><span class="line">privileged file 是指有能力或设置suid或sgid的可执行文件</span><br></pre></td></tr></table></figure>

<ul>
<li><p>梳理一下上述的公式</p>
<ul>
<li>上述公式针对的是 <code>execve()</code>, <code>fork()</code> 会完整继承父进程的cap能力</li>
<li>文件 <code>Inheritable</code> 与进程 <code>Inheritable</code> 没关系, 根据<strong>公式四</strong></li>
<li>文件能力只传递在子进程的 <code>Permitted</code> 集合中,  根据<strong>公式二</strong></li>
<li><code>Effective</code> 才是进程特权操作判别的能力集<ul>
<li>子进程 <code>Effective</code> 才是正式继承</li>
<li>两种方法<ul>
<li>子进程手动添加能力, <code>capset()</code></li>
<li>子进程可执行文件, 开启 <code>Effective</code> 标志位, 根据<strong>公式三</strong></li>
</ul>
</li>
</ul>
</li>
<li>想要子进程继承父进程能力, 父进程的 <code>Inheritable</code> 和 子进程文件的 <code>Inheritable</code> 很关键, 根据<strong>公式二</strong></li>
<li><code>Ambient</code> 是 4.4之后支持的能力集, 在不支持该能力集的时候, 将公式中的 <code>Ambient</code> 能力集认作 0 即可</li>
</ul>
</li>
<li><p>普通用户执行了 <code>execve()</code>，那么 <code>Permitted</code> 和 <code>Effective</code> 集合中的 <code>capabilities</code> 都会被清空, <code>Inheritable</code> 未被清空</p>
<ul>
<li>root切换到普通用户, <code>Permitted</code> 和 <code>Effective</code> 同样会被清空, 除非设置了 <code>SECBIT_KEEP_CAPS</code> 或更宽泛的 <code>SECBIT_NO_SETUID_FIXUP</code></li>
</ul>
</li>
<li><p>普通用户切换root, 现有的P集合拷贝到E集合</p>
</li>
</ul>
<blockquote class="blockquote-center"><p>如果一个文件系统的用户ID从0变成非0，那么以下的能力在E集合中清除：CAP_CHOWN, CAP_DAC_OVERRIDE,  CAP_DAC_READ_SEARCH,  CAP_FOWNER,  CAP_FSETID,  CAP_LINUX_IMMUTABLE  (since  Linux  2.2.30),  CAP_MAC_OVERRIDE,  CAP_MKNOD，如果一个文件系统的用户ID从0变成非0，那么在P集合中使能的能力将设置到E集合中。</p>
</blockquote>

<ul>
<li>想要正确继承能力<ul>
<li><code>fork</code>, 完整继承父进程能力</li>
<li><code>exec</code>, 只有三种情况可以<ul>
<li>子进程 <strong>euid是root</strong><ul>
<li>父进程是特权进程, 子进程也必然是root(除非子进程中有降权操作)</li>
<li>父进程是普通进程, 则子进程应是 <code>setuid-root</code> 进程</li>
</ul>
</li>
<li>子进程<strong>有文件能力</strong>, 关键是 <strong><code>Effective</code> 启用</strong>, <code>Inheritable</code> 能力集包含父进程 <code>Inheritable</code> 能力集</li>
<li><strong><code>Ambient</code> 能力</strong>, 此情景下子进程可以是普通可执行文件(没有文件能力, 没有suid)<ul>
<li>前文有提到, <code>Ambient</code> 的提出就是为了解决非root用户使用 <code>exec</code> 执行一个程序时候如何保留权限的问题</li>
<li>此种创景参见上述继承公式, 公式一, 二, 三</li>
<li>子进程可执行文件非 <code>setuid-root</code>, 也没有文件能力, 此时子进程继承父进程 <code>Ambient</code> 能力集, 根据<strong>公式一</strong></li>
<li>子进程没有文件能力(fI, fP均为0), 则此时子进程 <code>Permitted</code> = <code>Ambient</code>, 根据<strong>公式三</strong></li>
<li>子进程没有文件能力(fE为0), 此此时子进程 <code>Effective</code> = <code>Ambient</code>, 根据<strong>公式三</strong></li>
<li>参考man手册关于 <code>Ambient</code> 的描述, <code>Ambient</code> 可以通过 <code>prctl</code> 设置</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>还有一种情况, <strong>子进程是脚本文件</strong>, 而非可执行文件<ul>
<li>脚本的话会涉及解释器, 如 <code>bash, python, perl</code></li>
<li>这种情况<strong>实质上进行了两次 <code>execve</code></strong></li>
<li>因此想要脚本中执行的命令继承到权限, 需要保证解析器, 执行命令也满足上述继承能力的场景<ul>
<li>但其实也就只有<code>euid=root</code> 和 <strong>文件能力</strong> 两条路</li>
</ul>
</li>
<li>本质上需要<strong>保证整个链路上的权限</strong></li>
</ul>
</li>
</ul>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="https://ivanzz1001.github.io/records/post/linux/2017/11/16/linux-unix_uid" target="_blank" rel="noopener">Linux进程控制之uid/euid/suid</a></li>
<li><a href="https://www.anquanke.com/post/id/86979" target="_blank" rel="noopener">【安全科普】Linux提权——利用可执行文件SUID</a></li>
<li><a href="https://www.hrwhisper.me/introduction-to-linux-capability/" target="_blank" rel="noopener">Linux setuid与权能介绍 - 细语呢喃</a></li>
<li><a href="https://www.cnblogs.com/iamfy/archive/2012/09/20/2694977.html" target="_blank" rel="noopener">[转载] Linux的capability深入分析</a></li>
<li><a href="http://www.freeoa.net/osuport/sysadmin/linux-capabilities-intro_3313.html" target="_blank" rel="noopener">Linux Capabilities 简介及使用</a></li>
<li><a href="https://www.cnblogs.com/gordon0918/p/5328436.html" target="_blank" rel="noopener">Linux能力(capability)机制的继承</a></li>
<li><a href="http://rk700.github.io/2016/10/26/linux-capabilities/" target="_blank" rel="noopener">Linux的capabilities机制</a></li>
<li><a href="https://jin-yang.github.io/post/linux-capabilities-introduce.html" target="_blank" rel="noopener">Linux 系统用户</a></li>
<li><a href="https://blog.csdn.net/fivedragon/article/details/676849" target="_blank" rel="noopener">利用capability特征加强Linux系统安全</a></li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Capabilities</tag>
      </tags>
  </entry>
  <entry>
    <title>【随笔】时令相关</title>
    <url>/posts/3100115695.html</url>
    <content><![CDATA[<p><img src="https://i.loli.net/2019/12/23/YRZP1Jiya2VkvGd.png" alt="冬至与三九"></p>
<a id="more"></a>

<h1 id="冬至与三九"><a href="#冬至与三九" class="headerlink" title="冬至与三九"></a>冬至与三九</h1><blockquote class="blockquote-center"><p>一九二九不出手，<br>三九四九冰上走，<br>五九六九沿河看柳。<br>七九河开，八九燕来，<br>九九加一九，耕牛遍地走。</p>
</blockquote>

<ul>
<li>数九： <strong>冬至</strong>开始， 每九天记为一九</li>
</ul>
<div class="note warning">
            <p>数九说法并不一致， 百度百科明确指出数九以冬至开始计算是一种错误的算法， 举出了俗语：“夏至三庚入伏，冬至逢壬数九”，<br>但那都是老黄历了，现代人不会去想今天是乙酉日还是戍子日，大家没有那么多精力去想这些，只是简单的知道冬至开始数九，冬至开始就是北方最冷的时节<br>各个日历上也把冬至作为数九的第一天</p>
          </div>


<h1 id="三伏天"><a href="#三伏天" class="headerlink" title="三伏天"></a>三伏天</h1><blockquote class="blockquote-center"><p>历例曰：三伏者，四时皆以相生，立春以木代水，水生木也；立夏以火代木，木生火也；立冬以水代金，金生水也。至于立秋以金代火，金畏火克，故至庚日，则必伏藏。庚者，金也。金气伏藏，则火益炽。三，阳数也。故夏至后第三庚为初伏，第四庚为中伏，立秋后初庚为末伏，谓之三伏。如夏至日得庚，便为初庚。立秋日得庚，亦即为末伏。<br>————《星历考原‧日时总类》“三伏”条</p></p>
</blockquote>


<ul>
<li>三伏： 初伏，中伏，末伏<ul>
<li>一年中最热的时节， <strong>热在三伏</strong></li>
<li>“伏”表示阴气受阳气所迫藏伏地下</li>
</ul>
</li>
<li>两个关键节点： <strong>夏至</strong> 和 <strong>立秋</strong></li>
<li>具体日期确定：<strong>节气 + 干支</strong><ul>
<li><strong>庚日</strong>： 天干地支记日<ul>
<li>纪日包含<strong>庚</strong></li>
<li>天干十天一循环： 每十天一个<strong>庚日</strong></li>
</ul>
</li>
<li>初伏：<strong>夏至</strong> 后第三个庚日， 10天</li>
<li>中伏：<strong>夏至</strong> 后第四个庚日， 10/20天<ul>
<li>第五个庚日在立秋后， 10天</li>
<li>第五个庚日在立秋前， 20天</li>
</ul>
</li>
<li>末伏：<strong>立秋</strong> 后第一个庚日， 10天</li>
</ul>
</li>
</ul>
<h1 id="农历"><a href="#农历" class="headerlink" title="农历"></a>农历</h1><iframe src="//player.bilibili.com/player.html?aid=73495129&cid=125714066&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<ul>
<li><p>农历</p>
<ul>
<li>阴阳历： 兼顾太阳， 月亮与地球关系的历法</li>
<li>阴历： 月相， 以月亮绕地球一周为一个月，共计十二个月<ul>
<li>正月，二月，…, 冬月，腊月</li>
</ul>
</li>
<li>阳历， 日相， 以太阳周年运动来安排<ul>
<li>公历</li>
<li>二十四节气</li>
</ul>
</li>
</ul>
</li>
<li><p>闰年 </p>
<ul>
<li>先说结论：四年一闰， 100年不闰， 400年闰</li>
<li>地球绕太阳一周为 <strong>365.2422</strong>天 (365天5小时48分45.5秒)</li>
<li>若始终以365为一年，常年累月误差会特别大<ul>
<li>每年的误差是，<strong>0.2422天</strong></li>
</ul>
</li>
<li><strong>四年一闰</strong>：4年积累的误差为， 0.9688天， 接近一天</li>
<li><strong>100年不闰</strong>：100年积累的误差为， 24.22天， 单纯以四年一闰的方法， 100年补齐25天， 因此加上新的规则， 100年不闰， 如此100年内补齐24天</li>
<li><strong>400年闰</strong>， 根据上两条的规则， 每100年的误差为0.22天， 400年则积累为0.88天， 400年在补齐一天<ul>
<li><del>这么一算其实按500年会更划算， 500年积累1.1天，我什么都不敢说</del></li>
<li>回归年 VS 恒星年<ul>
<li>回归年：365.24219天， <strong>春分点回归年</strong></li>
<li>恒星年：365.25636天， </li>
<li>岁差：两者有20分24.5秒的差距<ul>
<li>说到底就是地轴歪了的锅</li>
<li>黄赤交角：黄道&amp;赤道</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>闰月</p>
<ul>
<li>协调阴历与阳历的矛盾，防止与四时脱节</li>
<li>结论： 十九年七闰， 非固定的</li>
<li>以二十四节气的<strong>中气</strong>为基准计算闰几月</li>
<li>朔望月， 初一为朔，十五为望， 29.53059天</li>
<li>阴阳历误差<ul>
<li>阴历年的天数为： 354.36天</li>
<li>阳历年的天数为：365.2422天， 两者相差10.88天</li>
<li>三年相差32.64天， 差不多是一个月， <del>三年可一闰</del><ul>
<li>但误差依旧有点大， 29.53 和 32.64天</li>
</ul>
</li>
<li>古人计算出了误差较小的， 19年7闰<ul>
<li><code>354.36 * 19 + 7 * 29.53 = 6939.55</code></li>
<li><code>365.2422 * 19 = 6939.6019</code></li>
<li>近7000天，误差仅为0.0518</li>
</ul>
</li>
</ul>
</li>
<li>29.53天， 大月30天， 小月29天， 根据天文观测确定</li>
</ul>
</li>
<li><p>闰的是那个月？</p>
<ul>
<li>24节气， 节气中气交替</li>
<li>春分，秋分， 夏至，冬至是四个重要的中气</li>
<li><strong>每一个月份需要对准唯一一个中气</strong>， 参见下表</li>
<li>农历月的起止是从一个朔日到另一个朔日， 这段时间需要包含对应的中气</li>
<li>闰月的情况：一个朔望月内没有找到对应的中气， 则闰月， 上一个周期中气对应的月份</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">雨水</th>
<th align="center">春分</th>
<th>谷雨</th>
<th align="center">小满</th>
<th align="center">夏至</th>
<th align="center">大暑</th>
<th align="center">处暑</th>
<th align="center">秋分</th>
<th align="center">霜降</th>
<th align="center">小雪</th>
<th align="center">冬至</th>
<th align="center">大寒</th>
</tr>
</thead>
<tbody><tr>
<td align="center">正月</td>
<td align="center">二月</td>
<td>三月</td>
<td align="center">四月</td>
<td align="center">五月</td>
<td align="center">六月</td>
<td align="center">七月</td>
<td align="center">八月</td>
<td align="center">九月</td>
<td align="center">十月</td>
<td align="center">冬月</td>
<td align="center">腊月</td>
</tr>
</tbody></table>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="https://mp.weixin.qq.com/s/-aHXCMR5vjnaG3KBOG0qRQ" target="_blank" rel="noopener">果叽表情包文章</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E4%B9%9D" target="_blank" rel="noopener">数九 | 维基百科</a></li>
<li><a href="http://www.flx9.com/tuijian/13420578" target="_blank" rel="noopener">“冬至逢壬才数九”，数九啥讲究，今年春节是“几九”，会冷吗？</a></li>
<li><a href="https://baike.baidu.com/item/%E4%B8%89%E4%BC%8F/2743980" target="_blank" rel="noopener">三伏（科普知识）| 百度百科</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E4%B8%89%E4%BC%8F" target="_blank" rel="noopener">三伏 | 维基百科</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E9%98%B4%E9%98%B3%E5%8E%86" target="_blank" rel="noopener">阴阳历 | 维基百科</a></li>
<li><a href="https://www.zhihu.com/question/34497296/answer/349563707" target="_blank" rel="noopener">苏月：回归年和恒星年为何不一样？</a></li>
</ul>
]]></content>
      <categories>
        <category>随笔</category>
      </categories>
      <tags>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo写作技巧</title>
    <url>/posts/3662325414.html</url>
    <content><![CDATA[<h1 id="vscode辅助插件"><a href="#vscode辅助插件" class="headerlink" title="vscode辅助插件"></a>vscode辅助插件</h1><ul>
<li>Markdown All in One, 主要是快捷输入</li>
<li>vscode-hexo-utils, 便于在vscode进行hexo的管理</li>
<li>PicGo, 图床插件</li>
</ul>
<h1 id="Markdown语法"><a href="#Markdown语法" class="headerlink" title="Markdown语法"></a>Markdown语法</h1><table>
<thead>
<tr>
<th align="left">元素</th>
<th align="left">Markdown 语法</th>
</tr>
</thead>
<tbody><tr>
<td align="left">标题</td>
<td align="left"><code># 标题1</code> <code>## h2</code> <code>### h3</code></td>
</tr>
<tr>
<td align="left">加粗</td>
<td align="left"><code>**文字加粗**</code></td>
</tr>
<tr>
<td align="left">引用</td>
<td align="left"><code>&gt; 引用文字</code></td>
</tr>
<tr>
<td align="left">有序列表</td>
<td align="left"><code>1. 第一项</code> <code>2. 第二项</code> <code>3. 第三项</code></td>
</tr>
<tr>
<td align="left">无序列表</td>
<td align="left"><code>- 第一项</code> <code>- 第二项</code> <code>- 第三项</code></td>
</tr>
<tr>
<td align="left">链接</td>
<td align="left"><code>[链接](url)</code></td>
</tr>
<tr>
<td align="left">图片</td>
<td align="left"><code>![图片](image.jpg)</code></td>
</tr>
<tr>
<td align="left">水平线</td>
<td align="left"><code>---</code></td>
</tr>
<tr>
<td align="left">代码</td>
<td align="left">`code`</td>
</tr>
<tr>
<td align="left">代码块</td>
<td align="left">```code snippet```</td>
</tr>
</tbody></table>
<p> <a href="https://www.markdownguide.org/cheat-sheet/" target="_blank" rel="noopener">Markdown Cheat Sheet</a></p>
<a id="more"></a>

<h1 id="Hexo-标签"><a href="#Hexo-标签" class="headerlink" title="Hexo 标签"></a>Hexo 标签</h1><h2 id="文本居中"><a href="#文本居中" class="headerlink" title="文本居中"></a>文本居中</h2><blockquote class="blockquote-center"><p>bla bla bla</p>
</blockquote>

<ul>
<li>使用方法： 
{% cq %}blah blah blah{% endcq %}`


</li>
</ul>
<h2 id="代码块标签"><a href="#代码块标签" class="headerlink" title="代码块标签"></a>代码块标签</h2><figure class="highlight js"><figcaption><span>"hello world"</span><a href="http://www.google.com" target="_blank" rel="noopener">谷歌</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>代码块标签<ul>
<li><code>language</code>：语言名称</li>
<li><code>title</code>：代码块标题，将会显示在左上角, 若不设定title则三个空格以上</li>
<li><code>url</code>：链接地址<ul>
<li>如果没有指定 link text 则会在右上角显示 link</li>
<li>以url为分界， 左侧第一个单词为langauge, 其余均为title</li>
<li>右侧识别为link_text</li>
</ul>
</li>
<li><code>link text</code>：链接名称，指定 url 后有效，将会显示在右上角<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock [title] [lang:language] [url] [link text] [additional options] %&#125;</span><br><span class="line">code snippet</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>反斜杠代码块<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#96;&#96;&#96; [language] [title] [url] [link text]</span><br><span class="line">code snippet</span><br><span class="line">&#96;&#96;&#96;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="note标签"><a href="#note标签" class="headerlink" title="note标签"></a>note标签</h2><div class="note primary">
            <p>primary note tag</p>
          </div>`
<div class="note success">
            <p>success  note tag</p>
          </div>
<div class="note info">
            <p>info note tag</p>
          </div>
<div class="note warning">
            <p>warning  note tag</p>
          </div>
<div class="note danger">
            <p>danger note tag</p>
          </div>
<div class="note undefined">
            <p>undefined note tag</p>
          </div>


<ul>
<li>note标签: 类名包含<code>default</code>, <code>primary</code>, <code>success</code>, <code>info</code>, <code>warning</code>, <code>danger</code><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% note [class] %&#125;</span><br><span class="line">文本内容 (支持行内标签)</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="label标签"><a href="#label标签" class="headerlink" title="label标签"></a>label标签</h2><p>I heard the echo, <span class="label default">from the valleys and the heart</span> Open to the lonely soul of <span class="label info">sickle harvesting</span><br>Repeat outrightly, but also repeat the well-being of<br>Eventually <span class="label warning">swaying in the desert oasis</span></p>
<span class="label success">I believe</span> I am
<span class="label primary">Born as the bright summer flowers</span>
<p>Do not withered undefeated fiery demon rule<br>Heart rate and breathing to bear <span class="label danger">the load of the cumbersome</span><br>Bored</p>
<ul>
<li>lable标签 同note标签, <code><span class="label [class]">text</span></code></li>
</ul>
<h2 id="button按钮"><a href="#button按钮" class="headerlink" title="button按钮"></a>button按钮</h2><a class="btn" href="#"><i class="fa fa-home fa-fw fa-lg"></i>文本 & 大图标 (固定宽度)</a>

<ul>
<li>button, <strong>{% btn /path/to/url/, text, icon [class], title %}</strong><ul>
<li>图标 ID 来源于 <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank" rel="noopener">FontAwesome</a></li>
</ul>
</li>
</ul>
<h2 id="tab标签页"><a href="#tab标签页" class="headerlink" title="tab标签页"></a>tab标签页</h2><div class="tabs" id="tab标签列表"><ul class="nav-tabs"><li class="tab active"><a href="#tab标签列表-1">标签页1</a></li><li class="tab"><a href="#tab标签列表-2">标签页2</a></li><li class="tab"><a href="#tab标签列表-3">标签页3</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab标签列表-1"><p>  标签页1文本内容</p></div><div class="tab-pane" id="tab标签列表-2"><p>  标签页2文本内容</p></div><div class="tab-pane" id="tab标签列表-3"><p>  标签页3文本内容</p></div></div></div>

<ul>
<li>tab标签， 快速创建标签卡<ul>
<li>Unique name: 全局唯一的 Tab 名称，将作为各个标签页的 id 属性前缀</li>
<li>index: 当前激活的标签页索引，如果未定义则默认选中显示第一个标签页，如果设为 - 1 则默认隐藏所有标签页</li>
<li>Tab caption: 当前标签页的标题，如果不指定则会以 Unique name 加上索引作为标题</li>
<li>icon: 在标签页标题中添加 Font awesome 图标<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% tabs [Unique name], [index] %&#125;</span><br><span class="line">  &lt;!-- tab [Tab caption]@[icon] --&gt;</span><br><span class="line">  标签页内容（支持行内标签）</span><br><span class="line">  &lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="引用站内链接"><a href="#引用站内链接" class="headerlink" title="引用站内链接"></a>引用站内链接</h2><a href="/posts/3804610536.html" title="VSCode">VSCode</a>

<ul>
<li>使用语法<ul>
<li>渲染为<strong>文章地址</strong>：{% post_path slug %}</li>
<li>渲染为<strong>跳转链接</strong>：{% post_link slug [title] %}</li>
<li>slug指<strong>Markdown 文件名</strong></li>
</ul>
</li>
</ul>
<h2 id="插入swig"><a href="#插入swig" class="headerlink" title="插入swig"></a>插入swig</h2><ul>
<li>为防止swig语法被渲染， 使用<code>raw</code>标签<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="Snippet"><a href="#Snippet" class="headerlink" title="Snippet"></a>Snippet</h1><div class="note info">
            <p>snippet相关语法参见 <a href="/posts/3804610536.html" title="VSCode">VSCode</a></p>
          </div>

<ul>
<li>一些设置<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">//markdown启用自动补全</span></span><br><span class="line">"[markdown]": &#123;</span><br><span class="line">  "editor.quickSuggestions": true //预设 false</span><br><span class="line">&#125;,</span><br><span class="line">"editor.snippetSuggestions": "top"    //优先显示snippet</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">//For Hexo</span></span><br><span class="line">"centerquote": &#123;</span><br><span class="line">	"prefix": "cq",</span><br><span class="line">	"body": "&#123;% cq %&#125; $1 &#123;% endcq %&#125;\n",</span><br><span class="line">	"description": "文本居中"</span><br><span class="line">&#125;,</span><br><span class="line">"note tag": &#123;</span><br><span class="line">	"prefix": "note",</span><br><span class="line">	"body": [</span><br><span class="line">		"&#123;% note $&#123;1|primary, success, info, warning, danger|&#125; %&#125;",</span><br><span class="line">		"$2",</span><br><span class="line">		<span class="string">"&#123;% endnote %&#125;\n"</span></span><br><span class="line">	],</span><br><span class="line">	"description": "note 标签"</span><br><span class="line">&#125;,</span><br><span class="line">"label tag": &#123;</span><br><span class="line">	"prefix": "label",</span><br><span class="line">	"body": "&#123;% label $&#123;1|primary, success, info, warning, danger|&#125;@$2 %&#125;\n",</span><br><span class="line">	"description": "label 标签"</span><br><span class="line">&#125;,</span><br><span class="line">"button tag": &#123;</span><br><span class="line">	"prefix": ["button", "btn"],</span><br><span class="line">	"body": "&#123;% btn $&#123;1:/path/to/url/&#125;, $&#123;2:text&#125;, $&#123;3:icon [class]&#125; %&#125;",</span><br><span class="line">	"description": "按钮标签"</span><br><span class="line">&#125;,</span><br><span class="line">"tab tag": &#123;</span><br><span class="line">	"prefix": "tab",</span><br><span class="line">	"body": [</span><br><span class="line">		"&#123;% tabs $&#123;1:标签列表名&#125; %&#125;",</span><br><span class="line">		"&lt;!-- tab $&#123;2:标签页1&#125; --&gt;",</span><br><span class="line">		"$3",</span><br><span class="line">		"&lt;!-- endtab --&gt;",</span><br><span class="line">		"&lt;!-- tab $&#123;4:标签页2&#125; --&gt;",</span><br><span class="line">		"$5",</span><br><span class="line">		"&lt;!-- endtab --&gt;",</span><br><span class="line">		"&lt;!-- tab $&#123;6:标签页3&#125; --&gt;",</span><br><span class="line">		"$7",</span><br><span class="line">		"&lt;!-- endtab --&gt;",</span><br><span class="line">		<span class="string">"&#123;% endtabs %&#125;"</span></span><br><span class="line">	],</span><br><span class="line">	"description": "按钮标签"</span><br><span class="line">&#125;,</span><br><span class="line">"post link": &#123;</span><br><span class="line">	"prefix": "link",</span><br><span class="line">	"body": "&#123;% post_link $&#123;1:markdown文件名&#125; $&#123;2:$1&#125; %&#125;",</span><br><span class="line">	"description": "站内链接"</span><br><span class="line">&#125;,</span><br><span class="line">"linkcard": &#123;</span><br><span class="line">	"prefix": "link",</span><br><span class="line">	"body": "&lt;a href=\"$&#123;1:#&#125;\" class=\"LinkCard\"&gt;$2&lt;/a&gt;",</span><br><span class="line">	"description": "卡片链接"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><ul>
<li><a href="https://hexo.io/zh-cn/docs/tag-plugins" target="_blank" rel="noopener">标签插件</a></li>
<li><a href="http://yearito.cn/posts/hexo-writing-skills.html" target="_blank" rel="noopener">Hexo 搭建个人博客系列：写作技巧篇</a></li>
</ul>
]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
        <tag>Snippet</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客部署</title>
    <url>/posts/37349663.html</url>
    <content><![CDATA[<h1 id="Github-Page部署"><a href="#Github-Page部署" class="headerlink" title="Github Page部署"></a>Github Page部署</h1><ol>
<li><a href="https://github.com/new" target="_blank" rel="noopener">New repository</a></li>
<li>必填的只有Repository name<ol>
<li>格式为：<strong>{user_name}.github.io</strong></li>
<li>user_name必须与github用户名一致</li>
</ol>
</li>
</ol>
<h1 id="配置ssh与git"><a href="#配置ssh与git" class="headerlink" title="配置ssh与git"></a>配置ssh与git</h1><ul>
<li>生成SSH key, 邮箱改为对应的邮箱名， 然后一路回车</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C your_email@youremail.com</span><br></pre></td></tr></table></figure>

<p>上述命令会在主目录下生成<code>.ssh</code>文件夹, 复制文件夹下<code>id_rsa.pub</code>内容<br><a href="https://github.com/settings/ssh/new" target="_blank" rel="noopener">添加SSH key</a>: 右上角头像-&gt;settings-&gt;SSH and GPG keys-&gt;new SSH Key</p>
<ul>
<li>将上述操作复制的内容添加到key中</li>
<li>填好title，然后add SSH key, 添加key</li>
</ul>
<p>验证github, <code>ssh -T git@github.com</code></p>
<ul>
<li>第一次会出现 <strong>Are you sure you want to continue connecting (yes/no)?</strong> </li>
<li>这时应该输入yes</li>
<li>当出现：<strong>You’ve successfully authenticated, but GitHub does not provide shell access.</strong>，说明成功了<br>配置用户名和邮箱, 用于每次提交时的个人信息记录</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name your name</span><br><span class="line">git config --global user.email your_email@youremail.com</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h1 id="Hexo-持续集成"><a href="#Hexo-持续集成" class="headerlink" title="Hexo 持续集成"></a>Hexo 持续集成</h1><p>项目配置</p>
<ul>
<li>备份博客源文件, 在本地仓库创建 hexo 分支</li>
<li>密钥配置<ul>
<li><code>ssh-keygen</code></li>
<li>项目页.Settings.Deploy keys.Add deploy key</li>
<li>将deploy_key.pub公钥内容复制上去，<strong>勾选：Allow write access</strong></li>
</ul>
</li>
<li>添加加密环境变量, 用于后续配置文件使用<ul>
<li>项目页.Settings.Secrets.Add a new secret<table>
<thead>
<tr>
<th align="center">环境变量</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">DEPLOY_KEY</td>
<td align="left">发布key 私钥，<code>deploy_key</code>私钥文件内容</td>
</tr>
<tr>
<td align="center">EMAIL</td>
<td align="left">发布用户邮箱账号</td>
</tr>
<tr>
<td align="center">NAME</td>
<td align="left">发布用户名</td>
</tr>
<tr>
<td align="center"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 克隆项目到本地</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/xxx/xxx.github.io.git</span><br><span class="line"><span class="comment"># 创建并切换到 hexo 分支</span></span><br><span class="line">git checkout -b hexo</span><br><span class="line"><span class="comment"># 提交本地 hexo 分支到远程仓库的 hexo 分支</span></span><br><span class="line">git push origin hexo:hexo</span><br></pre></td></tr></table></figure></td>
<td align="left"></td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<p>修改<code>_config.xml</code></p>
<ul>
<li>repo链接必须为ssh格式</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: 'git'</span><br><span class="line">  repo: git@github.com:Hosted-code/Hosted-code.github.io.git</span><br><span class="line">  branch: master</span><br><span class="line">  message: "Github CI Auto Builder at &#123;&#123; now('YYYY-MM-DD HH:mm:ss Z') &#125;&#125;"</span><br></pre></td></tr></table></figure>

<p>添加Action</p>
<ul>
<li>创建action文件, <code>.github/workflows/hexo.yml</code></li>
<li>根目录下.gitignore中需要移除package-lock.json</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">name: Hexo CICD</span><br><span class="line"></span><br><span class="line">on: # 监视 `hexo`分支</span><br><span class="line">  push:</span><br><span class="line">      branches:</span><br><span class="line">      - hexo</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  build:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    if: "!contains(github.event.head_commit.message, '[ci skip]')"</span><br><span class="line">    steps:</span><br><span class="line">      - name: Checkout</span><br><span class="line">        uses: actions/checkout@v1</span><br><span class="line">        with:</span><br><span class="line">          submodules: true</span><br><span class="line">      - name: Cache node modules</span><br><span class="line">        uses: actions/cache@v1</span><br><span class="line">        with:</span><br><span class="line">          path: node_modules</span><br><span class="line">          key: $&#123;&#123;runner.OS&#125;&#125;-$&#123;&#123;hashFiles('**/package-lock.json')&#125;&#125;</span><br><span class="line">      - uses: yrpang/github-actions-hexo@master</span><br><span class="line">        with:</span><br><span class="line">          deploykey: $&#123;&#123;secrets.DEPLOY_KEY&#125;&#125;</span><br><span class="line">          username: $&#123;&#123;secrets.NAME&#125;&#125;</span><br><span class="line">          email: $&#123;&#123;secrets.EMAIL&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>之后发布博客的命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 切换到 hexo 分支</span></span><br><span class="line">git checkout hexo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交新博文</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"Publish new post."</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送到远程仓库</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<h1 id="typora-picgo"><a href="#typora-picgo" class="headerlink" title="typora + picgo"></a>typora + picgo</h1><p>新建 github 仓库作为图床, 仓库为public<br><strong>创建token</strong>: settings.Developer Settings.<strong>Personal Accsess Token</strong></p>
<ul>
<li>description随便填</li>
<li><strong>勾选repo</strong></li>
<li>然后<strong>创建token</strong>(<strong>token只出现一次, 所以要保存一下</strong>)</li>
</ul>
<p>完成后, PicGo, 参考文档配置: <a href="https://picgo.github.io/PicGo-Doc/" target="_blank" rel="noopener">https://picgo.github.io/PicGo-Doc/</a></p>
<ul>
<li>github图床配置<ul>
<li>仓库名即为之前创建图床仓库, <code>Hosted-code/CloudImg</code>, github用户名/仓库名</li>
<li>分支名, 一般默认 <code>master</code></li>
<li>token为github上生成的token</li>
<li>存储路径一般不设置</li>
<li>设定自定义域名<ul>
<li><a href="https://raw.githubusercontent.com/[github用户名]/[仓库名]/master" target="_blank" rel="noopener">https://raw.githubusercontent.com/[github用户名]/[仓库名]/master</a></li>
<li>cdn: <a href="https://cdn.jsdelivr.net/gh/[github用户名]/[仓库名]@master" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/[github用户名]/[仓库名]@master</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="https://yangbingdong.com/2017/build-blog-hexo-base/" target="_blank" rel="noopener">基于Hexo+Github+Coding搭建个人博客——基础篇(从菜鸟到放弃)</a></li>
<li><a href="https://easyhexo.com/1-Hexo-install-and-config/1-5-continuous-integration.html#%E4%BB%80%E4%B9%88%E6%98%AF%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%EF%BC%9F" target="_blank" rel="noopener">持续集成CI</a></li>
<li><a href="https://blog.motreen.ml/posts/35722/" target="_blank" rel="noopener">GitHub Actions自动部署Hexo博客</a></li>
<li><a href="https://blog.csdn.net/yefcion/article/details/88412025" target="_blank" rel="noopener">PicGo + GitHub 搭建个人图床工具</a></li>
</ul>
]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>VSCode</title>
    <url>/posts/3804610536.html</url>
    <content><![CDATA[<h1 id="VsCode教程"><a href="#VsCode教程" class="headerlink" title="VsCode教程"></a>VsCode教程</h1><p><a href="https://geek-docs.com/vscode" target="_blank" rel="noopener" class="LinkCard">VSCode|极客教程</a></p>
<a id="more"></a>

<h1 id="VsCode基本设置"><a href="#VsCode基本设置" class="headerlink" title="VsCode基本设置"></a>VsCode基本设置</h1><ul>
<li>中文化：  <kbd>Ctrl</kbd>+<kbd>shift</kbd>+<kbd>P</kbd> =&gt; language(配置显示语言) =&gt; 安装其他语言 =&gt; 安装中文语言包，重启</li>
<li>VsCode集成Cmder<ol>
<li><kbd>Ctrl</kbd>+<kbd>shift</kbd>+<kbd>P</kbd> =&gt; 输入 <strong>“设置”</strong> =&gt; 选择 <strong>打开设置(json)</strong></li>
<li>settings.json添加如下代码</li>
</ol>
</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这种设置方法 是通过cmd调用cmder的批处理文件， 窗口不独立</span></span><br><span class="line">"terminal.integrated.shell.windows": "C:\\Windows\\System32\\cmd.exe",</span><br><span class="line">"terminal.integrated.shellArgs.windows": ["/k", "D:\\Tool\\DevelopTool\\cmder\\vendor\\init.bat"]</span><br><span class="line"><span class="comment">// 这种设置方法cmder窗口独立</span></span><br><span class="line">"terminal.integrated.shell.windows": "D:\\Tool\\DevelopTool\\cmder\\Cmder.exe"</span><br><span class="line"><span class="comment">// 设置集成cmder内带的git</span></span><br><span class="line">"git.path": "D:\\Tool\\DevelopTool\\cmder\\vendor\\git-for-windows\\bin\\git.exe",</span><br></pre></td></tr></table></figure>

<ul>
<li>修改文件图标： 文件-&gt;首选项-&gt;文件图标主题-&gt;安装其他主题-&gt;安装喜欢的主题-&gt;选择文件图标主题</li>
</ul>
<h1 id="VsCode快捷键"><a href="#VsCode快捷键" class="headerlink" title="VsCode快捷键"></a>VsCode快捷键</h1><ul>
<li>菜单里面就有各个操作的快捷键</li>
<li><kbd>Ctrl</kbd>+<kbd>K</kbd>;<kbd>Ctrl</kbd>+<kbd>M</kbd>可调出按键映射， 可安装对应键盘映射使用其他编辑器的按键映射<ul>
<li>会变为对应编辑器的快键键</li>
</ul>
</li>
<li>vscode欢迎使用处就有快捷键速查表<br><a href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf" target="_blank" rel="noopener" class="Linkcard">VsCode官方快捷键速查表</a></li>
</ul>
<img src="D:%5CPictures%5CMarkdown_pic%5CVScode%E6%BC%94%E6%AD%A6%E5%9C%BA%5Cassets%5CVsCode%20CheetSheet.png" alt="VsCode CheetSheet" style="zoom:67%;" />

<h2 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h2><ul>
<li>文件中查找/替换： <kbd>Ctrl</kbd>+<kbd>shift</kbd>+<kbd>F/H</kbd></li>
<li>注释<ul>
<li>单行注释， 注释当前行，<kbd>Ctrl</kbd>+<kbd>/</kbd></li>
<li>块状注释， 多行注释， <kbd>Shift</kbd>+<kbd>Alt</kbd>+<kbd>A</kbd></li>
</ul>
</li>
<li>缩进： <kbd>Ctrl</kbd>+<kbd>[/]</kbd></li>
<li>折叠/取消折叠： <kbd>Ctrl</kbd>+<kbd>shift</kbd>+<kbd>[/]</kbd></li>
<li>删除当前行，<kbd>Ctrl</kbd>+<kbd>shift</kbd>+<kbd>K</kbd></li>
<li>折叠：<kbd>Alt</kbd>+<kbd>Z</kbd></li>
</ul>
<h2 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h2><ul>
<li>打开面板，打开文件：<kbd>Ctrl</kbd>+<kbd>P</kbd><ul>
<li>默认列出最近打开的文件</li>
<li>输入<code>?</code>得到提示</li>
<li><kbd>Ctrl</kbd>+<kbd>P</kbd> &amp; <code>&gt;</code> =&gt; <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd></li>
<li><kbd>Ctrl</kbd>+<kbd>P</kbd> &amp; <code>@</code> =&gt; <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>O</kbd></li>
<li><kbd>Ctrl</kbd>+<kbd>P</kbd> &amp; <code>#</code> =&gt; <kbd>Ctrl</kbd>+<kbd>T</kbd></li>
<li>。。。</li>
</ul>
</li>
<li>定位符号<ul>
<li>多文件：<kbd>Ctrl</kbd>+<kbd>T</kbd></li>
<li>当前文件：<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>O</kbd></li>
</ul>
</li>
<li>错误定位：<ul>
<li>向下定位：<kbd>F8</kbd></li>
<li>向上定位：<kbd>Shift</kbd>+ <kbd>F8</kbd></li>
</ul>
</li>
<li>在几处编辑位置跳转：<kbd>Alt</kbd>+<kbd>←/→</kbd></li>
<li>定位到括号处：<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>\</kbd></li>
</ul>
<h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><ul>
<li>块状选择<ul>
<li>纯键盘的：<kbd>Ctrl</kbd> + <kbd>Shift</kbd>+<kbd>Alt</kbd> + <kbd>↑/↓/←/→</kbd></li>
<li>纯鼠标的：<strong>鼠标中键拖动</strong></li>
<li>键鼠合作的： <kbd>Shift</kbd>+<kbd>Alt</kbd>+ <strong>鼠标左键</strong></li>
</ul>
</li>
<li>添加上一行或下一行光标，<kbd>Ctrl</kbd>+<kbd>Alt</kbd> + <kbd>↑/↓</kbd></li>
<li>在行尾添加光标： <kbd>Ctrl</kbd>+<kbd>Shift</kbd> + <kbd>I</kbd></li>
<li>选择所有匹配词： <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>L</kbd></li>
<li>选择下一个匹配词， <kbd>Ctrl</kbd>+<kbd>D</kbd></li>
<li>移动行位置，<kbd>alt</kbd>+<kbd>↑/↓</kbd></li>
<li>复制当前行并粘贴到下一行，<kbd>Shift</kbd>+<kbd>Alt</kbd> + <kbd>↑/↓</kbd></li>
</ul>
<h2 id="代码相关"><a href="#代码相关" class="headerlink" title="代码相关"></a>代码相关</h2><ul>
<li>重命名符号：<kbd>F2</kbd></li>
<li>格式化代码:<ul>
<li>整体格式化： <kbd>shift</kbd>+<kbd>alt</kbd>+<kbd>K</kbd></li>
<li>选择格式化：<kbd>Ctrl</kbd>+<kbd>K</kbd>;<kbd>Ctrl</kbd>+<kbd>F</kbd></li>
</ul>
</li>
<li>代码提示<ul>
<li><kbd>Ctrl</kbd>+<kbd>Space</kbd></li>
<li>提示参数：<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Space</kbd></li>
</ul>
</li>
<li>定义实现<ul>
<li>转到定义：<kbd>F12</kbd></li>
<li>查看定义：<kbd>Alt</kbd>+<kbd>F12</kbd></li>
<li>查看调用：<kbd>Shift</kbd>+<kbd>F12</kbd></li>
<li>跳转实现：<kbd>Ctrl</kbd>+<kbd>F12</kbd></li>
</ul>
</li>
<li>去掉行尾空格： <kbd>Ctrl</kbd>+<kbd>K</kbd>;<kbd>Ctrl</kbd>+<kbd>X</kbd></li>
</ul>
<h1 id="VsCode插件"><a href="#VsCode插件" class="headerlink" title="VsCode插件"></a>VsCode插件</h1><ul>
<li>Code Runner</li>
<li>Prettier, 代码格式化</li>
<li>GitLens, git增强插件<ul>
<li>Git History， 图形化 <code>git log</code></li>
</ul>
</li>
<li>Programming Languages<ul>
<li>Python</li>
<li>C/C++</li>
</ul>
</li>
<li>Settings Sync， 同步vscode配置<ul>
<li>安装后欢迎界面，授权登陆Github</li>
<li><kbd>Shift</kbd>+<kbd>Alt</kbd>+<kbd>U</kbd></li>
</ul>
</li>
<li>Markdown All in One</li>
<li>PicGo， 图床插件</li>
<li>Polacode, 代码图片分享</li>
<li>Path Autocomplete，文件路径自动补全。</li>
<li>Document This，快速生成注释。</li>
<li>Bracket Pair Colorizer，括号配对着色，方便查看多层嵌套的代码。</li>
</ul>
<h1 id="Snippet规则"><a href="#Snippet规则" class="headerlink" title="Snippet规则"></a>Snippet规则</h1><ul>
<li>Snippet， 代码片， 输入一小段字符串， 生成预定义代码模板， <strong>辅助快速输入</strong></li>
<li>vscode代码块配置<ul>
<li><strong>纯鼠标：</strong><ul>
<li>文件-&gt;首选项-&gt;用户代码片段</li>
<li>左下角齿轮-&gt;用户代码片段</li>
</ul>
</li>
<li><strong>纯键盘：</strong><kbd>Ctrl</kbd>+<kbd>shift</kbd>+<kbd>P</kbd> -&gt; <code>snippet</code></li>
</ul>
</li>
<li>可在Vscode应用商店安装对应的snippet</li>
<li>snippet的自动补全<ul>
<li><kbd>Ctrl</kbd>+<kbd>Space</kbd></li>
<li><kbd>Tab</kbd>， 需启用， <code>&quot;editor.tabCompletion&quot;: &quot;on&quot;</code></li>
</ul>
</li>
</ul>
<h2 id="语法结构（4部分）"><a href="#语法结构（4部分）" class="headerlink" title="语法结构（4部分）"></a>语法结构（4部分）</h2><ul>
<li><strong>prefix</strong>：输入的一小段字符串，支持N:1</li>
<li>scope：指定代码适用的语言模式，可选， <strong>仅用于全局代码片使用</strong></li>
<li><strong>body</strong>: 预定义代码模板， <strong>布局与控制</strong></li>
<li>description： 可选， 描述， 代码片在IntelliSense 中的「介绍」</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//举个例子, in file 'Code/User/snippets/javascript.json'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"For Loop"</span>: &#123;</span><br><span class="line">    <span class="attr">"prefix"</span>: [<span class="string">"for"</span>, <span class="string">"for-const"</span>],</span><br><span class="line">    <span class="attr">"body"</span>: [<span class="string">"for (const $&#123;2:element&#125; of $&#123;1:array&#125;) &#123;"</span>, <span class="string">"\t$0"</span>, <span class="string">"&#125;"</span>],</span><br><span class="line">    <span class="attr">"description"</span>: <span class="string">"A for loop."</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>prefix</strong>, 支持N:1, 多个前缀对应同一个代码模板时， 定义为数组<ul>
<li><code>&quot;prefix&quot;: [ &quot;header&quot;, &quot;stub&quot;, &quot;copyright&quot;],</code></li>
</ul>
</li>
<li><strong>body</strong>： 代码模板主题， 每个字符串代表一行<ul>
<li><strong>tabstops</strong>, 制表符， 使用tab可以让光标在snippet内跳转<ul>
<li><code>${n}</code>, 如<code>$1, $2</code> 指定光标位置, 数字大小表示先后顺序<ul>
<li><code>$0</code>, 为光标最终位置</li>
</ul>
</li>
<li>相同序号会同步更新</li>
</ul>
</li>
<li><strong>placeholders</strong>, 占位符， 带有默认值的tabstops<ul>
<li><code>${1:foo}</code>, 默认值为foo, 跳转到时自动全选， 方便修改</li>
<li>利于提供默认值或作为输入提示</li>
<li>结构体的snippets: <code>struct ${1:name_t} {\n\t$2\n};</code></li>
</ul>
</li>
<li><strong>choice</strong>, 可选项， 多个默认值， 选择其中一个<ul>
<li><code>${1|one,two,three|}</code></li>
</ul>
</li>
<li><strong>variables</strong>, <strong>变量</strong><ul>
<li><code>$name</code>或<code>${name:default}</code>可以插入变量的值</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul>
<li>内置变量<ul>
<li><code>TM_SELECTED_TEXT</code>：当前选定的文本或空字符串；<ul>
<li>注：<strong>选定后</strong>通过在命令窗口点选「插入代码片段」插入。</li>
</ul>
</li>
<li><code>TM_CURRENT_LINE</code>：当前行的内容；</li>
<li><code>TM_CURRENT_WORD</code>：光标所处单词或空字符串<ul>
<li>注：所谓光标一般为文本输入处那条闪来闪去的竖线，该项可定制。单词使用 VSCode 选词（Word Wrap）器选择。</li>
<li>只可选择英文单词，没有针对宽字符优化过，它甚至无法识别宽字符的标点符号。</li>
</ul>
</li>
<li>行号<ul>
<li><code>TM_LINE_INDEX</code>：zero-index based</li>
<li><code>TM_LINE_NUMBER</code>：one-index based</li>
</ul>
</li>
<li>文件相关<ul>
<li><code>TM_FILENAME</code>：当前文档的文件名；</li>
<li><code>TM_FILENAME_BASE</code>：当前文档的文件名（不含后缀名）；</li>
<li><code>TM_DIRECTORY</code>：当前文档所在目录；</li>
<li><code>TM_FILEPATH</code>：当前文档的全路径；</li>
<li><code>WORKSPACE_NAME</code>：打开的工作区或目录的名称（而非完整路径）；</li>
</ul>
</li>
<li><code>CLIPBOARD</code>：当前剪贴板中内容。</li>
<li><strong>当前时间日期</strong><ul>
<li>当年<ul>
<li><code>CURRENT_YEAR</code>，四位年份</li>
<li><code>CURRENT_YEAR_SHORT</code>, 年份后两位</li>
</ul>
</li>
<li>当月<ul>
<li><code>CURRENT_MONTH</code>， 数字月份</li>
<li><code>CURRENT_MONTH_NAME</code> 当前月份的全称，如 July；</li>
<li><code>CURRENT_MONTH_NAME_SHORT</code>: 当前月份的简称，如 Jul；</li>
</ul>
</li>
<li>当日<ul>
<li><code>CURRENT_DATE</code>: 当天月份第几天；</li>
<li><code>CURRENT_DAY_NAME</code>: 当天周几，如 Monday；</li>
<li><code>CURRENT_DAY_NAME_SHORT</code>: 当天周几的简称，如 Mon；</li>
</ul>
</li>
<li>时：<code>CURRENT_HOUR</code>， 24小时制</li>
<li>分：<code>CURRENT_MINUTE</code></li>
<li>秒：<code>CURRENT_SECOND</code></li>
<li>unix时间戳：<code>CURRENT_SECONDS_UNIX</code>：Unix 时间戳。</li>
</ul>
</li>
<li>注释<ul>
<li><code>BLOCK_COMMENT_START</code> 块注释上半段</li>
<li><code>BLOCK_COMMENT_END</code>, 块注释下半段</li>
<li><code>LINE_COMMENT</code>, 行注释</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="变量转换"><a href="#变量转换" class="headerlink" title="变量转换"></a>变量转换</h2><ul>
<li><p>变量转换：将变量的值格式化后插入预定位置</p>
</li>
<li><p>语句：<code>${var_name/regular_expression/format_string/options}</code></p>
</li>
<li><p>regulare_expression, options 为正则表达式和匹配选项</p>
<ul>
<li><code>(?i)</code>：忽略大小写(CASE_INSENSITIVE)</li>
<li><code>(?x)</code>：忽略空格字符(COMMENTS)</li>
<li><code>(?s)</code>：<code>.</code>匹配任意字符，包括换行符（DOTALL）</li>
<li><code>(?m)</code>：多行模式（MULTILINE）</li>
<li><code>(?u)</code>：对Unicode符大小写不敏感（UNICODE_CASE），必须启用<strong>CASE_INSENSITIVE</strong></li>
<li><code>(?d)</code>：只有’\n’才被认作一行的中止（UNIX_LINES）</li>
</ul>
</li>
<li><p>format_string为格式化字符串, </p>
<ul>
<li>普通文本 + 格式化控制符</li>
<li>格式化控制符(7种)<ul>
<li><code>$n</code>, <code>${n}</code>, 捕捉项， 正则涉及括号分组时， 每个括号内为一个匹配项，未分组则无捕捉项</li>
<li>根据格式化控制符进行捕捉项的替换， 形成新的字符串， <strong>替换匹配到的字符串</strong><ul>
<li>形成的新字符串格式与format_string格式一致</li>
<li>匹配成功， 新字符串替换匹配项<ul>
<li>捕获成功， 捕获项为捕获分组内容</li>
<li>捕获失败， 捕获项为空</li>
</ul>
</li>
<li>匹配失败， 新字符串替换变量</li>
</ul>
</li>
<li><code>${n:/upcase}</code>，<code>${n:/downcase}</code>， <code>${n:/capitalize}</code>：匹配后<strong>捕捉项变更大小写</strong></li>
<li><code>${n:+if}</code>,  只处理成功的捕获项<ul>
<li>匹配成功捕获成功， 将<code>if</code>所述语句完全替换正则表达式匹配项捕获分组。</li>
<li>匹配成功捕获失败，捕获项为空</li>
<li>匹配失败， 不变</li>
</ul>
</li>
<li><code>${n:?if:else}</code>, 类似于三目运算符的操作, 成功和失败均处理<ul>
<li>匹配成功且捕捉成功， 将<code>if</code>所述语句完全<strong>替换捕获项</strong>；</li>
<li>匹配成功捕捉失败，将<code>else</code>所述语句完全<strong>替换捕获项位置</strong>；</li>
<li>匹配失败，<code>else</code>所述语句即为处理后的变量</li>
</ul>
</li>
<li><code>${n:-else}</code>, <code>${n:else}</code>， 只处理失败的<ul>
<li>匹配成功捕捉成功，捕捉项不变</li>
<li>匹配成功捕捉失败，将<code>else</code>所述语句<strong>完全替换正则表达式匹配项</strong>；</li>
<li>匹配失败，<code>else</code>所述语句即为处理后的变量</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$&#123;TM_FILENAME/(.*)\\..+$/$1/&#125;</span></span><br><span class="line">  |           |         |  |</span><br><span class="line">  |           |         |  |-&gt; 没有选项</span><br><span class="line">  |           |         |</span><br><span class="line">  |           |         |-&gt; 第一个捕捉项</span><br><span class="line">  |           |             </span><br><span class="line">  |           |</span><br><span class="line">  |           |-&gt; 正则表达式，捕获文件名， 不包含后缀名</span><br><span class="line">  |               就是浪催的， 不如变量直接用 TM_FILENAME_BASE</span><br><span class="line">  |</span><br><span class="line">  |-&gt; 变量名， 当前文档的文件名</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 示例， 文件名为global-js.json</span></span><br><span class="line"><span class="comment"># 则 $TM_FILENAME_BASE: global-js</span></span><br><span class="line"><span class="comment"># $&#123;var_name/regular_expression/$1/options&#125;</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/(global).*/$1/&#125;</span>				<span class="comment">#匹配成功，捕获成功，global</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $&#123;var_name/regular_expression/$&#123;1:/upcase&#125;/options&#125;</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/(global).*/$&#123;1:/upcase&#125;</span>/&#125;	<span class="comment">#匹配成功捕获成功，变更为大写， GLOBAL</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $&#123;var_name/regular_expression/$&#123;1:+if&#125;/options&#125;</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/(glo)(bal)/$&#123;1:+if&#125;</span>&amp;<span class="variable">$&#123;2:+if&#125;</span>/&#125;			<span class="comment">#匹配成功，捕获成功，if&amp;if-js</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/global/$&#123;1:+if&#125;</span>&amp;<span class="variable">$&#123;2:+if&#125;</span>/&#125;				<span class="comment">#匹配成功，捕获失败，&amp;&amp;-js</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/(globald)/$&#123;1:+if&#125;</span>&amp;<span class="variable">$&#123;2:+if&#125;</span>/&#125;			<span class="comment">#匹配失败，不变，global-js</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $&#123;var_name/regular_expression/$&#123;1:?if:else&#125;/options&#125;</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/(glo)(bal)/$&#123;1:?if:else&#125;</span>&amp;<span class="variable">$&#123;2:?if:else&#125;</span>/&#125;	<span class="comment">#匹配成功，捕获成功, if&amp;if-js</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/global/$&#123;1:?if:else&#125;</span>&amp;<span class="variable">$&#123;2:?if:else&#125;</span>/&#125;		<span class="comment">#匹配成功，捕获失败， else&amp;else-js</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/globald/$&#123;1:?if:else&#125;</span>&amp;<span class="variable">$&#123;2:?if:else&#125;</span>/&#125;	<span class="comment">#匹配失败，else&amp;else</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $&#123;var_name/regular_expression/$&#123;1:else&#125;/options&#125;</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/(glo)(bal)/$&#123;1:else&#125;</span>&amp;<span class="variable">$&#123;2:else&#125;</span>/&#125;			<span class="comment">#匹配成功，捕获成功, glo&amp;bal-js</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/global/$&#123;1:else&#125;</span>&amp;<span class="variable">$&#123;2:else&#125;</span>/&#125;				<span class="comment">#匹配成功，捕获失败， else&amp;else-js</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/globald/$&#123;1:else&#125;</span>&amp;<span class="variable">$&#123;2:else&#125;</span>/&#125;			<span class="comment">#匹配失败，else&amp;else</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $&#123;var_name/regular_expression/text/options&#125;</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/(global)/text/&#125;</span>				<span class="comment">#匹配成功， 替换匹配项, text-js</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配成功与否与整个正则有关， 捕获成功与否与某个分组有关</span></span><br><span class="line"><span class="variable">$&#123;TM_FILENAME_BASE/(glo)(bal)/$&#123;1:+if&#125;</span>&amp;<span class="variable">$&#123;2:+if&#125;</span>&amp;<span class="variable">$&#123;3:+if&#125;</span>/&#125;  <span class="comment">#匹配成功，第一分组匹配成功第二分组匹配成功，第三分组捕获失败if&amp;if&amp;-js</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><strong><code>Placeholder Transform</code></strong> 本质与<code>Variable Transform</code>的第8条一致，只是<strong>正则表达式变为占位符常量</strong></li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">//代码片段</span></span><br><span class="line">"transform": &#123;</span><br><span class="line">    "prefix": "tr",</span><br><span class="line">    "body": "$1 -&gt; $&#123;1/placeholder/text/&#125;",   //输入: placeholder 输出: placeholder -&gt; text</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="https://juejin.im/post/5c45b92751882525487c5c66" target="_blank" rel="noopener">在 vscode 中写 Markdown </a></li>
<li><a href="https://zhuanlan.zhihu.com/p/56699805" target="_blank" rel="noopener">在 VSCode 下用 Markdown Preview Enhanced 愉快地写文档</a></li>
<li><a href="https://code.visualstudio.com/docs/editor/userdefinedsnippets" target="_blank" rel="noopener">snippet官方文档</a></li>
<li><a href="https://juejin.im/post/5caab98af265da24e238d9d2" target="_blank" rel="noopener">【VSC】Snippets不完全指南</a></li>
</ul>
]]></content>
      <categories>
        <category>CheatSheet</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>Snippet</tag>
        <tag>Tool</tag>
        <tag>CheatSheet</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 博客搭建</title>
    <url>/posts/426584999.html</url>
    <content><![CDATA[<h1 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h1><ul>
<li>安装前提<ul>
<li><a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a> (安装时确保 <strong>add to path</strong>)</li>
<li><a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a></li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli         <span class="comment"># 安装 Hexo</span></span><br><span class="line">hexo init                       <span class="comment"># 在站点目录里执行， 初始化站点</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next  <span class="comment">#下载主题</span></span><br><span class="line">theme: next           <span class="comment"># _config.yml, 启用next主题</span></span><br><span class="line"></span><br><span class="line">scheme: Pisces        <span class="comment"># theme/next/_config.yml, 启用 Pisces 的样式</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><ul>
<li>查看本地有哪些包<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># 站点根目录的package.json也记录着</span><br><span class="line">λ npm ls --depth 0                  </span><br><span class="line">hexo-site@0.0.0 D:\Blog </span><br><span class="line">hexo@4.1.0</span><br><span class="line"><span class="addition">+ hexo-abbrlink@2.0.5</span></span><br><span class="line"><span class="addition">+ hexo-deployer-git@2.1.0</span></span><br><span class="line">hexo-generator-archive@1.0.0</span><br><span class="line">hexo-generator-category@1.0.0</span><br><span class="line">hexo-generator-index@1.0.0</span><br><span class="line"><span class="addition">+ hexo-generator-searchdb@1.2.0</span></span><br><span class="line">hexo-generator-tag@1.0.0</span><br><span class="line"><span class="addition">+ hexo-related-popular-posts@3.0.6</span></span><br><span class="line">hexo-renderer-ejs@1.0.0</span><br><span class="line">hexo-renderer-marked@2.0.0</span><br><span class="line">hexo-renderer-stylus@1.1.0</span><br><span class="line">hexo-server@1.0.0</span><br><span class="line"><span class="addition">+ hexo-symbols-count-time@0.7.0</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save                    <span class="comment"># 部署插件</span></span><br><span class="line">npm install hexo-symbols-count-time --save              <span class="comment"># 文章字数统计</span></span><br><span class="line">npm install hexo-related-popular-posts --save           <span class="comment"># 相关文章推荐</span></span><br><span class="line">npm install hexo-generator-searchdb --save              <span class="comment"># 本地博客搜索</span></span><br><span class="line">npm install hexo-abbrlink --save                        <span class="comment"># 生成唯一文章链接</span></span><br><span class="line">npm install hexo-neat --save                            <span class="comment"># 静态资源压缩</span></span><br><span class="line">npm install hexo-generator-feed --save                  <span class="comment"># rss</span></span><br></pre></td></tr></table></figure>

<ul>
<li>装完有可能出现如下提示, 按照提示输入命令执行下</li>
<li><strong>是否一定要照着 npm 或 GitHub 的建议來更新 package 似乎是不一定，而且得要靠个人判断，目前认为有效的判断方法是：透过在 GitHub 上的 issue 讨论来获得资讯。</strong></li>
<li>修复步骤<ol>
<li><code>npm audit fix</code></li>
<li><code>npm audit</code></li>
<li><code>open More info</code></li>
<li><code>cd Path &amp;&amp; npm -i --save package@version</code></li>
</ol>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#found 1 low severity vulnerability</span></span><br><span class="line"><span class="comment"># run `npm audit fix` to fix them, or `npm audit` for details、</span></span><br><span class="line">npm audit fix       <span class="comment">#尝试修复下</span></span><br><span class="line">npm audit           <span class="comment">#查看细节</span></span><br><span class="line">  Low             Regular Expression Denial of Service</span><br><span class="line">  Package         braces</span><br><span class="line">  Patched <span class="keyword">in</span>      &gt;=2.3.1</span><br><span class="line">  Dependency of   hexo-abbrlink</span><br><span class="line">  Path            hexo-abbrlink &gt; hexo-fs &gt; chokidar &gt; anymatch &gt; micromatch &gt; braces</span><br><span class="line">  More info       https://npmjs.com/advisories/786</span><br><span class="line"><span class="comment"># 查看More info, 然后进入到路径后更新包</span></span><br><span class="line"><span class="comment"># 指定更新包到那个版本， 也可以是最新版(lastest), --save, 省掉你手动修改package.json文件的步骤</span></span><br><span class="line">npm i --save braces@2.3.1</span><br></pre></td></tr></table></figure>

<h1 id="新建页面"><a href="#新建页面" class="headerlink" title="新建页面"></a>新建页面</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page tags                      <span class="comment"># 新建标签</span></span><br><span class="line">hexo new page categories            <span class="comment"># 新建分类</span></span><br><span class="line">hexo new page links                     <span class="comment"># 新建友链</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 标签页面, source/tags/index.md</span></span><br><span class="line">title: 标签</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"tags"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分类页面, source/categories/index.md</span></span><br><span class="line">title: 分类</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"categories"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 友链页面, source/links/index.md</span></span><br><span class="line">title: 友情链接</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"links"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 站点启用评论，需要在上述页面禁用评论的</span></span><br><span class="line">comments: <span class="literal">false</span></span><br></pre></td></tr></table></figure>


<h1 id="站点配置"><a href="#站点配置" class="headerlink" title="站点配置"></a>站点配置</h1><ul>
<li>站点配置文件： <strong>_config.yml</strong></li>
<li>下列展示代码均为 <strong>需要修改</strong> 的部分</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># _config.yml</span></span><br><span class="line"><span class="comment"># site </span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hosted's</span> <span class="string">Blog</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Hosted</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># permalink config</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span>         <span class="comment">#改变年月日标题的链接方式， 生成唯一链接(纯数字的)， 避免中文链接导致权重降低</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span>  <span class="comment">#support crc16(default) and crc32</span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">dec</span>    <span class="comment">#support dec(default) and hex</span></span><br><span class="line"></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span>           <span class="comment"># 启用next主题, 开始已经改过了</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">https://github.com/username/username.github.io.git,</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<h1 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h1><ul>
<li>主题配置文件：<strong>theme/next/_config.yml</strong></li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">since:</span>          <span class="comment"># 博客开始时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭hexo和next的强力驱动("广告")</span></span><br><span class="line"><span class="attr">powered:</span></span><br><span class="line">    <span class="comment"># Hexo link (Powered by Hexo).</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Version info of Hexo after Hexo link (vX.X.X).</span></span><br><span class="line">    <span class="attr">version:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="comment"># Theme &amp; scheme info link (Theme - NexT.scheme).</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Version info of NexT after scheme info (vX.X.X).</span></span><br><span class="line">    <span class="attr">version:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 知识共享， 或者说版权说明吧</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Pisces</span>        <span class="comment"># 启用 Pisces 的样式,  前面已经启用</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 菜单， 这里只启用了首页， 归档和友链</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line">  <span class="comment">#about: /about/ || user</span></span><br><span class="line">  <span class="comment">#tags: /tags/ || tags</span></span><br><span class="line">  <span class="comment">#categories: /categories/ || th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || heartbeat</span></span><br><span class="line">  <span class="attr">links:</span> <span class="string">/links/</span> <span class="string">||</span> <span class="string">user-plus</span>       <span class="comment"># 友链， 需在languages/zh-CN.yml中， 新增对应翻译</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 侧边栏头像</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="comment"># Replace the default image and set the url here.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.gif</span></span><br><span class="line">  <span class="comment"># If true, the avatar will be dispalyed in circle.</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If true, the avatar will be rotated with the cursor.</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 社交链接</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/yourname</span> <span class="string">||</span> <span class="string">github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:whcycle493@gmail.com</span> <span class="string">||</span> <span class="string">envelope</span></span><br><span class="line">  <span class="attr">RSS:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">rss</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 友链</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="comment">#Title: http://yoursite.com</span></span><br><span class="line">  <span class="string">浅墨的游戏编程Blog:</span> <span class="string">https://blog.csdn.net/poem_qianmo</span></span><br><span class="line">  <span class="attr">HelloGitHub:</span> <span class="string">https://hellogithub.com/</span></span><br><span class="line">  <span class="string">说好不能打脸:</span> <span class="string">https://blog.csdn.net/yinwenjie</span></span><br><span class="line">  <span class="attr">OverAPI:</span> <span class="string">http://overapi.com/</span></span><br><span class="line">  <span class="string">即时通信网:</span> <span class="string">http://www.52im.net/</span></span><br><span class="line">  <span class="string">Sanarous(Hexo):</span> <span class="string">https://bestzuo.cn/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭这个， 封面通过 &lt;!-- more --&gt; 来控制</span></span><br><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文章参数</span></span><br><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">item_text:</span> <span class="literal">false</span>    <span class="comment"># 关闭文字描述</span></span><br><span class="line">  <span class="attr">created_at:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">updated_at:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>     <span class="comment"># 关闭更新日期</span></span><br><span class="line">    <span class="attr">another_day:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打赏设置</span></span><br><span class="line"><span class="attr">reward_settings:</span></span><br><span class="line">  <span class="comment"># If true, reward will be displayed in every article by default.</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">animation:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">comment:</span> <span class="string">如果这篇文章对您很有帮助，不妨</span></span><br><span class="line"></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">wechatpay:</span> <span class="string">/images/wechatpay.png</span></span><br><span class="line">  <span class="attr">alipay:</span> <span class="string">/images/alipay.png</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 相关文章推荐</span></span><br><span class="line"><span class="comment"># 依赖项: hexo-related-popular-posts</span></span><br><span class="line"><span class="attr">related_posts:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">📚</span>  <span class="string">相关文章推荐</span> <span class="comment"># Custom header, leave empty to use the default one</span></span><br><span class="line">  <span class="attr">display_in_home:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">params:</span></span><br><span class="line">    <span class="attr">maxCount:</span> <span class="number">5</span></span><br><span class="line">    <span class="comment">#PPMixingRate: 0.0</span></span><br><span class="line">    <span class="comment">#isDate: false</span></span><br><span class="line">    <span class="comment">#isImage: false</span></span><br><span class="line">    <span class="comment">#isExcerpt: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置代码高亮主题及复制按钮</span></span><br><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># Available values: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic</span></span><br><span class="line">  <span class="comment"># See: https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line">  <span class="attr">highlight_theme:</span> <span class="string">galactic</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Show text copy result.</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回顶部处显示百分比</span></span><br><span class="line"><span class="attr">scrollpercent:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连续看图</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Valine</span></span><br><span class="line"><span class="comment"># For more information: https://valine.js.org, https://github.com/xCss/Valine</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span>  <span class="comment"># Your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="comment"># Your leancloud application appkey</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># Mail notifier</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">  <span class="attr">placeholder:</span>  <span class="comment"># Comment box placeholder</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">wavatar</span> <span class="comment"># Gravatar style</span></span><br><span class="line">  <span class="attr">guest_info:</span> <span class="string">nick,mail</span> <span class="comment">#,link # Custom comment header</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># Pagination size</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">zh-cn</span> <span class="comment"># Language, available values: en, zh-cn</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span> <span class="comment"># Article reading statistic</span></span><br><span class="line">  <span class="attr">comment_count:</span> <span class="literal">true</span> <span class="comment"># If false, comment count will only be displayed in post page, not in home page</span></span><br><span class="line">  <span class="attr">recordIP:</span> <span class="literal">false</span> <span class="comment"># Whether to record the commenter IP</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></span><br><span class="line">  <span class="comment">#post_meta_order: 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用本地搜索</span></span><br><span class="line"><span class="comment"># 依赖项：hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h1 id="自定义修改"><a href="#自定义修改" class="headerlink" title="自定义修改"></a>自定义修改</h1><ul>
<li>next V7 不使用之前版本的 _custom.styl, 所有的自定义文件都在 <strong>source/_data/</strong> 下<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.swig</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.swig</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="string">source/_data/sidebar.swig</span>    <span class="comment"># 侧边栏布局自定义， 用于后面侧边栏添加一言</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.swig</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.swig</span></span><br><span class="line">  <span class="comment">#variable: source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span>       <span class="comment"># 自定义样式文件</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="自定义优化之前"><a href="#自定义优化之前" class="headerlink" title="自定义优化之前"></a>自定义优化之前</h2><ul>
<li>自定义优化之前可以了解一下包括hexo目录结构， next主题目录结构， swig语法等相关知识， 具体内容在<strong>另一个篇文章</strong>中</li>
</ul>
<h2 id="valine评论框美化"><a href="#valine评论框美化" class="headerlink" title="valine评论框美化"></a>valine评论框美化</h2><ul>
<li>先 <a href="https://site-1258928558.cos.ap-guangzhou.myqcloud.com/js/Valine.min.js" target="_blank" rel="noopener">下载</a> 作者给出的Valine.min.js文件，放到 <strong>hexo/themes/next/source/js/src</strong> 下</li>
<li>修改 <strong>layout/_third-party/comments/valine.swig</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.valine.enable and theme.valine.appid and theme.valine.appkey %&#125;</span><br><span class="line">  &lt;script src&#x3D;&quot;&#x2F;&#x2F;cdn1.lncld.net&#x2F;static&#x2F;js&#x2F;3.0.4&#x2F;av-min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script src&#x3D;&quot;&#x2F;js&#x2F;src&#x2F;Valine.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">    new Valine(&#123;</span><br><span class="line">        lang: &#39;zh-cn&#39;,</span><br><span class="line">        admin_email: &#39;whcycle493@gmai.com&#39;,</span><br><span class="line">        el: &#39;#comments&#39; ,</span><br><span class="line">        appId: &#39;&#123;&#123; theme.valine.appid &#125;&#125;&#39;,</span><br><span class="line">        appKey: &#39;&#123;&#123; theme.valine.appkey &#125;&#125;&#39;,</span><br><span class="line">        emoticon_url: &#39;https:&#x2F;&#x2F;cloud.panjunwen.com&#x2F;alu&#39;,</span><br><span class="line">        emoticon_list: [&quot;狂汗.png&quot;,&quot;不说话.png&quot;,&quot;汗.png&quot;,&quot;坐等.png&quot;,&quot;献花.png&quot;,&quot;不高兴.png&quot;,&quot;中刀.png&quot;,&quot;害羞.png&quot;,&quot;皱眉.png&quot;,&quot;小眼睛.png&quot;,&quot;暗地观察.png&quot;],</span><br><span class="line">        placeholder: &#39;&#123;&#123; theme.valine.placeholder &#125;&#125;&#39;,</span><br><span class="line">  &#125;);</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<h2 id="文章结束标志"><a href="#文章结束标志" class="headerlink" title="文章结束标志"></a>文章结束标志</h2><ul>
<li><p>优化步骤</p>
<ol>
<li>新增样式文件， <strong>passage-end-tag.swig</strong></li>
<li>post.swig中添加对上述样式的引用</li>
<li>主题配置文件启用该功能项</li>
</ol>
</li>
<li><p>新建 <strong>next\layout_macro\passage-end-tag.swig</strong>， 设定样式</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- next\layout\_macro\passage-end-tag.swig --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;color: #ccc;font-size:14px;"</span>&gt;</span>-------------　　　　本文结束　<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-heart"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>　感谢您的阅读　　　　-------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>post.swig添加上述引用<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.passage_end_tag and not is_index %&#125;</span><br><span class="line">    &#123;% include 'passage-end-tag.swig' %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></li>
<li>启用该功能项<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 主题配置文件 theme/next/_config.yml</span></span><br><span class="line"><span class="comment"># 启用文章结束标志</span></span><br><span class="line"><span class="attr">passage_end_tag:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="标题奔溃欺骗-amp-点击特效-amp-网站背景"><a href="#标题奔溃欺骗-amp-点击特效-amp-网站背景" class="headerlink" title="标题奔溃欺骗 &amp; 点击特效 &amp; 网站背景"></a>标题奔溃欺骗 &amp; 点击特效 &amp; 网站背景</h2><ul>
<li><p>优化步骤</p>
<ol>
<li>新增对应效果js文件</li>
<li>layout.swig 添加引用</li>
<li>主题配置文件启用该功能项</li>
</ol>
</li>
<li><p>添加效果js文件</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//next\source\js\src\clicklove.js,  网页鼠标点击特效（爱心)</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">e, t, a</span>) </span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>) </span>&#123;<span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="number">0</span>; e &lt; s.length; e++) s[e].alpha &lt;= <span class="number">0</span> ? (t.body.removeChild(s[e].el), s.splice(e, <span class="number">1</span>)) : (s[e].y--, s[e].scale += <span class="number">.004</span>, s[e].alpha -= <span class="number">.013</span>, s[e].el.style.cssText = <span class="string">"left:"</span> + s[e].x + <span class="string">"px;top:"</span> + s[e].y + <span class="string">"px;opacity:"</span> + s[e].alpha + <span class="string">";transform:scale("</span> + s[e].scale + <span class="string">","</span> + s[e].scale + <span class="string">") rotate(45deg);background:"</span> + s[e].color + <span class="string">";z-index:99999"</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>) </span>&#123;<span class="keyword">var</span> t = <span class="string">"function"</span> == <span class="keyword">typeof</span> e.onclick &amp;&amp; e.onclick;e.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;t &amp;&amp; t(), o(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params">e</span>) </span>&#123;<span class="keyword">var</span> a = t.createElement(<span class="string">"div"</span>);a.className = <span class="string">"heart"</span>, s.push(&#123;<span class="attr">el</span>: a,<span class="attr">x</span>: e.clientX - <span class="number">5</span>,<span class="attr">y</span>: e.clientY - <span class="number">5</span>,<span class="attr">scale</span>: <span class="number">1</span>,<span class="attr">alpha</span>: <span class="number">1</span>,<span class="attr">color</span>: c()&#125;), t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>) </span>&#123;<span class="keyword">var</span> a = t.createElement(<span class="string">"style"</span>);a.type = <span class="string">"text/css"</span>;<span class="keyword">try</span> &#123;a.appendChild(t.createTextNode(e))&#125; <span class="keyword">catch</span> (t) &#123;a.styleSheet.cssText = e&#125;t.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="string">"rgb("</span> + ~~(<span class="number">255</span> * <span class="built_in">Math</span>.random()) + <span class="string">","</span> + ~~(<span class="number">255</span> * <span class="built_in">Math</span>.random()) + <span class="string">","</span> + ~~(<span class="number">255</span> * <span class="built_in">Math</span>.random()) + <span class="string">")"</span>&#125;<span class="keyword">var</span> s = [];e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;setTimeout(e, <span class="number">1e3</span> / <span class="number">60</span>)&#125;, i(<span class="string">".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"</span>), n(), r()&#125;(<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//next\source\js\src\crash_cheat.js, 崩溃欺骗</span></span><br><span class="line"><span class="keyword">var</span> OriginTitle = <span class="built_in">document</span>.title;</span><br><span class="line"><span class="keyword">var</span> titleTime;</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'visibilitychange'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.hidden) &#123;</span><br><span class="line">        $(<span class="string">'[rel="shortcut icon"]'</span>).attr(<span class="string">'href'</span>, <span class="string">"/images/sao-16x16.png"</span>);</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">'😰 w(ﾟДﾟ)w 页面崩溃啦！ '</span>;</span><br><span class="line">        clearTimeout(titleTime);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">'[rel="shortcut icon"]'</span>).attr(<span class="string">'href'</span>, <span class="string">"/images/sao-16x16.png"</span>);</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">'😏 ♪(^∇^*) 噫？又好了！'</span>;</span><br><span class="line">        titleTime = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.title = <span class="string">'🤔 啊来来！原标题是啥来着？ '</span>;</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">        titleTime = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.title = <span class="string">'😮哦~！想起来了！ '</span>;</span><br><span class="line">        &#125;, <span class="number">4000</span>);</span><br><span class="line"></span><br><span class="line">        titleTime = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.title = OriginTitle;</span><br><span class="line">        &#125;, <span class="number">6000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// next\source\js\src\particle.js, 背景特效</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params">n,e,t</span>)</span>&#123;<span class="keyword">return</span> n.getAttribute(e)||t&#125;<span class="function"><span class="keyword">function</span> <span class="title">e</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> <span class="built_in">document</span>.getElementsByTagName(n)&#125;<span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params"></span>)</span>&#123;i=a.width=<span class="built_in">window</span>.innerWidth||<span class="built_in">document</span>.documentElement.clientWidth||<span class="built_in">document</span>.body.clientWidth,c=a.height=<span class="built_in">window</span>.innerHeight||<span class="built_in">document</span>.documentElement.clientHeight||<span class="built_in">document</span>.body.clientHeight&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;d.clearRect(<span class="number">0</span>,<span class="number">0</span>,i,c);<span class="keyword">var</span> n,e,t,a,m,r,y=[x].concat(w);w.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">o</span>)</span>&#123;<span class="keyword">for</span>(o.x+=o.xa,o.y+=o.ya,o.xa*=o.x&gt;i||o.x&lt;<span class="number">0</span>?<span class="number">-1</span>:<span class="number">1</span>,o.ya*=o.y&gt;c||o.y&lt;<span class="number">0</span>?<span class="number">-1</span>:<span class="number">1</span>,d.fillRect(o.x<span class="number">-.5</span>,o.y<span class="number">-.5</span>,<span class="number">1</span>,<span class="number">1</span>),e=<span class="number">0</span>;e&lt;y.length;e++)n=y[e],o!==n&amp;&amp;<span class="literal">null</span>!==n.x&amp;&amp;<span class="literal">null</span>!==n.y&amp;&amp;(a=o.x-n.x,m=o.y-n.y,r=a*a+m*m,r&lt;n.max&amp;&amp;(n===x&amp;&amp;r&gt;=n.max/<span class="number">2</span>&amp;&amp;(o.x-=<span class="number">.03</span>*a,o.y-=<span class="number">.03</span>*m),t=(n.max-r)/n.max,d.beginPath(),d.lineWidth=t/<span class="number">2</span>,d.strokeStyle=<span class="string">"rgba("</span>+u.c+<span class="string">","</span>+(t+<span class="number">.2</span>)+<span class="string">")"</span>,d.moveTo(o.x,o.y),d.lineTo(n.x,n.y),d.stroke()));y.splice(y.indexOf(o),<span class="number">1</span>)&#125;),l(o)&#125;<span class="keyword">var</span> i,c,a=<span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>),u=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=e(<span class="string">"script"</span>),o=t.length,i=t[o<span class="number">-1</span>];<span class="keyword">return</span>&#123;<span class="attr">l</span>:o,<span class="attr">z</span>:n(i,<span class="string">"zIndex"</span>,<span class="number">-1</span>),<span class="attr">o</span>:n(i,<span class="string">"opacity"</span>,<span class="number">.5</span>),<span class="attr">c</span>:n(i,<span class="string">"color"</span>,<span class="string">"0,0,0"</span>),<span class="attr">n</span>:n(i,<span class="string">"count"</span>,<span class="number">99</span>)&#125;&#125;(),m=<span class="string">"c_n"</span>+u.l,d=a.getContext(<span class="string">"2d"</span>),l=<span class="built_in">window</span>.requestAnimationFrame||<span class="built_in">window</span>.webkitRequestAnimationFrame||<span class="built_in">window</span>.mozRequestAnimationFrame||<span class="built_in">window</span>.oRequestAnimationFrame||<span class="built_in">window</span>.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;<span class="built_in">window</span>.setTimeout(n,<span class="number">1e3</span>/<span class="number">45</span>)&#125;,r=<span class="built_in">Math</span>.random,x=&#123;<span class="attr">x</span>:<span class="literal">null</span>,<span class="attr">y</span>:<span class="literal">null</span>,<span class="attr">max</span>:<span class="number">2e4</span>&#125;;a.id=m,a.style.cssText=<span class="string">"position:fixed;top:0;left:0;z-index:"</span>+u.z+<span class="string">";opacity:"</span>+u.o,e(<span class="string">"body"</span>)[<span class="number">0</span>].appendChild(a),t(),<span class="built_in">window</span>.onresize=t,<span class="built_in">window</span>.onmousemove=<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;n=n||<span class="built_in">window</span>.event,x.x=n.clientX,x.y=n.clientY&#125;,<span class="built_in">window</span>.onmouseout=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;x.x=<span class="literal">null</span>,x.y=<span class="literal">null</span>&#125;;<span class="keyword">for</span>(<span class="keyword">var</span> w=[],y=<span class="number">0</span>;u.n&gt;y;y++)&#123;<span class="keyword">var</span> s=r()*i,f=r()*c,h=<span class="number">2</span>*r()<span class="number">-1</span>,g=<span class="number">2</span>*r()<span class="number">-1</span>;w.push(&#123;<span class="attr">x</span>:s,<span class="attr">y</span>:f,<span class="attr">xa</span>:h,<span class="attr">ya</span>:g,<span class="attr">max</span>:<span class="number">6e3</span>&#125;)&#125;setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;o()&#125;,<span class="number">100</span>)&#125;();</span><br></pre></td></tr></table></figure>

<ul>
<li>layout.swig 添加引用</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--崩溃欺骗--&gt;</span></span><br><span class="line">&#123;% if theme.crashcheat %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/crash_cheat.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 点击爱心 --&gt;</span></span><br><span class="line">&#123;% if theme.clicklove %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/clicklove.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 背景特效 --&gt;</span></span><br><span class="line">&#123;% if theme.particle %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/particle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>


<h2 id="添加分享"><a href="#添加分享" class="headerlink" title="添加分享"></a>添加分享</h2><ul>
<li>优化步骤<ol>
<li>在这个 <a href="https://github.com/overtrue/share.js" target="_blank" rel="noopener">Share.js</a> 中拷贝dist目录到本地的 <strong>hexo/themes/next/source</strong> 下。</li>
<li><strong>_layout.swig</strong> 添加引用</li>
</ol>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- next/layout/_layout.swig --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/dist/css/share.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 分享功能 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/dist/js/social-share.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- next/layout/post.swig --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-spread"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入share.js --&gt;</span></span><br><span class="line">&#123;% if theme.share_js%&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-weibo-title</span>=<span class="string">"分享到微博"</span> <span class="attr">data-qq-title</span>=<span class="string">"分享到QQ"</span> <span class="attr">data-douban-title</span>=<span class="string">"分享到豆瓣"</span> <span class="attr">class</span>=<span class="string">"social-share"</span> <span class="attr">class</span>=<span class="string">"share-component"</span> <span class="attr">data-disabled</span>=<span class="string">"twitter,facebook"</span> <span class="attr">data-description</span>=<span class="string">"Share.js - 一键分享到微博，QQ空间，腾讯微博，人人，豆瓣"</span>&gt;</span>分享到：<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="友链页面优化"><a href="#友链页面优化" class="headerlink" title="友链页面优化"></a>友链页面优化</h2><ul>
<li><p>优化步骤</p>
<ol>
<li>设置友链布局， 新建 <strong>links.swig</strong></li>
<li>针对 <strong>/links</strong> 引用友链布局 <strong>links.swig</strong></li>
<li>主题配置模板里添加数据项</li>
</ol>
</li>
<li><p>设置友链页面布局， 新建 <strong>links.swig</strong></p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- next\layout\links.swig --&gt;</span></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">  &#123;######################&#125;</span><br><span class="line">  &#123;### LINKS BLOCK ###&#125;</span><br><span class="line">  &#123;######################&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"links"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.links-content</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">margin-top</span><span class="selector-pseudo">:1rem</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.link-navigation</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">            content: " ";</span><br><span class="line">            display: block;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.card</span> &#123;</span></span><br><span class="line">            width: 45%;</span><br><span class="line">            font-size: 1rem;</span><br><span class="line">            padding: 10px 20px;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line"><span class="css">            <span class="selector-tag">transition-duration</span>: 0<span class="selector-class">.15s</span>;</span></span><br><span class="line">            margin-bottom: 1rem;</span><br><span class="line"><span class="css">            <span class="selector-tag">display</span><span class="selector-pseudo">:flex</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span><span class="selector-pseudo">:nth-child(odd)</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span><span class="selector-pseudo">:nth-child(even)</span> &#123;</span></span><br><span class="line">            float: right;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(1<span class="selector-class">.1</span>);</span></span><br><span class="line"><span class="css">            <span class="selector-tag">box-shadow</span>: 0 2<span class="selector-tag">px</span> 6<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.12</span>), 0 0 6<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.04</span>);</span></span><br><span class="line">            background-image: radial-gradient(circle at 65% 10%, rgb(230, 196, 141), rgb(71, 254, 185));</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span><span class="selector-pseudo">:none</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span> <span class="selector-class">.ava</span> &#123;</span></span><br><span class="line">            width: 3rem!important;</span><br><span class="line">            height: 3rem!important;</span><br><span class="line"><span class="css">            <span class="selector-tag">margin</span><span class="selector-pseudo">:0</span>!<span class="selector-tag">important</span>;</span></span><br><span class="line">            margin-right: 1em!important;</span><br><span class="line"><span class="css">            <span class="selector-tag">border-radius</span><span class="selector-pseudo">:4px</span>;</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span> <span class="selector-class">.card-header</span> &#123;</span></span><br><span class="line">            font-style: italic;</span><br><span class="line">            overflow: hidden;</span><br><span class="line"><span class="css">            <span class="comment">/*width: 236px;*/</span></span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span> <span class="selector-class">.card-header</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line">            font-style: normal;</span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#2bbc8a</span>;</span></span><br><span class="line">            font-weight: bold;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span> <span class="selector-class">.card-header</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#d480aa</span>;</span></span><br><span class="line">            text-decoration: none;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.card</span> <span class="selector-class">.card-header</span> <span class="selector-class">.info</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">font-style</span><span class="selector-pseudo">:normal</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>:<span class="selector-id">#a3a3a3</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span><span class="selector-pseudo">:14px</span>;</span></span><br><span class="line">            min-width: 0;</span><br><span class="line">            text-overflow: ellipsis;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            white-space: nowrap;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-tag">span</span><span class="selector-class">.focus-links</span> &#123;</span></span><br><span class="line">            font-style: normal;</span><br><span class="line">            margin-left: 10px;</span><br><span class="line">            position: unset;</span><br><span class="line">            left: 0;</span><br><span class="line">            padding: 0 7px 0 5px;</span><br><span class="line">            font-size: 11px;</span><br><span class="line"><span class="css">            <span class="selector-tag">border-color</span>: <span class="selector-id">#42c02e</span>;</span></span><br><span class="line">            border-radius: 40px;</span><br><span class="line">            line-height: 24px;</span><br><span class="line">            height: 22px;</span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fff</span> !<span class="selector-tag">important</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#42c02e</span>;</span></span><br><span class="line">            display: inline-block;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.friends-btn</span>&#123;</span></span><br><span class="line">            text-align: center;</span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#555</span>!<span class="selector-tag">important</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">            border-radius: 3px;</span><br><span class="line">            font-size: 15px;</span><br><span class="line"><span class="css">            <span class="selector-tag">box-shadow</span>: <span class="selector-tag">inset</span> 0 0 10<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.35</span>);</span></span><br><span class="line">            border: none!important;</span><br><span class="line">            transition-property: unset;</span><br><span class="line">            padding: 0 15px;</span><br><span class="line">            margin: inherit;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.friends-btn</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line">            color: rgb(255, 255, 255) !important;</span><br><span class="line">            border-radius: 3px;</span><br><span class="line">            font-size: 15px;</span><br><span class="line"><span class="css">            <span class="selector-tag">box-shadow</span>: <span class="selector-tag">inset</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.35</span>);</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>, <span class="selector-id">#a166ab</span> 0%, <span class="selector-id">#ef4e7b</span> 25%, <span class="selector-id">#f37055</span> 50%, <span class="selector-id">#ef4e7b</span> 75%, <span class="selector-id">#a166ab</span> 100%);</span></span><br><span class="line">            margin: inherit;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"links-content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"no-icon note warning"</span> <span class="attr">style</span>=<span class="string">"background-color: #fdf8ea"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"link-info"</span>&gt;</span>👨‍🎓 大佬 —— 没有不劳而获的工作，更没有坐享其成的收获<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"link-navigation"</span>&gt;</span></span><br><span class="line">            &#123;% for link in theme.mylinks_expert %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"ava"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; link.avatar &#125;&#125;"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; link.site &#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span> &#123;&#123; link.nickname &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; link.site &#125;&#125;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"focus-links"</span>&gt;</span>关注<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span>&#123;&#123; link.info &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"no-icon note primary"</span> <span class="attr">style</span>=<span class="string">"background-color: #f5f0fa"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"link-info"</span>&gt;</span>🌤️ 工具 —— 你的春日好运正在派件，请保持心情舒畅<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"link-navigation"</span>&gt;</span></span><br><span class="line">            &#123;% for link in theme.mylinks_tool %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"ava"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; link.avatar &#125;&#125;"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; link.site &#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span> &#123;&#123; link.nickname &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; link.site &#125;&#125;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"focus-links"</span>&gt;</span>关注<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span>&#123;&#123; link.info &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"no-icon note info"</span> <span class="attr">style</span>=<span class="string">"background-color: #eef7fa"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"link-info"</span>&gt;</span>🍀 论坛 —— 我欲穿花寻路，直入白云深处，浩气展虹霓<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"link-navigation"</span>&gt;</span></span><br><span class="line">            &#123;% for link in theme.mylinks_forum %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"ava"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; link.avatar &#125;&#125;"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; link.site &#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span> &#123;&#123; link.nickname &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; link.site &#125;&#125;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"focus-links"</span>&gt;</span>关注<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span>&#123;&#123; link.info &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;&#123; page.content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  &#123;##########################&#125;</span><br><span class="line">  &#123;### END LINKS BLOCK ###&#125;</span><br><span class="line">  &#123;##########################&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>添加友链页面引用</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% block title %&#125;</span><br><span class="line">  &#123;%- elif page.type === 'links' and not page.title %&#125;</span><br><span class="line">    &#123;&#123;- __('title.links') + page_title_suffix &#125;&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">  &#123;% elif page.type === 'links' %&#125;</span><br><span class="line">    &#123;% include 'links.swig' %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>主题配置文件配置友链项</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># next/_config.yml</span></span><br><span class="line"><span class="comment"># 友情链接</span></span><br><span class="line"><span class="attr">mylinks_expert:</span>   <span class="comment">#大佬的链接</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">浅墨的游戏编程Blog</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://tva1.sinaimg.cn/crop.0.0.237.237.180/66b543f2gw1eh6yry9b7aj206m06mjro.jpg?KID=imgbed,tva&amp;Expires=1576171998&amp;ssig=0LPaIXuqrA</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://blog.csdn.net/poem_qianmo</span></span><br><span class="line">    <span class="attr">info:</span>  <span class="string">浅墨，</span> <span class="string">CSDN博客专家，</span> <span class="string">微软MVP,</span>  <span class="string">游戏，图形方面</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">骆昊的技术专栏</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://avatar.csdnimg.cn/C/8/3/3_jackfrued.jpg</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://blog.csdn.net/jackfrued</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">传道、授业、解惑，分享知识带来的快乐！</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">廖雪峰的官方网站</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://tva2.sinaimg.cn/crop.0.1.635.635.50/62d8efadgw1ej30downrsj20hs0hq0ws.jpg?KID=imgbed,tva&amp;Expires=1576170465&amp;ssig=Rasza%2FYFwm</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://www.liaoxuefeng.com/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">技术作家，著有《Spring</span> <span class="number">2.0</span><span class="string">核心技术与最佳实践》</span> <span class="string">头条文章作者</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">酷</span> <span class="string">壳</span> <span class="string">–</span> <span class="string">CoolShell</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://coolshell.cn/coolshell_logo.png</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://coolshell.cn/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">享受编程和技术所带来的快乐</span> <span class="string">–</span> <span class="string">Coding</span> <span class="string">Your</span> <span class="string">Ambition</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">说好不能打脸</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://avatar.csdnimg.cn/1/E/F/3_yinwenjie.jpg</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://blog.csdn.net/yinwenjie</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">CSDN博客专家,</span> <span class="string">著有《高性能服务系统构建与实战》</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">Sanarous</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://bestzuo.cn/images/touxiang.jpg</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://bestzuo.cn/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">Hexo博客美化</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mylinks_tool:</span>   <span class="comment">#工具链接</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">OverAPI</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">http://overapi.com/static/images/overapi-logo.png</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">http://overapi.com/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">Collecting</span> <span class="string">All</span> <span class="string">Cheat</span> <span class="string">Sheets</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">Temp</span> <span class="string">Mail</span> <span class="bullet">-</span> <span class="string">临时性</span> <span class="bullet">-</span> <span class="string">匿名电子邮件</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://temp-mail.org/images/favicon.ico</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://temp-mail.org/zh/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">Temp</span> <span class="string">Mail提供临时、安全、匿名、免费的一次性电子邮件地址。</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">tldr</span> <span class="string">|</span> <span class="string">bash用法帮助</span></span><br><span class="line">    <span class="attr">avatar:</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://tldr.ostera.io/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">免费分享各种学习视频，资源收集于网络！</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">tool.lu</span> <span class="string">|</span> <span class="string">程序员工具箱</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://qn11.tool.lu/201710/15/103320SbM84Ql4tETjg49a_28x28.png</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://tool.lu/nav/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">在线工具,开发人员工具,代码格式化、压缩、加密、解密,下载链接转换,ico图标制作</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mylinks_forum:</span>    <span class="comment">#论坛链接</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">即时通信网</span> <span class="string">|</span> <span class="string">IM</span> <span class="string">开发者社区</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://www.uo33.cn/favicon.ico</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">http://www.52im.net/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">既然爱可以做</span> <span class="string">那还谈它干嘛</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">HELLOGITHUB</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://hellogithub.com/favicon.ico</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://hellogithub.com/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">分享</span> <span class="string">GitHub</span> <span class="string">上有趣、入门级的开源项目</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">CTOLib码库</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://www.ctolib.com/static/favicon.ico</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://www.ctolib.com/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">分类收集GitHub上的开源项目</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">一起开源网</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">http://static.17ky.net/themes/default/images/fav.ico</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">http://www.17ky.net/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">做最好的开源项目分享平台</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">nickname:</span> <span class="string">今日热榜</span></span><br><span class="line">    <span class="attr">avatar:</span> <span class="string">https://file.ipadown.com/tophub/assets/images/favicon/favicon-32x32.png</span></span><br><span class="line">    <span class="attr">site:</span> <span class="string">https://tophub.today/</span></span><br><span class="line">    <span class="attr">info:</span> <span class="string">今日热榜提供各站热榜聚合，追踪全网热点、简单高效阅读。</span></span><br></pre></td></tr></table></figure>

<h2 id="归档页面美化"><a href="#归档页面美化" class="headerlink" title="归档页面美化"></a>归档页面美化</h2><ul>
<li>将归档页面布局 <strong>post-collapse.swig</strong> 中class属性改名(前面加个 <strong>my-</strong>， 避免CSS影响到其他页面</li>
</ul>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- &lt;article itemscope itemtype="http://schema.org/Article"&gt;</span></span><br><span class="line"><span class="addition">+ &lt;article class="my-post post-type-&#123;&#123; post.type | default('normal') &#125;&#125;" itemscope itemtype="http://schema.org/Article"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">- &lt;div class="post-meta"&gt;</span></span><br><span class="line"><span class="deletion">-   &lt;time itemprop="dateCreated"</span></span><br><span class="line"><span class="addition">+ div class="my-post-meta"&gt;</span></span><br><span class="line"><span class="addition">+   &lt;time class="my-post-time" itemprop="dateCreated"</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">- &lt;&#123;%- if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;%- endif %&#125; class="post-title"&gt;</span></span><br><span class="line"><span class="addition">+ &lt;&#123;%- if theme.seo %&#125;h3&#123;% else %&#125;h2&#123;%- endif %&#125; class="my-post-title"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">- &#123;&#123; next_url(post.link, postText + postTitleIcon, &#123;class: 'post-title-link post-title-link-external', itemprop: 'url'&#125;) &#125;&#125;</span></span><br><span class="line"><span class="addition">+ &#123;&#123; next_url(post.link, postText + postTitleIcon, &#123;class: 'my-post-title-link post-title-link-external', itemprop: 'url'&#125;) &#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">- &lt;a class="post-title-link" href="&#123;&#123; url_for(post.path) &#125;&#125;" itemprop="url"&gt;</span></span><br><span class="line"><span class="addition">+ &lt;a class="my-post-title-link" href="&#123;&#123; url_for(post.path) &#125;&#125;" itemprop="url"&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>样式美化需要在自定义样式文件里<ol>
<li>主题配置文件取消注释</li>
<li>新建自定义样式文件, <ul>
<li>自定义样式文件位置为站点目录下 <strong>source/_data</strong></li>
<li><del>非主题下source</del></li>
<li><a href="https://github.com/theme-next/hexo-theme-next/issues/1217" target="_blank" rel="noopener">custom_file_path用法</a></li>
</ul>
</li>
</ol>
</li>
</ul>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-  #style: source/_data/styles.styl</span></span><br><span class="line"><span class="addition">+  style: source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* next/source/_data/styles.styl */</span></span><br><span class="line"><span class="comment">/*归档页样式优化*/</span></span><br><span class="line"><span class="selector-class">.my-post-time</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mypost</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-moz-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-o-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-ms-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.my-post-title-link</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"📚"</span>;</span><br><span class="line">    <span class="attribute">font</span>: normal normal normal <span class="number">14px</span>/<span class="number">1</span> FontAwesome;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.my-post-title-link</span>&#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my-post-title</span>&#123;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#4c4948</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: .<span class="number">8rem</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my-post-header</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: top;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-moz-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-o-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-ms-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my-post-title-link</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my-post-meta</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#99a9bf</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#114142</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="彩色标签云"><a href="#彩色标签云" class="headerlink" title="彩色标签云"></a>彩色标签云</h2><ul>
<li>标签页面添加脚本， js随机生成背景颜色</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">   <span class="keyword">var</span> alltags=<span class="built_in">document</span>.getElementsByClassName(<span class="string">"tag-cloud-tags"</span>).item(<span class="number">0</span>);</span><br><span class="line">   <span class="keyword">var</span> tags=alltags.getElementsByTagName(<span class="string">"a"</span>);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = tags.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">     <span class="keyword">var</span> r=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">130</span>);</span><br><span class="line">     <span class="keyword">var</span> g=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">100</span>);</span><br><span class="line">     <span class="keyword">var</span> b=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">80</span>);</span><br><span class="line">     tags[i].style.background = <span class="string">"rgb("</span>+r+<span class="string">","</span>+g+<span class="string">","</span>+b+<span class="string">")"</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>主题配置文件里面设置标签文字颜色范围</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">start:</span> <span class="string">"#fff"</span> <span class="comment"># Start color (hex, rgba, hsla or color keywords)</span></span><br><span class="line"><span class="attr">end:</span> <span class="string">"#fff"</span> <span class="comment"># End color (hex, rgba, hsla or color keywords)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义样式设置标签云样式， <strong>source/_data/styles.styl</strong></p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*标签云设置*/</span></span><br><span class="line"><span class="selector-class">.tag-cloud-tags</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">counter-reset</span>: tags;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#posts</span><span class="selector-class">.posts-expand</span> <span class="selector-class">.tag-cloud</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tag-cloud</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">-moz-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.2s</span> ease-out;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0px</span>;</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">  <span class="selector-tag">text-decoration</span>: <span class="selector-tag">none</span>;</span><br><span class="line">  <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(100,154,182,0<span class="selector-class">.902</span>);</span><br><span class="line">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span> !<span class="selector-tag">important</span>;</span><br><span class="line">  <span class="selector-tag">-webkit-box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  <span class="selector-tag">-moz-box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  <span class="selector-tag">box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;<span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">"📜"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="修复代码高亮"><a href="#修复代码高亮" class="headerlink" title="修复代码高亮"></a>修复代码高亮</h2><ul>
<li>修改高亮格式， <strong>next\source\css\_common\scaffolding\highlight\highlight.styl</strong></li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 在.highlight中添加 */</span></span><br><span class="line"><span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: $highlight-background;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* diff 高亮， 背景色改为字体颜色 */</span></span><br><span class="line"><span class="selector-class">.deletion</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff511a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.addition</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4ca340</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="添加首页轮播图"><a href="#添加首页轮播图" class="headerlink" title="添加首页轮播图"></a>添加首页轮播图</h2><ul>
<li>添加步骤<ol>
<li><strong>next/layout/_macro/carousel.swig</strong>, 添加轮播图布局</li>
<li><strong>next/layout/index.swig</strong>, 添加对轮播图的引用</li>
<li><strong>next/_config.yml</strong>, 启用轮播图</li>
</ol>
</li>
</ul>
<ul>
<li><p>添加轮播图布局</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.carousel.enable %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.glyphicon-chevron-left</span><span class="selector-pseudo">:before</span>&#123;</span></span><br><span class="line">	content: "《"</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.glyphicon-chevron-right</span><span class="selector-pseudo">:before</span>&#123;</span></span><br><span class="line">	content: "》"</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.carousel</span>&#123;</span></span><br><span class="line">	width: 65%;</span><br><span class="line">	height: 100%;</span><br><span class="line">	position: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &#123;</span></span><br><span class="line">  position: relative;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span> &#123;</span></span><br><span class="line">  display: none;</span><br><span class="line">  position: relative;</span><br><span class="line"><span class="css">  <span class="selector-tag">-webkit-transition</span>: 0<span class="selector-class">.6s</span> <span class="selector-tag">ease-in-out</span> <span class="selector-tag">left</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">-o-transition</span>: 0<span class="selector-class">.6s</span> <span class="selector-tag">ease-in-out</span> <span class="selector-tag">left</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">transition</span>: 0<span class="selector-class">.6s</span> <span class="selector-tag">ease-in-out</span> <span class="selector-tag">left</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span> &gt; <span class="selector-tag">img</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span> &#123;</span></span><br><span class="line">  line-height: 1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="keyword">@media</span> all <span class="keyword">and</span> (transform-<span class="number">3</span>d), (-webkit-transform-<span class="number">3</span>d) &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">-webkit-transition</span>: <span class="selector-tag">-webkit-transform</span> 0<span class="selector-class">.6s</span> <span class="selector-tag">ease-in-out</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">-moz-transition</span>: <span class="selector-tag">-moz-transform</span> 0<span class="selector-class">.6s</span> <span class="selector-tag">ease-in-out</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">-o-transition</span>: <span class="selector-tag">-o-transform</span> 0<span class="selector-class">.6s</span> <span class="selector-tag">ease-in-out</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.6s</span> <span class="selector-tag">ease-in-out</span>;</span></span><br><span class="line">    -webkit-backface-visibility: hidden;</span><br><span class="line">    -moz-backface-visibility: hidden;</span><br><span class="line">    backface-visibility: hidden;</span><br><span class="line">    -webkit-perspective: 1000px;</span><br><span class="line">    -moz-perspective: 1000px;</span><br><span class="line">    perspective: 1000px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span><span class="selector-class">.next</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span><span class="selector-class">.active</span><span class="selector-class">.right</span> &#123;</span></span><br><span class="line">    -webkit-transform: translate3d(100%, 0, 0);</span><br><span class="line">    transform: translate3d(100%, 0, 0);</span><br><span class="line">    left: 0;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span><span class="selector-class">.prev</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span><span class="selector-class">.active</span><span class="selector-class">.left</span> &#123;</span></span><br><span class="line">    -webkit-transform: translate3d(-100%, 0, 0);</span><br><span class="line">    transform: translate3d(-100%, 0, 0);</span><br><span class="line">    left: 0;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span><span class="selector-class">.next</span><span class="selector-class">.left</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span><span class="selector-class">.prev</span><span class="selector-class">.right</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.item</span><span class="selector-class">.active</span> &#123;</span></span><br><span class="line">    -webkit-transform: translate3d(0, 0, 0);</span><br><span class="line">    transform: translate3d(0, 0, 0);</span><br><span class="line">    left: 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.active</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.next</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.prev</span> &#123;</span></span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.active</span> &#123;</span></span><br><span class="line">  left: 0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.next</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.prev</span> &#123;</span></span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.next</span> &#123;</span></span><br><span class="line">  left: 100%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.prev</span> &#123;</span></span><br><span class="line">  left: -100%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.next</span><span class="selector-class">.left</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.prev</span><span class="selector-class">.right</span> &#123;</span></span><br><span class="line">  left: 0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.active</span><span class="selector-class">.left</span> &#123;</span></span><br><span class="line">  left: -100%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-inner</span> &gt; <span class="selector-class">.active</span><span class="selector-class">.right</span> &#123;</span></span><br><span class="line">  left: 100%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> &#123;</span></span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  width: 15%;</span><br><span class="line"><span class="css">  <span class="selector-tag">opacity</span>: 0<span class="selector-class">.5</span>;</span></span><br><span class="line">  filter: alpha(opacity=50);</span><br><span class="line">  font-size: 20px;</span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">  text-align: center;</span><br><span class="line"><span class="css">  <span class="selector-tag">text-shadow</span>: 0 1<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.6</span>);</span></span><br><span class="line">  background-color: rgba(0, 0, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span><span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-image</span>: <span class="selector-tag">-webkit-linear-gradient</span>(<span class="selector-tag">left</span>, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>) 0%, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.0001</span>) 100%);</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-image</span>: <span class="selector-tag">-o-linear-gradient</span>(<span class="selector-tag">left</span>, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>) 0%, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.0001</span>) 100%);</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>) 0%, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.0001</span>) 100%);</span></span><br><span class="line">  background-repeat: repeat-x;</span><br><span class="line">  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#80000000, endColorstr=#00000000, GradientType=1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span><span class="selector-class">.right</span> &#123;</span></span><br><span class="line">  left: auto;</span><br><span class="line">  right: 0;</span><br><span class="line"><span class="css">  <span class="selector-tag">background-image</span>: <span class="selector-tag">-webkit-linear-gradient</span>(<span class="selector-tag">left</span>, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.0001</span>) 0%, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>) 100%);</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-image</span>: <span class="selector-tag">-o-linear-gradient</span>(<span class="selector-tag">left</span>, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.0001</span>) 0%, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>) 100%);</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.0001</span>) 0%, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>) 100%);</span></span><br><span class="line">  background-repeat: repeat-x;</span><br><span class="line">  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000, endColorstr=#80000000, GradientType=1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span><span class="selector-pseudo">:hover</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line">  outline: 0;</span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">  text-decoration: none;</span><br><span class="line"><span class="css">  <span class="selector-tag">opacity</span>: 0<span class="selector-class">.9</span>;</span></span><br><span class="line">  filter: alpha(opacity=90);</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-prev</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-next</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.glyphicon-chevron-left</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.glyphicon-chevron-right</span> &#123;</span></span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 50%;</span><br><span class="line">  margin-top: -10px;</span><br><span class="line">  z-index: 5;</span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-prev</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.glyphicon-chevron-left</span> &#123;</span></span><br><span class="line">  left: 50%;</span><br><span class="line">  margin-left: -10px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-next</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.glyphicon-chevron-right</span> &#123;</span></span><br><span class="line">  right: 50%;</span><br><span class="line">  margin-right: -10px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-prev</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-next</span> &#123;</span></span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 1;</span><br><span class="line">  font-family: serif;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-prev</span><span class="selector-pseudo">:before</span> &#123;</span></span><br><span class="line">  content: 2039;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-next</span><span class="selector-pseudo">:before</span> &#123;</span></span><br><span class="line">  content: 203a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-indicators</span> &#123;</span></span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: 10px;</span><br><span class="line">  left: 50%;</span><br><span class="line">  z-index: 15;</span><br><span class="line">  width: 60%;</span><br><span class="line">  margin-left: -30%;</span><br><span class="line">  padding-left: 0;</span><br><span class="line">  list-style: none;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-indicators</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line">  display: inline-block;</span><br><span class="line">  width: 10px;</span><br><span class="line">  height: 10px;</span><br><span class="line">  margin: 1px;</span><br><span class="line">  text-indent: -999px;</span><br><span class="line"><span class="css">  <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fff</span>;</span></span><br><span class="line">  border-radius: 10px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#000</span> 9;</span></span><br><span class="line">  background-color: rgba(0, 0, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-indicators</span> <span class="selector-class">.active</span> &#123;</span></span><br><span class="line">  margin: 0;</span><br><span class="line">  width: 12px;</span><br><span class="line">  height: 12px;</span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-caption</span> &#123;</span></span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 15%;</span><br><span class="line">  right: 15%;</span><br><span class="line">  bottom: 20px;</span><br><span class="line">  z-index: 10;</span><br><span class="line">  padding-top: 20px;</span><br><span class="line">  padding-bottom: 20px;</span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">  text-align: center;</span><br><span class="line"><span class="css">  <span class="selector-tag">text-shadow</span>: 0 1<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.6</span>);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.carousel-caption</span> <span class="selector-class">.btn</span> &#123;</span></span><br><span class="line">  text-shadow: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-control</span> <span class="selector-class">.glyphicon-chevron-left</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-control</span> <span class="selector-class">.glyphicon-chevron-right</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-prev</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-next</span> &#123;</span></span><br><span class="line">    width: 30px;</span><br><span class="line">    height: 30px;</span><br><span class="line">    margin-top: -10px;</span><br><span class="line">    font-size: 30px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-control</span> <span class="selector-class">.glyphicon-chevron-left</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-prev</span> &#123;</span></span><br><span class="line">    margin-left: -10px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-control</span> <span class="selector-class">.glyphicon-chevron-right</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-control</span> <span class="selector-class">.icon-next</span> &#123;</span></span><br><span class="line">    margin-right: -10px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-caption</span> &#123;</span></span><br><span class="line">    left: 20%;</span><br><span class="line">    right: 20%;</span><br><span class="line">    padding-bottom: 30px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.carousel-indicators</span> &#123;</span></span><br><span class="line">    bottom: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"320px"</span> <span class="attr">style</span>=<span class="string">"border: 0px; overflow: hidden; border-radius: 10px;"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myCarousel"</span> <span class="attr">class</span>=<span class="string">"carousel slide"</span> <span class="attr">data-ride</span>=<span class="string">"carousel"</span> <span class="attr">data-interval</span>=<span class="string">"3500"</span> <span class="attr">style</span>=<span class="string">"float:left"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 轮播（Carousel）指标 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"carousel-indicators"</span>&gt;</span></span><br><span class="line">		&#123;% set index = 0 %&#125;</span><br><span class="line">		&#123;% for item in theme.carousel.item %&#125;</span><br><span class="line"></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">"#myCarousel"</span> <span class="attr">data-slide-to</span>=<span class="string">"&#123;&#123;index&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			&#123;% set index = index+1 %&#125;</span><br><span class="line"></span><br><span class="line">		&#123;% endfor %&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 轮播（Carousel）项目 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"carousel-inner"</span> <span class="attr">style</span>=<span class="string">"height: 280px; border-radius: 10px; width: 100%;"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		&#123;% set act = 0 %&#125;</span><br><span class="line">    &#123;% set month = date(null, 'MM') %&#125;</span><br><span class="line">		 &#123;% for item in theme.carousel.item %&#125;</span><br><span class="line">		</span><br><span class="line">	    	&#123;% if act===0 %&#125;</span><br><span class="line">				<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"item active"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(item.link) &#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">style</span>=<span class="string">"height: 100%;"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./images/&#123;&#123;month&#125;&#125;月.png"</span>   <span class="attr">style</span>=<span class="string">"width: 100%; height: 100%"</span> &gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">				&#123;% set act = 1 %&#125;</span><br><span class="line">				&#123;% elseif act===1 %&#125;</span><br><span class="line">					<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"item"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(item.link) &#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">style</span>=<span class="string">"height: 100%;"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;item.img&#125;&#125;"</span>  <span class="attr">style</span>=<span class="string">"width: 100%; height: 100%;"</span> &gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">			&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">		&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">	 </span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 轮播（Carousel）导航 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left carousel-control"</span> <span class="attr">href</span>=<span class="string">"#myCarousel"</span> <span class="attr">role</span>=<span class="string">"button"</span> <span class="attr">data-slide</span>=<span class="string">"prev"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-chevron-left"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		    </span><br><span class="line">		<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"right carousel-control"</span> <span class="attr">href</span>=<span class="string">"#myCarousel"</span> <span class="attr">role</span>=<span class="string">"button"</span> <span class="attr">data-slide</span>=<span class="string">"next"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-chevron-right"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		   </span><br><span class="line">		<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>  <span class="attr">class</span>=<span class="string">"rights"</span> <span class="attr">style</span>=<span class="string">"width: 30%; height: 290px; margin-right: 0px;margin-left: 20px;float: left;"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 天气插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">height</span>=<span class="string">"50px"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">allowtransparency</span>=<span class="string">"true"</span> <span class="attr">src</span>=<span class="string">"http://i.tianqi.com/index.php?c=code&amp;id=12&amp;color=%23&amp;bdc=%23&amp;icon=1&amp;py=taiyuan&amp;num=2"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 速查表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-carousel"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/categories/速查表/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"right-siders nofancybox"</span> <span class="attr">src</span>=<span class="string">"/images/cheatsheet.png"</span> <span class="attr">width</span>=<span class="string">"100%"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 学习笔记 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-carousel"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/categories/学习笔记/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"right-siders nofancybox"</span> <span class="attr">src</span>=<span class="string">"/images/learn.png"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 资源分享 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-carousel"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/categories/资源分享/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"right-siders nofancybox"</span> <span class="attr">src</span>=<span class="string">"/images/share.png"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 随笔 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-carousel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/categories/随笔/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"right-siders nofancybox"</span> <span class="attr">src</span>=<span class="string">"/images/essay.png"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tag-cloud"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tag-cloud-tags"</span> <span class="attr">id</span>=<span class="string">"tags"</span>&gt;</span></span><br><span class="line">    &#123;&#123; tagcloud(&#123;min_font: 14, max_font: 14, amount: 20, color: true, start_color: '#fff', end_color: '#fff'&#125;) &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">   <span class="keyword">var</span> alltags=<span class="built_in">document</span>.getElementById(<span class="string">'tags'</span>);</span></span><br><span class="line"><span class="actionscript">   <span class="keyword">var</span> tags=alltags.getElementsByTagName(<span class="string">'a'</span>);</span></span><br><span class="line"><span class="actionscript">   <span class="keyword">for</span> (<span class="keyword">var</span> i = tags.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span></span><br><span class="line"><span class="javascript">     <span class="keyword">var</span> r=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">130</span>);</span></span><br><span class="line"><span class="javascript">     <span class="keyword">var</span> g=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">100</span>);</span></span><br><span class="line"><span class="javascript">     <span class="keyword">var</span> b=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">80</span>);</span></span><br><span class="line"><span class="actionscript">     tags[i].style.background = <span class="string">"rgb("</span>+r+<span class="string">","</span>+g+<span class="string">","</span>+b+<span class="string">")"</span>;</span></span><br><span class="line">   &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加轮播图引用</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- blog content 里添加 --&gt;</span></span><br><span class="line">&#123;% include '_macro/carousel.swig' %&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>启用轮播图， 添加轮播图</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">carousel:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item:</span> <span class="string">[</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">      <span class="attr">'link':</span> <span class="string">'/'</span><span class="string">,</span></span><br><span class="line">    <span class="string">&#125;,</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">      <span class="attr">'link':</span> <span class="string">'https://mailchi.mp/e92415d27722/leaf'</span><span class="string">,</span></span><br><span class="line">      <span class="attr">'img':</span> <span class="string">'https://s2.ax1x.com/2019/10/24/KNHdCq.jpg'</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">  <span class="string">]</span></span><br></pre></td></tr></table></figure>

<h2 id="仿知乎卡片链接"><a href="#仿知乎卡片链接" class="headerlink" title="仿知乎卡片链接"></a>仿知乎卡片链接</h2><ul>
<li><p>步骤</p>
<ol>
<li>卡片链接脚本</li>
<li><strong>_layout.swig</strong> 引用脚本</li>
<li>需要使用卡片链接样式时， class为 <strong>LinkCard</strong></li>
</ol>
</li>
<li><p>卡片链接脚本</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//next/source/js/src/linkcard.js</span></span><br><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> LinkCards=<span class="built_in">document</span>.getElementsByClassName(<span class="string">'LinkCard'</span>);</span><br><span class="line">  <span class="keyword">if</span>(LinkCards.length != <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> LinkCard=LinkCards[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> link=LinkCard.href;</span><br><span class="line">    <span class="keyword">var</span> title=LinkCard.innerText;</span><br><span class="line">    LinkCard.innerHTML=<span class="string">"&lt;style type=text/css&gt;.LinkCard,.LinkCard:hover&#123;text-decoration:none;border:none!important;color:inherit!important&#125;.LinkCard&#123;position:relative;display:block;margin:5px auto;width:330px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;color:inherit;text-decoration:none&#125;.ztext&#123;word-break:break-word;line-height:1.6&#125;.LinkCard-backdrop&#123;position:absolute;top:0;left:0;right:0;bottom:0;background-repeat:no-repeat;-webkit-filter:blur(20px);filter:blur(20px);background-size:cover;background-position:center&#125;.LinkCard,.LinkCard:hover&#123;text-decoration:none;border:none!important;color:inherit!important&#125;.LinkCard-content&#123;position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:inherit;background-color:rgba(246,246,246,0.88)&#125;.LinkCard-text&#123;overflow:hidden;width:260px;&#125;.LinkCard-title&#123;white-space: nowrap;display:-webkit-box;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;max-height:calc(16px * 1.25 * 2);font-size:16px;font-weight:500;line-height:1.25;color:#1a1a1a&#125;@media(max-width: 767px)&#123;.LinkCard-title&#123;font-size:13px;&#125;&#125;.LinkCard-meta&#123;display:flex;margin-top:4px;font-size:14px;line-height:20px;color:#999;white-space:nowrap&#125;.LinkCard-imageCell&#123;margin-left:28px;border-radius:30px;width:70px;&#125;.LinkCard-image&#123;display:block;width:60px;height:auto;border-radius:inherit&#125;&lt;/style&gt;&lt;span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)&gt;&lt;/span&gt;&lt;span class=LinkCard-content&gt;&lt;span class=LinkCard-text&gt;&lt;span class=LinkCard-title&gt;"</span>+title+<span class="string">"&lt;/span&gt;&lt;span class=LinkCard-meta&gt;&lt;span style=display:inline-flex;align-items:center&gt;&lt;svg class="</span>+<span class="string">"'Zi Zi--InsertLink'"</span>+<span class="string">" fill=currentColor viewBox="</span>+<span class="string">"'0 0 24 24'"</span>+<span class="string">" width=17 height=17&gt;&lt;path d="</span>+<span class="string">"'M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z'"</span>+<span class="string">" fill-rule=evenodd&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;"</span>+link+<span class="string">"&lt;/span&gt;&lt;/span&gt;&lt;span class=LinkCard-imageCell&gt;&lt;img class=LinkCard-image alt=图标 src=/images/linkcard.png&gt;&lt;/span&gt;&lt;/span&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = LinkCards.length - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">      LinkCard=LinkCards[i];</span><br><span class="line">      title=LinkCard.innerText;</span><br><span class="line">      link=LinkCard.href;</span><br><span class="line">      LinkCard.innerHTML=<span class="string">"&lt;span class=LinkCard-backdrop style=background-image:url(https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg)&gt;&lt;/span&gt;&lt;span class=LinkCard-content&gt;&lt;span class=LinkCard-text&gt;&lt;span class=LinkCard-title&gt;"</span>+title+<span class="string">"&lt;/span&gt;&lt;span class=LinkCard-meta&gt;&lt;span style=display:inline-flex;align-items:center&gt;&lt;svg class="</span>+<span class="string">"'Zi Zi--InsertLink'"</span>+<span class="string">" fill=currentColor viewBox="</span>+<span class="string">"'0 0 24 24'"</span>+<span class="string">" width=17 height=17&gt;&lt;path d="</span>+<span class="string">"'M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z'"</span>+<span class="string">" fill-rule=evenodd&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;"</span>+link+<span class="string">"&lt;/span&gt;&lt;/span&gt;&lt;span class=LinkCard-imageCell&gt;&lt;img class=LinkCard-image alt=图标 src=/images/linkcard.png&gt;&lt;/span&gt;&lt;/span&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>布局中引用脚本</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/linkcard.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用方法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/links/"</span> <span class="attr">class</span>=<span class="string">"LinkCard"</span>&gt;</span>友情链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="启用加载进度"><a href="#启用加载进度" class="headerlink" title="启用加载进度"></a>启用加载进度</h2><ul>
<li>依赖项：<a href="https://github.com/theme-next/theme-next-pace" target="_blank" rel="noopener">pace</a></li>
<li>主题： <a href="https://github.hubspot.com/pace/docs/welcome/" target="_blank" rel="noopener">选择进度主题</a></li>
<li>下载依赖</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> themes/next</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace <span class="built_in">source</span>/lib/pace</span><br></pre></td></tr></table></figure>
<ul>
<li>启用加载进度</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Progress bar in the top during page loading.</span></span><br><span class="line"><span class="comment"># 依赖项参考链接: https://github.com/theme-next/theme-next-pace</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/HubSpot/pace</span></span><br><span class="line"><span class="attr">pace:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Themes list:</span></span><br><span class="line">  <span class="comment"># big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple</span></span><br><span class="line">  <span class="comment"># corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">bounce</span></span><br></pre></td></tr></table></figure>

<h2 id="版权说明"><a href="#版权说明" class="headerlink" title="版权说明"></a>版权说明</h2><ul>
<li><p>优化步骤</p>
<ol>
<li>修改布局，优化样式</li>
<li>启用版权</li>
</ol>
</li>
<li><p>修改布局， <strong>layout/_partials/post/post-copyright.swig</strong></p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;%- set ccIcon = '<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-fw fa-creative-commons"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>' %&#125;</span><br><span class="line">&#123;%- set ccText = theme.creative_commons.license | upper %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 转载还是原创链接 --&gt;</span></span><br><span class="line">&#123;%- set ccLink =  page.link or page.permalink %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"my-post-copyright"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-title"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('本文标题') + __('symbol.colon') &#125;&#125; <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    &#123;&#123;- page.title or title &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-author"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('post.copyright.author') + __('symbol.colon') &#125;&#125; <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    &#123;&#123;- page.author or author &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-date"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('发布时间') + __('symbol.colon') &#125;&#125; <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">     &#123;&#123;-page.date.format("YYYY年MM月DD日 - HH:mm:ss")&#125;&#125; </span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-update"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('最后更新') + __('symbol.colon') &#125;&#125; <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    &#123;&#123;- page.updated.format("YYYY年MM月DD日 - HH:mm:ss") or page.date.format("YYYY年MM月DD日 - HH:mm:ss") &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-link"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('post.copyright.link') + __('symbol.colon') &#125;&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    &#123;&#123; next_url(ccLink, ccLink, &#123;title: page.title&#125;) &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"copy-path"</span>  <span class="attr">title</span>=<span class="string">"点击复制文章链接"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-clipboard"</span> <span class="attr">data-clipboard-text</span>=<span class="string">"&#123;&#123; ccLink &#125;&#125;"</span>  <span class="attr">aria-label</span>=<span class="string">"复制成功！"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-license"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('post.copyright.license_title') + __('symbol.colon') &#125;&#125; <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    &#123;&#123;- __('post.copyright.license_content', next_url(ccURL, ccIcon + ccText)) &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.my-post-copyright</span> &#123;</span></span><br><span class="line">    width: 85%;</span><br><span class="line">    max-width: 45em;</span><br><span class="line"><span class="css">    <span class="selector-tag">margin</span>: 2<span class="selector-class">.8em</span> <span class="selector-tag">auto</span> 0;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">padding</span>: <span class="selector-class">.5em</span> 1<span class="selector-tag">em</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#d3d3d3</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span>: <span class="selector-class">.93rem</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">line-height</span>: 1<span class="selector-class">.6em</span>;</span></span><br><span class="line">    word-break: break-all;</span><br><span class="line"><span class="css">    <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(255,255,255,<span class="selector-class">.4</span>);</span></span><br><span class="line"><span class="css">    <span class="selector-tag">box-shadow</span>: 0 0 10<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.12</span>);</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#555</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> clipboard = <span class="keyword">new</span> Clipboard(<span class="string">'.fa-clipboard'</span>);</span></span><br><span class="line"><span class="actionscript">    clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">".fa-clipboard"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line">        swal(&#123;   </span><br><span class="line"><span class="actionscript">          title: <span class="string">""</span>,   </span></span><br><span class="line"><span class="actionscript">          text: <span class="string">'复制成功'</span>,   </span></span><br><span class="line"><span class="actionscript">          html: <span class="literal">false</span>,</span></span><br><span class="line">          timer: 500,   </span><br><span class="line"><span class="actionscript">          showConfirmButton: <span class="literal">false</span></span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);  </span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>启用版权说明， 上述主题配置里已配置好</li>
<li>涉及转载的版权说明， 需要在 <strong>front-matter</strong> 增添几个字段</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">author:</span> <span class="comment"># 只有转载才添加该字段， 在此加入原作者名字</span></span><br><span class="line"><span class="attr">link:</span>   <span class="comment"># 同上， 在此加入原文链接</span></span><br></pre></td></tr></table></figure>

<h2 id="侧边栏添加一言"><a href="#侧边栏添加一言" class="headerlink" title="侧边栏添加一言"></a>侧边栏添加一言</h2><ul>
<li><p>操作步骤</p>
<ol>
<li>主题配置文件取消注释，添加侧边栏自定义文件, <strong>source/_data/sidebar.swig</strong></li>
<li>添加自定义样式</li>
</ol>
</li>
<li><p>一言API: <a href="https://hitokoto.cn/api" target="_blank" rel="noopener">https://hitokoto.cn/api</a></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- source/_data/sidebar.swig --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- none-select-br --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- hitokoto --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hitokoto-title"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-paragraph"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">b</span>&gt;</span>一言<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"hitokoto"</span>&gt;</span>:D 获取中...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">id</span>=<span class="string">"hitofrom"</span>&gt;</span>:D 获取中...<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  fetch(<span class="string">'https://v1.hitokoto.cn'</span>)</span></span><br><span class="line"><span class="actionscript">    .then(<span class="function"><span class="keyword">function</span> <span class="params">(res)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> res.json();</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="actionscript">    .then(<span class="function"><span class="keyword">function</span> <span class="params">(data)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> hitokoto = <span class="built_in">document</span>.getElementById(<span class="string">'hitokoto'</span>);</span></span><br><span class="line"><span class="actionscript">      hitokoto.innerText = <span class="string">'\xa0\xa0\xa0\xa0\xa0\xa0\xa0'</span> + data.hitokoto;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> hitofrom = <span class="built_in">document</span>.getElementById(<span class="string">'hitofrom'</span>);</span></span><br><span class="line"><span class="actionscript">      hitofrom.innerText = <span class="string">"——"</span> + data.from + <span class="string">'\xa0'</span>; </span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="actionscript">    .catch(<span class="function"><span class="keyword">function</span> <span class="params">(err)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.error(err);</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="自定义样式"><a href="#自定义样式" class="headerlink" title="自定义样式"></a>自定义样式</h2><ul>
<li>如下代码中展示自定义样式， 包括上述存放于自定义样式文件的CSS代码</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*归档页样式优化*/</span></span><br><span class="line"><span class="selector-class">.my-post-time</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mypost</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-moz-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-o-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-ms-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.my-post-title-link</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"📚"</span>;</span><br><span class="line">    <span class="attribute">font</span>: normal normal normal <span class="number">14px</span>/<span class="number">1</span> FontAwesome;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.my-post-title-link</span>&#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my-post-title</span>&#123;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#4c4948</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: .<span class="number">8rem</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my-post-header</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: top;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-moz-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-o-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-ms-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my-post-title-link</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my-post-meta</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#99a9bf</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#114142</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">*修改推荐文章标题前面图标*/</span><br><span class="line"><span class="selector-class">.popular-posts-title</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"🏷️"</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*标签云设置*/</span></span><br><span class="line"><span class="selector-class">.tag-cloud-tags</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">counter-reset</span>: tags;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#posts</span><span class="selector-class">.posts-expand</span> <span class="selector-class">.tag-cloud</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tag-cloud</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">-moz-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.2s</span> ease-out;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0px</span>;</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">  <span class="selector-tag">text-decoration</span>: <span class="selector-tag">none</span>;</span><br><span class="line">  <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(100,154,182,0<span class="selector-class">.902</span>);</span><br><span class="line">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span> !<span class="selector-tag">important</span>;</span><br><span class="line">  <span class="selector-tag">-webkit-box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  <span class="selector-tag">-moz-box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  <span class="selector-tag">box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;<span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">"📜"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 以上均为上述优化步骤中加入的CSS样式， 加下来为自定义样式*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*更好的侧边滚动条*/</span></span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:start</span><span class="selector-pseudo">:increment</span>,<span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:end</span><span class="selector-pseudo">:decrement</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-corner</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-track</span>,<span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-track</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:start</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="comment">/*background: url(../images/scrollbar_arrow.png) no-repeat 0 0;*/</span>  <span class="comment">/*可以添加滚动条样式*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分享按钮样式 */</span></span><br><span class="line"><span class="selector-class">.post-spread</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 站点头部信息 */</span></span><br><span class="line"><span class="selector-class">.site-meta</span> <span class="selector-class">.site-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'Comic Sans MS'</span>, sans-serif;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*设置文章字体排版合理*/</span></span><br><span class="line"><span class="selector-class">.post-body</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: justify;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置内容背景与背景特效颜色一致 */</span></span><br><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f7f9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.posts-expand</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">sidebar-inner</span> &#123;</span><br><span class="line"> <span class="attribute">background</span>: <span class="number">#f5f7f9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*修改post文章样式*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文章元数据样式*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文章标题样式*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文章页文章主体*/</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#posts</span><span class="selector-class">.posts-expand</span>&#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章页面 */</span></span><br><span class="line"><span class="selector-tag">h2</span><span class="selector-class">.post-title</span>&#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-class">.post-title</span>&#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文章标题字体*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文章标题动态效果*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title-link</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, #a166ab <span class="number">0%</span>, #ef4e7b <span class="number">25%</span>, #f37055 <span class="number">50%</span>, #ef4e7b <span class="number">75%</span>, #a166ab <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*修改h1前面图标*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">h1</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"🌈"</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">16px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*修改h2前面图标*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"🌞"</span>;</span><br><span class="line">    <span class="attribute">font</span>: normal normal normal <span class="number">14px</span>/<span class="number">1</span> FontAwesome;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">16px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*修改h3前面图标*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"🔍"</span>;</span><br><span class="line">    <span class="attribute">font</span>: normal normal normal <span class="number">14px</span>/<span class="number">1</span> FontAwesome;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 4~6级标题前置设置 */</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:before</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.post-block</span><span class="selector-class">.tag</span> <span class="selector-class">.collection-title</span> <span class="selector-tag">h2</span>&#123;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#3f3f3f</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#b4e8fa</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">letter-spacing</span>:<span class="number">1.5px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">color</span>:<span class="number">#3f3f3f</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">10px</span> <span class="number">0%</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 有序和无序图标设置 */</span></span><br><span class="line"><span class="selector-tag">ol</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: .<span class="number">4rem</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> .<span class="number">8rem</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">counter-reset</span>: ol-li;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: .<span class="number">4rem</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> .<span class="number">8rem</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">counter-reset</span>: ul-li;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*设置无序标签内文本样式*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left</span><br><span class="line">    color: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: .<span class="number">60rem</span> <span class="number">12px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">19px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">19px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0.4rem</span> <span class="number">12px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">counter</span>(ol-li);</span><br><span class="line">    <span class="attribute">counter-increment</span>: ol-li;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*valine 评论系统样式*/</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#comments</span><span class="selector-class">.comments</span><span class="selector-class">.v</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.vheader</span><span class="selector-class">.item2</span>&#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#5f5f5f</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">35px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vwrap</span> <span class="selector-class">.vheader</span><span class="selector-class">.item2</span> <span class="selector-class">.vinput</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-class">.vnick</span><span class="selector-class">.vinput</span>&#123;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">2px</span> solid <span class="number">#a4d8fa</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.vcontrol</span>&#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#comments</span><span class="selector-class">.comments</span><span class="selector-class">.v</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span>&#123;</span><br><span class="line">  <span class="attribute">border-left</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vh</span>&#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vwrap</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid black <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">250px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">98%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">1%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: visible <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">counter-reset</span>: avater;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vwrap</span> <span class="selector-class">.vedit</span> <span class="selector-class">.vemojis</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vwrap</span> <span class="selector-class">.vedit</span> <span class="selector-class">.vpreview</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vbtn</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#971212</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vwrap</span> <span class="selector-class">.vedit</span> <span class="selector-class">.vctrl</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vwrap</span> <span class="selector-class">.vedit</span> <span class="selector-class">.vctrl</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#7f7f7f</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">3px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vwrap</span> <span class="selector-class">.vedit</span> <span class="selector-class">.vctrl</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span> <span class="selector-class">.vcontent</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.vedit</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.vcontrol</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.veditor</span>&#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">70px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">98%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">1%</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">14px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">14px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span>  <span class="selector-class">.vquote</span> <span class="selector-class">.vcard</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vhead</span> <span class="selector-class">.vsys</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:none <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vh</span> <span class="selector-class">.vmeta</span> <span class="selector-class">.vat</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#177714</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vimg</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">12px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">counter-increment</span>: avater;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*设置评论头像旋转*/</span></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vimg</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">    <span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">    <span class="attribute">-transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span>&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span>&#123;</span><br><span class="line">  <span class="attribute">counter-reset</span>: avaters;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span> <span class="selector-class">.vimg</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: avaters <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span>  <span class="selector-class">.vhead</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">12px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#2d4e41</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">3px</span> solid <span class="number">#60a1e5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*content: counter(avater)'.'counter(avaters);</span></span><br><span class="line"><span class="comment">    counter-increment: avaters;*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">1.5em</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">margin</span>: unset;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span> <span class="selector-tag">a</span><span class="selector-class">.at</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#bea124</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">border</span>: unset;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span> <span class="selector-class">.vcontent</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vcontent</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">58px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">500</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: unset <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vquote</span> <span class="selector-class">.vhead</span> <span class="selector-class">.vnick</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#5af</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">300</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vhead</span> <span class="selector-class">.vnick</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">500</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#5b6b68</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span>&#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">8px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vh</span>&#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vhead</span>&#123;</span><br><span class="line">  <span class="attribute">float</span>: left <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vh</span> <span class="selector-class">.vmeta</span>&#123;</span><br><span class="line">  <span class="attribute">float</span>: right <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v</span> <span class="selector-class">.vlist</span> <span class="selector-class">.vcard</span> <span class="selector-class">.vcontent</span><span class="selector-class">.expand</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"👆 展开留言"</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">400</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#666</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#276c95</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">35%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">15%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">29px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#bbb</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.site-author-name</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文章页内标签样式*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-tags</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">40px</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-tags</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">-moz-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.12</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.24</span>);</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">'Comic Sans MS'</span>, sans-serif;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.2s</span> ease-out;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">  <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(100,154,182,0<span class="selector-class">.902</span>);</span><br><span class="line">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span><br><span class="line">  <span class="selector-tag">-webkit-box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  <span class="selector-tag">-moz-box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  <span class="selector-tag">box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.2</span>), 0 6<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.19</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*相关文章推荐样式设置*/</span></span><br><span class="line"><span class="selector-class">.popular-posts-header</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"PT Serif"</span>, <span class="string">"Songti SC"</span>, STZhongsong, <span class="string">"PingFang SC"</span>, <span class="string">"Microsoft YaHei"</span>, Georgia, sans;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">900</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.popular-posts</span> <span class="selector-class">.popular-posts-item</span> <span class="selector-class">.popular-posts-title</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</span><br><span class="line">  &amp;:hover&#123;</span><br><span class="line">    <span class="selector-tag">border-bottom</span>: <span class="selector-tag">none</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">article</span><span class="selector-class">.post-block</span><span class="selector-class">.home</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">30px</span> <span class="number">20px</span> <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">40px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">12</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">article</span><span class="selector-class">.post-block</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">30px</span> <span class="number">20px</span> <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">40px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">12</span>);</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 添加博客背景 */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>:<span class="built_in">url</span>(../images/background.png);</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>:repeat-x;</span><br><span class="line">  <span class="attribute">background-attachment</span>:fixed;</span><br><span class="line">  <span class="attribute">background-size</span>:cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 博客内容透明化 */</span></span><br><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.85</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.popup</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//hitokoto一言</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hitokoto-title</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#hitokoto</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"Microsoft YaHei"</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">11px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#hitofrom</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"Microsoft YaHei"</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo官方文档</a></li>
<li><a href="https://www.liaofuzhan.com/posts/4084686398.html" target="_blank" rel="noopener">Hexo-abbrlink生成唯一文章链接</a></li>
<li><a href="https://bestzuo.cn/posts/blog-establish.html" target="_blank" rel="noopener">Hexo博客+Next主题深度优化与定制 - Sanarous的博客</a></li>
<li><a href="https://www.liaofuzhan.com/posts/2114475547.html" target="_blank" rel="noopener">Hexo NexT主题美化2.0 | Leaface</a></li>
<li><a href="https://www.okcode.net/article/58394" target="_blank" rel="noopener">【极客日常】hexo+NexT博客自定义代码高亮主题配色CSS</a></li>
<li><a href="https://yunhao.space/2018/06/27/hexo-leancloud-plugin-installation-tutor/" target="_blank" rel="noopener">Hexo NexT 主题 LeanCloud 插件安装教程</a></li>
<li><a href="https://blog.bill.moe/hexo-theme-next-config-optimization/" target="_blank" rel="noopener">Hexo-NexT主题自定义配置高阶教程</a></li>
<li><a href="https://www.playpi.org/2018112101.html" target="_blank" rel="noopener">Hexo 博客静态资源压缩优化</a></li>
<li><a href="https://dev.to/bbenefield89/fixing-npm-dependencies-vulnerabilities-6p8" target="_blank" rel="noopener">Fixing NPM Dependencies Vulnerabilities</a></li>
<li><a href="https://chenclaire.wordpress.com/2019/06/20/%E5%A6%82%E4%BD%95%E8%A7%A3%E6%B1%BA-vulnerabilities-required-manual-review-and-could-not-be-updated%EF%BD%9Ccoding-notes/" target="_blank" rel="noopener">如何解決 “VULNERABILITIES REQUIRED MANUAL REVIEW AND COULD NOT BE UPDATED”｜CODING NOTES</a></li>
<li><a href="https://blog.bill.moe/add-hitokoto/" target="_blank" rel="noopener">为您的Hexo博客添加Hitokoto一言功能</a></li>
</ul>
]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
</search>
